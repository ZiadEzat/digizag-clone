function tableToGrid(a,b){jQuery(a).each(function(){if(!this.grid){jQuery(this).width("99%");var a=jQuery(this).width(),c=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),d=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),e=c.length>0,f=!e&&d.length>0,g=e||f,h=[],i=[];jQuery("th",jQuery(this)).each(function(){0===h.length&&g?(h.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),i.push("__selection__")):(h.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),i.push(jQuery(this).html()))});var j=[],k=[],l=[];jQuery("tbody > tr",jQuery(this)).each(function(){var a={},b=0;jQuery("td",jQuery(this)).each(function(){if(0===b&&g){var c=jQuery("input",jQuery(this)),d=c.attr("value");k.push(d||j.length),c.is(":checked")&&l.push(d),a[h[b].name]=c.attr("value")}else a[h[b].name]=jQuery(this).html();b++}),b>0&&j.push(a)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:a,colNames:i,colModel:h,multiselect:e},b||{}));var m;for(m=0;m<j.length;m++){var n=null;k.length>0&&(n=k[m],n&&n.replace&&(n=encodeURIComponent(n).replace(/[.\-%]/g,"_"))),null===n&&(n=m+1),jQuery(this).jqGrid("addRowData",n,j[m])}for(m=0;m<l.length;m++)jQuery(this).jqGrid("setSelection",l[m])}})}!function($){"use strict";$.jgrid=$.jgrid||{},$.extend($.jgrid,{version:"4.4.1",htmlDecode:function(a){return a&&("&nbsp;"==a||"&#160;"==a||1===a.length&&160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},format:function(a){var b=$.makeArray(arguments).slice(1);return void 0===a&&(a=""),a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})},getCellIndex:function(a){var b=$(a);return b.is("tr")?-1:(b=(b.is("td")||b.is("th")?b:b.closest("td,th"))[0],$.browser.msie?$.inArray(b,b.parentNode.cells):b.cellIndex)},stripHtml:function(a){a+="";var b=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(b,""),a&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):""):a},stripPref:function(a,b){var c=$.type(a);return("string"==c||"number"==c)&&(a=String(a),b=""!==a?String(b).replace(String(a),""):b),b},stringToDoc:function(a){var b;if("string"!=typeof a)return a;try{var c=new DOMParser;b=c.parseFromString(a,"text/xml")}catch(d){b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}return b&&b.documentElement&&"parsererror"!=b.documentElement.tagName?b:null},parse:function(jsonString){var js=jsonString;return"while(1);"==js.substr(0,9)&&(js=js.substr(9)),"/*"==js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(a,b){var c,d,e,f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},g=/[\\\/:_;.,\t\T\s-]/;if(b&&null!==b&&void 0!==b){b=$.trim(b),b=b.split(g),void 0!==$.jgrid.formatter.date.masks[a]&&(a=$.jgrid.formatter.date.masks[a]),a=a.split(g);var h=$.jgrid.formatter.date.monthNames,i=$.jgrid.formatter.date.AmPm,j=function(a,b){return 0===a?12===b&&(b=0):12!==b&&(b+=12),b};for(c=0,d=a.length;d>c;c++)"M"==a[c]&&(e=$.inArray(b[c],h),-1!==e&&12>e&&(b[c]=e+1,f.m=b[c])),"F"==a[c]&&(e=$.inArray(b[c],h),-1!==e&&e>11&&(b[c]=e+1-12,f.m=b[c])),"a"==a[c]&&(e=$.inArray(b[c],i),-1!==e&&2>e&&b[c]==i[e]&&(b[c]=e,f.h=j(b[c],f.h))),"A"==a[c]&&(e=$.inArray(b[c],i),-1!==e&&e>1&&b[c]==i[e]&&(b[c]=e-2,f.h=j(b[c],f.h))),"g"===a[c]&&(f.h=parseInt(b[c],10)),void 0!==b[c]&&(f[a[c].toLowerCase()]=parseInt(b[c],10));f.m=parseInt(f.m,10)-1;var k=f.y;k>=70&&99>=k?f.y=1900+f.y:k>=0&&69>=k&&(f.y=2e3+f.y),void 0!==f.j&&(f.d=f.j),void 0!==f.n&&(f.m=parseInt(f.n,10)-1)}return new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(a){return(a?a:$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(a,b){var c,d,e,f=[];if("function"==typeof b)return b(a);if(c=a[b],void 0===c)try{if("string"==typeof b&&(f=b.split(".")),e=f.length)for(c=a;c&&e--;)d=f.shift(),c=c[d]}catch(g){}return c},getXmlData:function(a,b,c){var d,e="string"==typeof b?b.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof b?b(a):e&&e[2]?e[1]?$(e[1],a).attr(e[2]):$(a).attr(e[2]):(d=$(b,a),c?d:d.length>0?$(d).text():void 0)},cellWidth:function(){var a=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),b=a.appendTo("body").find("td").width();return a.remove(),5!==b},ajaxOptions:{},from:function(source){var QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"!=typeof d[0]?!1:!0),this._hasData=function(){return null===_data?!1:0===_data.length?!1:!0},this._getStr=function(a){var b=[];return _trim&&b.push("jQuery.trim("),b.push("String("+a+")"),_trim&&b.push(")"),_usecase||b.push(".toLowerCase()"),b.join("")},this._strComp=function(a){return"string"==typeof a?".toString()":""},this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}},this._toStr=function(a){return _trim&&(a=$.trim(a)),a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?a:a.toLowerCase()},this._funcLoop=function(a){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b},this._append=function(a){var b;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,b=0;_orDepth>b;b++)_query+="(";_negate&&(_query+="!"),_query+="("+a+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(a,b){_lastCommand=a,_lastField=b},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(a,b){return null===_lastCommand?self:null!==a&&null!==b?_lastCommand(a,b):null===_lastField?_lastCommand(a):_useProperties?_lastCommand(_lastField,a):_lastCommand(a)},this._equals=function(a,b){return 0===self._compare(a,b,1)},this._compare=function(a,b,c){var d=Object.prototype.toString;return void 0===c&&(c=1),void 0===a&&(a=null),void 0===b&&(b=null),null===a&&null===b?0:null===a&&null!==b?1:null!==a&&null===b?-1:"[object Date]"===d.call(a)&&"[object Date]"===d.call(b)?b>a?-c:a>b?c:0:(_usecase||"number"==typeof a||"number"==typeof b||(a=String(a).toLowerCase(),b=String(b).toLowerCase()),b>a?-c:a>b?c:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(a,b){var c=_sorting[b].by,d=_sorting[b].dir,e=_sorting[b].type,f=_sorting[b].datefmt;if(b==_sorting.length-1)return self._getOrder(a,c,d,e,f);b++;for(var g=self._getGroup(a,c,d,e,f),h=[],i=0;i<g.length;i++)for(var j=self._doSort(g[i].items,b),k=0;k<j.length;k++)h.push(j[k]);return h},this._getOrder=function(a,b,c,d,e){var f,g,h,i,j=[],k=[],l="a"==c?1:-1;void 0===d&&(d="text"),i="float"==d||"number"==d||"currency"==d||"numeric"==d?function(a){var b=parseFloat(String(a).replace(_stripNum,""));return isNaN(b)?0:b}:"int"==d||"integer"==d?function(a){return a?parseFloat(String(a).replace(_stripNum,"")):0}:"date"==d||"datetime"==d?function(a){return $.jgrid.parseDate(e,a).getTime()}:$.isFunction(d)?d:function(a){return a||(a=""),$.trim(String(a).toUpperCase())},$.each(a,function(a,c){g=""!==b?$.jgrid.getAccessor(c,b):c,void 0===g&&(g=""),g=i(g,c),k.push({vSort:g,index:a})}),k.sort(function(a,b){return a=a.vSort,b=b.vSort,self._compare(a,b,l)}),h=0;for(var m=a.length;m>h;)f=k[h].index,j.push(a[f]),h++;return j},this._getGroup=function(a,b,c,d,e){var f,g=[],h=null,i=null;return $.each(self._getOrder(a,b,c,d,e),function(a,c){f=$.jgrid.getAccessor(c,b),void 0===f&&(f=""),self._equals(i,f)||(i=f,null!==h&&g.push(h),h=self._group(b,f)),h.items.push(c)}),null!==h&&g.push(h),g},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(a){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(a)){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b}return _data},this.hasMatch=function(){return self._hasData()?(self.execute(),_data.length>0):!1},this.andNot=function(a,b,c){return _negate=!_negate,self.and(a,b,c)},this.orNot=function(a,b,c){return _negate=!_negate,self.or(a,b,c)},this.not=function(a,b,c){return self.andNot(a,b,c)},this.and=function(a,b,c){return _queuedOperator=" && ",void 0===a?self:self._repeatCommand(a,b,c)},this.or=function(a,b,c){return _queuedOperator=" || ",void 0===a?self:self._repeatCommand(a,b,c)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(a){return _negate=!_negate,self.is(a)},this.is=function(a){return self._append("this."+a),self._resetNegate(),self},this._compareValues=function(a,b,c,d,e){var f;f=_useProperties?"jQuery.jgrid.getAccessor(this,'"+b+"')":"this",void 0===c&&(c=null);var g=c,h=void 0===e.stype?"text":e.stype;if(null!==c)switch(h){case"int":case"integer":g=isNaN(Number(g))||""===g?"0":g,f="parseInt("+f+",10)",g="parseInt("+g+",10)";break;case"float":case"number":case"numeric":g=String(g).replace(_stripNum,""),g=isNaN(Number(g))||""===g?"0":g,f="parseFloat("+f+")",g="parseFloat("+g+")";break;case"date":case"datetime":g=String($.jgrid.parseDate(e.newfmt||"Y-m-d",g).getTime()),f='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+f+").getTime()";break;default:f=self._getStr(f),g=self._getStr('"'+self._toStr(g)+'"')}return self._append(f+" "+d+" "+g),self._setCommand(a,b),self._resetNegate(),self},this.equals=function(a,b,c){return self._compareValues(self.equals,a,b,"==",c)},this.notEquals=function(a,b,c){return self._compareValues(self.equals,a,b,"!==",c)},this.isNull=function(a,b,c){return self._compareValues(self.equals,a,null,"===",c)},this.greater=function(a,b,c){return self._compareValues(self.greater,a,b,">",c)},this.less=function(a,b,c){return self._compareValues(self.less,a,b,"<",c)},this.greaterOrEquals=function(a,b,c){return self._compareValues(self.greaterOrEquals,a,b,">=",c)},this.lessOrEquals=function(a,b,c){return self._compareValues(self.lessOrEquals,a,b,"<=",c)},this.startsWith=function(a,b){var c=void 0===b||null===b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(b)+'"')):(d=_trim?$.trim(b.toString()).length:b.toString().length,self._append(self._getStr("this")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(a)+'"'))),self._setCommand(self.startsWith,a),self._resetNegate(),self},this.endsWith=function(a,b){var c=void 0===b||null===b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+d+","+d+') == "'+self._toStr(b)+'"'):self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(a)+'".length,"'+self._toStr(a)+'".length) == "'+self._toStr(a)+'"'),self._setCommand(self.endsWith,a),self._resetNegate(),self},this.contains=function(a,b){return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+self._toStr(b)+'",0) > -1'):self._append(self._getStr("this")+'.indexOf("'+self._toStr(a)+'",0) > -1'),self._setCommand(self.contains,a),self._resetNegate(),self},this.groupBy=function(a,b,c,d){return self._hasData()?self._getGroup(_data,a,b,c,d):null},this.orderBy=function(a,b,c,d){return b=void 0===b||null===b?"a":$.trim(b.toString().toLowerCase()),(null===c||void 0===c)&&(c="text"),(null===d||void 0===d)&&(d="Y-m-d"),("desc"==b||"descending"==b)&&(b="d"),("asc"==b||"ascending"==b)&&(b="a"),_sorting.push({by:a,dir:b,type:c,datefmt:d}),self},self};return new QueryObject(source,null)},extend:function(a){$.extend($.fn.jqGrid,a),this.no_legacy_api||$.fn.extend(a)}}),$.fn.jqGrid=function(a){if("string"==typeof a){var b=$.jgrid.getAccessor($.fn.jqGrid,a);if(!b)throw"jqGrid - No such method: "+a;var c=$.makeArray(arguments).slice(1);return b.apply(this,c)}return this.each(function(){if(!this.grid){var b=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{},idPrefix:""},$.jgrid.defaults,a||{}),c=this,d={headers:[],cols:[],footers:[],dragStart:function(a,d,e){if(this.resizing={idx:a,startX:d.clientX,sOL:e[0]},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(b.id),"#gbox_"+$.jgrid.jqID(b.id)),this.curGbox.css({display:"block",left:e[0],top:e[1],height:e[2]}),a===this.headers.length-1){var f=this.headers[a];$(f.el).after('<th id="last-resize-spacer" style="width:300px;"></th>'),$(f.el).parents("div.data-grid").css({overflowY:"auto"})}$(c).triggerHandler("jqGridResizeStart",[d,a]),$.isFunction(b.resizeStart)&&b.resizeStart.call(this,d,a),document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var c,d,e=this.headers[this.resizing.idx],f=a.clientX-this.resizing.startX,g="ltr"===b.direction?e.width+f:e.width-f;g>33&&(this.curGbox.css({left:this.resizing.sOL+f}),b.forceFit===!0?(c=this.headers[this.resizing.idx+b.nv],d="ltr"===b.direction?c.width-f:c.width+f,d>33&&(e.newWidth=g,c.newWidth=d)):(this.newWidth="ltr"===b.direction?b.tblwidth+f:b.tblwidth-f,e.newWidth=g))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){this.resizing.main&&(this.resizing.main.container.width(this.resizing.main.owidth),this.resizing.main.container.scrollTo(this.resizing.main.container.width(),0,{axis:"x"}),this.resizing.main.head&&this.resizing.main.head.container.width(this.resizing.main.head.owidth));var a=this.resizing.idx,d=this.headers[a].newWidth||this.headers[a].width;d=parseInt(d,10),this.resizing=!1;this.headers[a];$("#last-resize-spacer").remove(),$("#rs_m"+$.jgrid.jqID(b.id)).css("display","none"),b.colModel[a].width=d,this.headers[a].width=d,this.headers[a].el.style.width=d+"px",this.cols[a].style.width=d+"px",this.footers.length>0&&(this.footers[a].style.width=d+"px"),b.forceFit===!0?(d=this.headers[a+b.nv].newWidth||this.headers[a+b.nv].width,this.headers[a+b.nv].width=d,this.headers[a+b.nv].el.style.width=d+"px",this.cols[a+b.nv].style.width=d+"px",this.footers.length>0&&(this.footers[a+b.nv].style.width=d+"px"),b.colModel[a+b.nv].width=d):(b.tblwidth=this.newWidth||b.tblwidth,$("table:first",this.bDiv).css("width",b.tblwidth+"px"),$("table:first",this.hDiv).css("width",b.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,b.footerrow&&($("table:first",this.sDiv).css("width",b.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),$(c).triggerHandler("jqGridResizeStop",[d,a]),$.isFunction(b.resizeStop)&&b.resizeStop.call(this,d,a)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){d.timer&&clearTimeout(d.timer),d.timer=null;var a=$(d.bDiv).height();if(a){var c,e,f=$("table:first",d.bDiv);if(f[0].rows.length)try{c=f[0].rows[1],e=c?$(c).outerHeight()||d.prevRowHeight:d.prevRowHeight}catch(g){e=d.prevRowHeight}if(e){d.prevRowHeight=e;var h,i,j,k=b.rowNum,l=d.scrollTop=d.bDiv.scrollTop,m=Math.round(f.position().top)-l,n=m+f.height(),o=e*k;if(a>n&&0>=m&&(void 0===b.lastpage||parseInt((n+l+o-1)/o,10)<=b.lastpage)&&(i=parseInt((a-n+o-1)/o,10),n>=0||2>i||b.scroll===!0?(h=Math.round((n+l)/o)+1,m=-1):m=1),m>0&&(h=parseInt(l/o,10)+1,i=parseInt((l+a)/o,10)+2-h,j=!0),i){if(b.lastpage&&h>b.lastpage||1==b.lastpage||h===b.page&&h===b.lastpage)return;d.hDiv.loading?d.timer=setTimeout(d.populateVisible,b.scrollTimeout):(b.page=h,j&&(d.selectionPreserver(f[0]),d.emptyRows.call(f[0],!1,!1)),d.populate(i))}}}},scrollGrid:function(a){if(b.scroll){var c=d.bDiv.scrollTop;void 0===d.scrollTop&&(d.scrollTop=0),c!=d.scrollTop&&(d.scrollTop=c,d.timer&&clearTimeout(d.timer),d.timer=setTimeout(d.populateVisible,b.scrollTimeout))}d.hDiv.scrollLeft=d.bDiv.scrollLeft,b.footerrow&&(d.sDiv.scrollLeft=d.bDiv.scrollLeft),a&&a.stopPropagation()},selectionPreserver:function(a){var b=a.p,c=b.selrow,d=b.selarrrow?$.makeArray(b.selarrrow):null,e=a.grid.bDiv.scrollLeft,f=function(){var g;if(b.selrow=null,b.selarrrow=[],b.multiselect&&d&&d.length>0)for(g=0;g<d.length;g++)d[g]!=c&&$(a).jqGrid("setSelection",d[g],!1,null);c&&$(a).jqGrid("setSelection",c,!1,null),a.grid.bDiv.scrollLeft=e,$(a).unbind(".selectionPreserver",f)};$(a).bind("jqGridGridComplete.selectionPreserver",f)}};if("TABLE"!=this.tagName.toUpperCase())return void alert("Element is not a table");if(void 0!==document.documentMode&&document.documentMode<=5)return void alert("Grid can not be used in this ('quirks') mode!");$(this).empty().attr("tabindex","0"),this.p=b,this.p.useProp=!!$.fn.prop;var e,f;if(0===this.p.colNames.length)for(e=0;e<this.p.colModel.length;e++)this.p.colNames[e]=this.p.colModel[e].label||this.p.colModel[e].name;if(this.p.colNames.length!==this.p.colModel.length)return void alert($.jgrid.errors.model);var g,h=$("<div class='ui-jqgrid-view'></div>"),i=$.browser.msie?!0:!1;c.p.direction=$.trim(c.p.direction.toLowerCase()),-1==$.inArray(c.p.direction,["ltr","rtl"])&&(c.p.direction="ltr"),f=c.p.direction,$(h).insertBefore(this),$(this).appendTo(h).removeClass("scroll");var j=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(j).insertBefore(h).attr({id:"gbox_"+this.id,dir:f}),$(h).appendTo(j).attr("id","gview_"+this.id),g=i&&$.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(g).insertBefore(h),$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(h),$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var k=["shiftKey","altKey","ctrlKey"],l=function(a,b){return a=parseInt(a,10),isNaN(a)?b?b:0:a},m=function(a,b,e,f,g,h){var i,j=c.p.colModel[a],k=j.align,l='style="',m=j.classes,n=j.name,o=[];return k&&(l+="text-align:"+k+";"),j.hidden===!0&&(l+="display:none;"),0===b?l+="width: "+d.headers[a].width+"px;":j.cellattr&&$.isFunction(j.cellattr)&&(i=j.cellattr.call(c,g,e,f,j,h),i&&"string"==typeof i&&(i=i.replace(/style/i,"style").replace(/title/i,"title"),i.indexOf("title")>-1&&(j.title=!1),i.indexOf("class")>-1&&(m=void 0),o=i.split("style"),2===o.length?(o[1]=$.trim(o[1].replace("=","")),(0===o[1].indexOf("'")||0===o[1].indexOf('"'))&&(o[1]=o[1].substring(1)),l+=o[1].replace(/'/gi,'"')):l+='"')),o.length||(o[0]="",l+='"'),l+=(void 0!==m?' class="'+m+'"':"")+(j.title&&e?' title="'+$.jgrid.stripHtml(e)+'"':""),l+=' aria-describedby="'+c.p.id+"_"+n+'"',l+o[0]},n=function(a){return void 0===a||null===a||""===a?"&#160;":c.p.autoencode?$.jgrid.htmlEncode(a):a+""},o=function(a,b,d,e,f){var g,h=c.p.colModel[d];if("undefined"!=typeof h.formatter){var i={rowId:a,colModel:h,gid:c.p.id,pos:d};g=$.isFunction(h.formatter)?h.formatter.call(c,b,i,e,f):$.fmatter?$.fn.fmatter.call(c,h.formatter,b,i,e,f):n(b)}else g=n(b);return g},p=function(a,b,c,d,e,f){var g,h;return g=o(a,b,c,e,"add"),h=m(c,d,g,e,a,f),'<td role="gridcell" '+h+">"+g+"</td>"},q=function(a,b,d,e){var f='<input role="checkbox" type="checkbox" id="jqg_'+c.p.id+"_"+a+'" class="cbox" name="jqg_'+c.p.id+"_"+a+'"'+(e?'checked="checked"':"")+"/>",g=m(b,d,"",null,a,!0);return'<td role="gridcell" '+g+">"+f+"</td>"},r=function(a,b,c,d){var e=(parseInt(c,10)-1)*parseInt(d,10)+1+b,f=m(a,b,e,null,b,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+e+"</td>"},s=function(a){var b,d,e=[],f=0;for(d=0;d<c.p.colModel.length;d++)b=c.p.colModel[d],"cb"!==b.name&&"subgrid"!==b.name&&"rn"!==b.name&&(e[f]="local"==a?b.name:"xml"==a||"xmlstring"===a?b.xmlmap||b.name:b.jsonmap||b.name,f++);return e},t=function(a){var b=c.p.remapColumns;return b&&b.length||(b=$.map(c.p.colModel,function(a,b){return b})),a&&(b=$.map(b,function(b){return a>b?null:b-a})),b},u=function(a,b){var c;this.p.deepempty?$(this.rows).slice(1).remove():(c=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(c)),a&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),b===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},v=function(){var a,b,d,e=c.p.data.length,f=c.p.rownumbers===!0?1:0,g=c.p.multiselect===!0?1:0,h=c.p.subGrid===!0?1:0;for(a=c.p.keyIndex===!1||c.p.loadonce===!0?c.p.localReader.id:c.p.colModel[c.p.keyIndex+g+h+f].name,b=0;e>b;b++)d=$.jgrid.getAccessor(c.p.data[b],a),c.p._index[d]=b},w=function(a,b,d,e,f,g){var h,i="-1",j="",k=b?"display:none;":"",l="ui-widget-content jqgrow ui-row-"+c.p.direction+d+(g?" ui-state-highlight":""),m=$.isFunction(c.p.rowattr)?c.p.rowattr.call(c,e,f):{};if(!$.isEmptyObject(m)){m.hasOwnProperty("id")&&(a=m.id,delete m.id),m.hasOwnProperty("tabindex")&&(i=m.tabindex,delete m.tabindex),m.hasOwnProperty("style")&&(k+=m.style,delete m.style),m.hasOwnProperty("class")&&(l+=" "+m["class"],delete m["class"]);try{delete m.role}catch(n){}for(h in m)m.hasOwnProperty(h)&&(j+=" "+h+"="+m[h])}return'<tr role="row" id="'+a+'" tabindex="'+i+'" class="'+l+'"'+(""===k?"":' style="'+k+'"')+j+">"},x=function(a,b,d,e,f){var g=new Date,h="local"!=c.p.datatype&&c.p.loadonce||"xmlstring"==c.p.datatype,i="_id_",j=c.p.xmlReader,k="local"==c.p.datatype?"local":"xml";if(h&&(c.p.data=[],c.p._index={},c.p.localReader.id=i),c.p.reccount=0,$.isXMLDoc(a)){-1!==c.p.treeANode||c.p.scroll?d=d>1?d:1:(u.call(c,!1,!0),d=1);var l,m,n,o,v,x,y,z,A,B=0,C=c.p.multiselect===!0?1:0,D=c.p.subGrid===!0?1:0,E=c.p.rownumbers===!0?1:0,F=[],G={},H=[],I=c.p.altRows===!0?" "+c.p.altclass:"";j.repeatitems||(F=s(k)),o=c.p.keyIndex===!1?$.isFunction(j.id)?j.id.call(c,a):j.id:c.p.keyIndex,F.length>0&&!isNaN(o)&&(c.p.remapColumns&&c.p.remapColumns.length&&(o=$.inArray(o,c.p.remapColumns)),o=F[o]),v=-1===(o+"").indexOf("[")?F.length?function(a,b){return $(o,a).text()||b}:function(a,b){return $(j.cell,a).eq(o).text()||b}:function(a,b){return a.getAttribute(o.replace(/[\[\]]/g,""))||b},c.p.userData={},c.p.page=$.jgrid.getXmlData(a,j.page)||c.p.page||0,c.p.lastpage=$.jgrid.getXmlData(a,j.total),void 0===c.p.lastpage&&(c.p.lastpage=1),c.p.records=$.jgrid.getXmlData(a,j.records)||0,$.isFunction(j.userdata)?c.p.userData=j.userdata.call(c,a)||{}:$.jgrid.getXmlData(a,j.userdata,!0).each(function(){c.p.userData[this.getAttribute("name")]=$(this).text()});var J=$.jgrid.getXmlData(a,j.root,!0);J=$.jgrid.getXmlData(J,j.row,!0),J||(J=[]);var K=J.length,L=0,M=[],N=parseInt(c.p.rowNum,10);if(K>0&&c.p.page<=0&&(c.p.page=1),J&&K){var O,P=c.p.scroll?$.jgrid.randId():1;f&&(N*=f+1);for(var Q=$.isFunction(c.p.afterInsertRow),R=c.p.grouping&&c.p.groupingView.groupCollapse===!0;K>L;){y=J[L],z=v(y,P+L),z=c.p.idPrefix+z,O=0===d?0:d+1,A=(O+L)%2==1?I:"";var S=H.length;if(H.push(""),E&&H.push(r(0,L,c.p.page,c.p.rowNum)),C&&H.push(q(z,E,L,!1)),D&&H.push($(c).jqGrid("addSubGridCell",C+E,L+d)),j.repeatitems){x||(x=t(C+D+E));var T=$.jgrid.getXmlData(y,j.cell,!0);$.each(x,function(a){var b=T[this];return b?(n=b.textContent||b.text,G[c.p.colModel[a+C+D+E].name]=n,void H.push(p(z,n,a+C+D+E,L+d,y,G))):!1})}else for(l=0;l<F.length;l++)n=$.jgrid.getXmlData(y,F[l]),G[c.p.colModel[l+C+D+E].name]=n,H.push(p(z,n,l+C+D+E,L+d,y,G));if(H[S]=w(z,R,A,G,y,!1),H.push("</tr>"),c.p.grouping&&(M=$(c).jqGrid("groupingPrepare",H,M,G,L),H=[]),(h||c.p.treeGrid===!0)&&(G[i]=z,c.p.data.push(G),c.p._index[z]=c.p.data.length-1),c.p.gridview===!1&&($("tbody:first",b).append(H.join("")),$(c).triggerHandler("jqGridAfterInsertRow",[z,G,y]),Q&&c.p.afterInsertRow.call(c,z,G,y),H=[]),G={},B++,L++,B==N)break}}if(c.p.gridview===!0&&(m=c.p.treeANode>-1?c.p.treeANode:0,c.p.grouping?($(c).jqGrid("groupingRender",M,c.p.colModel.length),M=null):c.p.treeGrid===!0&&m>0?$(c.rows[m]).after(H.join("")):$("tbody:first",b).append(H.join(""))),c.p.subGrid===!0)try{$(c).jqGrid("addSubGrid",C+E)}catch(_){}if(c.p.totaltime=new Date-g,B>0&&0===c.p.records&&(c.p.records=K),H=null,c.p.treeGrid===!0)try{$(c).jqGrid("setTreeNode",m+1,B+m+1)}catch(U){}if(c.p.treeGrid||c.p.scroll||(c.grid.bDiv.scrollTop=0),c.p.reccount=B,c.p.treeANode=-1,c.p.userDataOnFooter&&$(c).jqGrid("footerData","set",c.p.userData,!0),h&&(c.p.records=K,c.p.lastpage=Math.ceil(K/N)),e||c.updatepager(!1,!0),h)for(;K>B;){if(y=J[B],z=v(y,B+P),z=c.p.idPrefix+z,j.repeatitems){x||(x=t(C+D+E));var V=$.jgrid.getXmlData(y,j.cell,!0);$.each(x,function(a){var b=V[this];return b?(n=b.textContent||b.text,void(G[c.p.colModel[a+C+D+E].name]=n)):!1})}else for(l=0;l<F.length;l++)n=$.jgrid.getXmlData(y,F[l]),G[c.p.colModel[l+C+D+E].name]=n;G[i]=z,c.p.data.push(G),c.p._index[z]=c.p.data.length-1,G={},B++}}},y=function(a,b,d,e,f){var g=new Date;if(a){-1!==c.p.treeANode||c.p.scroll?d=d>1?d:1:(u.call(c,!1,!0),d=1);var h,i,j="_id_",k="local"!=c.p.datatype&&c.p.loadonce||"jsonstring"==c.p.datatype;k&&(c.p.data=[],c.p._index={},c.p.localReader.id=j),c.p.reccount=0,"local"==c.p.datatype?(h=c.p.localReader,i="local"):(h=c.p.jsonReader,i="json");var l,m,n,o,v,x,y,z,A,B,C,D,E=0,F=[],G=c.p.multiselect?1:0,H=c.p.subGrid?1:0,I=c.p.rownumbers===!0?1:0,J={},K=[],L=c.p.altRows===!0?" "+c.p.altclass:"";c.p.page=$.jgrid.getAccessor(a,h.page)||c.p.page||0,D=$.jgrid.getAccessor(a,h.total),c.p.lastpage=void 0===D?1:D,c.p.records=$.jgrid.getAccessor(a,h.records)||0,c.p.userData=$.jgrid.getAccessor(a,h.userdata)||{},h.repeatitems||(o=F=s(i)),z=c.p.keyIndex===!1?$.isFunction(h.id)?h.id.call(c,a):h.id:c.p.keyIndex,F.length>0&&!isNaN(z)&&(c.p.remapColumns&&c.p.remapColumns.length&&(z=$.inArray(z,c.p.remapColumns)),z=F[z]),y=$.jgrid.getAccessor(a,h.root),y||(y=[]),x=y.length,m=0,x>0&&c.p.page<=0&&(c.p.page=1);var M,N,O=parseInt(c.p.rowNum,10),P=c.p.scroll?$.jgrid.randId():1,Q=!1;f&&(O*=f+1),"local"!==c.p.datatype||c.p.deselectAfterSort||(Q=!0);for(var R=$.isFunction(c.p.afterInsertRow),S=[],T=c.p.grouping&&c.p.groupingView.groupCollapse===!0;x>m;){if(v=y[m],B=$.jgrid.getAccessor(v,z),void 0===B&&(B=P+m,0===F.length&&h.cell)){var U=$.jgrid.getAccessor(v,h.cell);B=void 0!==U?U[z]||B:B,U=null}B=c.p.idPrefix+B,v.rowid&&(B=v.rowid),M=1===d?0:d,C=(M+m)%2==1?L:"",Q&&(N=c.p.multiselect?-1!==$.inArray(B,c.p.selarrrow):B===c.p.selrow);var V=K.length;for(K.push(""),I&&K.push(r(0,m,c.p.page,c.p.rowNum)),G&&K.push(q(B,I,m,N)),H&&K.push($(c).jqGrid("addSubGridCell",G+I,m+d)),h.repeatitems&&(h.cell&&(v=$.jgrid.getAccessor(v,h.cell)),o||(o=t(G+H+I))),n=0;n<o.length;n++)l=$.jgrid.getAccessor(v,o[n]),J[c.p.colModel[n+G+H+I].name]=l,K.push(p(B,l,n+G+H+I,m+d,v,J));if(K[V]=w(B,T,C,J,v,N),K.push("</tr>"),c.p.grouping&&(S=$(c).jqGrid("groupingPrepare",K,S,J,m),K=[]),(k||c.p.treeGrid===!0)&&(J[j]=B,c.p.data.push(J),c.p._index[B]=c.p.data.length-1),c.p.gridview===!1&&($("#"+$.jgrid.jqID(c.p.id)+" tbody:first").append(K.join("")),$(c).triggerHandler("jqGridAfterInsertRow",[B,J,v]),R&&c.p.afterInsertRow.call(c,B,J,v),K=[]),J={},E++,m++,E==O)break}if(c.p.gridview===!0&&(A=c.p.treeANode>-1?c.p.treeANode:0,c.p.grouping?($(c).jqGrid("groupingRender",S,c.p.colModel.length),S=null):c.p.treeGrid===!0&&A>0?$(c.rows[A]).after(K.join("")):$("#"+$.jgrid.jqID(c.p.id)+" tbody:first").append(K.join(""))),c.p.subGrid===!0)try{$(c).jqGrid("addSubGrid",G+I)}catch(_){}if(c.p.totaltime=new Date-g,E>0&&0===c.p.records&&(c.p.records=x),K=null,c.p.treeGrid===!0)try{$(c).jqGrid("setTreeNode",A+1,E+A+1)}catch(W){}if(c.p.treeGrid||c.p.scroll||(c.grid.bDiv.scrollTop=0),c.p.reccount=E,c.p.treeANode=-1,c.p.userDataOnFooter&&$(c).jqGrid("footerData","set",c.p.userData,!0),k&&(c.p.records=x,c.p.lastpage=Math.ceil(x/O)),e||c.updatepager(!1,!0),k)for(;x>E&&y[E];){if(v=y[E],B=$.jgrid.getAccessor(v,z),void 0===B&&(B=P+E,0===F.length&&h.cell)){var X=$.jgrid.getAccessor(v,h.cell);B=X[z]||B,X=null}if(v){for(B=c.p.idPrefix+B,h.repeatitems&&(h.cell&&(v=$.jgrid.getAccessor(v,h.cell)),o||(o=t(G+H+I))),n=0;n<o.length;n++)l=$.jgrid.getAccessor(v,o[n]),J[c.p.colModel[n+G+H+I].name]=l;J[j]=B,c.p.data.push(J),c.p._index[B]=c.p.data.length-1,J={}}E++}}},z=function(){function a(b){var d,e,f,g,i,j=0;if(void 0!==b.groups){for(e=b.groups.length&&"OR"===b.groupOp.toString().toUpperCase(),e&&o.orBegin(),d=0;d<b.groups.length;d++){j>0&&e&&o.or();try{a(b.groups[d])}catch(k){alert(k)}j++}e&&o.orEnd()}if(void 0!==b.rules){if(j>0){var l=o.select();o=$.jgrid.from(l),c.p.ignoreCase&&(o=o.ignoreCase())}try{for(f=b.rules.length&&"OR"===b.groupOp.toString().toUpperCase(),f&&o.orBegin(),d=0;d<b.rules.length;d++)i=b.rules[d],g=b.groupOp.toString().toUpperCase(),n[i.op]&&i.field&&(j>0&&g&&"OR"===g&&(o=o.or()),o=n[i.op](o,g)(i.field,i.data,h[i.field])),j++;f&&o.orEnd()}catch(m){alert(m)}}}var b,d,e,f,g=!1,h={},i=[],j=[];if($.isArray(c.p.data)){var k,l,m=c.p.grouping?c.p.groupingView:!1;if($.each(c.p.colModel,function(){if(e=this.sorttype||"text","date"==e||"datetime"==e?(this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?(d=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.formatter.date.srcformat,f=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.formatter.date.newformat):d=f=this.datefmt||"Y-m-d",h[this.name]={stype:e,srcfmt:d,newfmt:f}):h[this.name]={stype:e,srcfmt:"",newfmt:""
},c.p.grouping)for(l=0,k=m.groupField.length;k>l;l++)if(this.name==m.groupField[l]){var a=this.name;"undefined"!=typeof this.index&&(a=this.index),i[l]=h[a],j[l]=a}g||this.index!=c.p.sortname&&this.name!=c.p.sortname||(b=this.name,g=!0)}),c.p.treeGrid)return void $(c).jqGrid("SortTree",b,c.p.sortorder,h[b].stype,h[b].srcfmt);var n={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},o=$.jgrid.from(c.p.data);if(c.p.ignoreCase&&(o=o.ignoreCase()),c.p.search===!0){var p=c.p.postData.filters;if(p)"string"==typeof p&&(p=$.jgrid.parse(p)),a(p);else try{o=n[c.p.postData.searchOper](o)(c.p.postData.searchField,c.p.postData.searchString,h[c.p.postData.searchField])}catch(q){}}if(c.p.grouping)for(l=0;k>l;l++)o.orderBy(j[l],m.groupOrder[l],i[l].stype,i[l].srcfmt);b&&c.p.sortorder&&g&&("DESC"==c.p.sortorder.toUpperCase()?o.orderBy(c.p.sortname,"d",h[b].stype,h[b].srcfmt):o.orderBy(c.p.sortname,"a",h[b].stype,h[b].srcfmt));var r=o.select(),s=parseInt(c.p.rowNum,10),t=r.length,u=parseInt(c.p.page,10),v=Math.ceil(t/s),w={};return r=r.slice((u-1)*s,u*s),o=null,h=null,w[c.p.localReader.total]=v,w[c.p.localReader.page]=u,w[c.p.localReader.records]=t,w[c.p.localReader.root]=r,w[c.p.localReader.userdata]=c.p.userData,r=null,w}},A=function(a,b){var d,e,f,g,h,i,j,k,m="",n=c.p.pager?"_"+$.jgrid.jqID(c.p.pager.substr(1)):"",o=c.p.toppager?"_"+c.p.toppager.substr(1):"";if(f=parseInt(c.p.page,10)-1,0>f&&(f=0),f*=parseInt(c.p.rowNum,10),h=f+c.p.reccount,c.p.scroll){var p=$("tbody:first > tr:gt(0)",c.grid.bDiv);f=h-p.length,c.p.reccount=p.length;var q=p.outerHeight()||c.grid.prevRowHeight;if(q){var r=f*q,s=parseInt(c.p.records,10)*q;$(">div:first",c.grid.bDiv).css({height:s}).children("div:first").css({height:r,display:r?"":"none"})}c.grid.bDiv.scrollLeft=c.grid.hDiv.scrollLeft}m=c.p.pager?c.p.pager:"",m+=c.p.toppager?m?","+c.p.toppager:c.p.toppager:"",m&&(j=$.jgrid.formatter.integer||{},d=l(c.p.page),e=l(c.p.lastpage),$(".selbox",m)[this.p.useProp?"prop":"attr"]("disabled",!1),c.p.pginput===!0&&($(".ui-pg-input",m).val(c.p.page),k=c.p.toppager?"#sp_1"+n+",#sp_1"+o:"#sp_1"+n,$(k).html($.fmatter?$.fmatter.util.NumberFormat(c.p.lastpage,j):c.p.lastpage)),c.p.viewrecords&&(0===c.p.reccount?$(".ui-paging-info",m).html(c.p.emptyrecords):(g=f+1,i=c.p.records,$.fmatter&&(g=$.fmatter.util.NumberFormat(g,j),h=$.fmatter.util.NumberFormat(h,j),i=$.fmatter.util.NumberFormat(i,j)),$(".ui-paging-info",m).html($.jgrid.format(c.p.recordtext,g,h,i)))),c.p.pgbuttons===!0&&(0>=d&&(d=e=0),1==d||0===d?($("#first"+n+", #prev"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),c.p.toppager&&$("#first_t"+o+", #prev_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+n+", #prev"+n).removeClass("ui-state-disabled"),c.p.toppager&&$("#first_t"+o+", #prev_t"+o).removeClass("ui-state-disabled")),d==e||0===d?($("#next"+n+", #last"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),c.p.toppager&&$("#next_t"+o+", #last_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+n+", #last"+n).removeClass("ui-state-disabled"),c.p.toppager&&$("#next_t"+o+", #last_t"+o).removeClass("ui-state-disabled")))),a===!0&&c.p.rownumbers===!0&&$("td.jqgrid-rownum",c.rows).each(function(a){$(this).html(f+1+a)}),b&&c.p.jqgdnd&&$(c).jqGrid("gridDnD","updateDnD"),$(c).triggerHandler("jqGridGridComplete"),$.isFunction(c.p.gridComplete)&&c.p.gridComplete.call(c),$(c).triggerHandler("jqGridAfterGridComplete")},B=function(){if(c.grid.hDiv.loading=!0,!c.p.hiddengrid)switch(c.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(c.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(c.p.id)).show(),$("#load_"+$.jgrid.jqID(c.p.id)).show()}},C=function(){switch(c.grid.hDiv.loading=!1,c.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(c.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(c.p.id)).hide(),$("#load_"+$.jgrid.jqID(c.p.id)).hide()}},D=function(a){if(!c.grid.hDiv.loading){var b,d,e=c.p.scroll&&a===!1,f={},g=c.p.prmNames;c.p.page<=0&&(c.p.page=1),null!==g.search&&(f[g.search]=c.p.search),null!==g.nd&&(f[g.nd]=(new Date).getTime()),null!==g.rows&&(f[g.rows]=c.p.rowNum),null!==g.page&&(f[g.page]=c.p.page),null!==g.sort&&(f[g.sort]=c.p.sortname),null!==g.order&&(f[g.order]=c.p.sortorder),null!==c.p.rowTotal&&null!==g.totalrows&&(f[g.totalrows]=c.p.rowTotal);var h=$.isFunction(c.p.loadComplete),i=h?c.p.loadComplete:null,j=0;if(a=a||1,a>1?null!==g.npage?(f[g.npage]=a,j=a-1,a=1):i=function(b){c.p.page++,c.grid.hDiv.loading=!1,h&&c.p.loadComplete.call(c,b),D(a-1)}:null!==g.npage&&delete c.p.postData[g.npage],c.p.grouping){$(c).jqGrid("groupingSetup");var k,l=c.p.groupingView,m="";for(k=0;k<l.groupField.length;k++){var n=l.groupField[k];$.each(c.p.colModel,function(a,b){b.name==n&&b.index&&(n=b.index)}),m+=n+" "+l.groupOrder[k]+", "}f[g.sort]=m+f[g.sort]}$.extend(c.p.postData,f);var o=c.p.scroll?c.rows.length-1:1,p=$(c).triggerHandler("jqGridBeforeRequest");if(p===!1||"stop"===p)return;if($.isFunction(c.p.datatype))return void c.p.datatype.call(c,c.p.postData,"load_"+c.p.id);if($.isFunction(c.p.beforeRequest)&&(p=c.p.beforeRequest.call(c),void 0===p&&(p=!0),p===!1))return;switch(b=c.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:c.p.url,type:c.p.mtype,dataType:b,data:$.isFunction(c.p.serializeGridData)?c.p.serializeGridData.call(c,c.p.postData):c.p.postData,success:function(d,f,g){return $.isFunction(c.p.beforeProcessing)&&c.p.beforeProcessing.call(c,d,f,g)===!1?void C():("xml"===b?x(d,c.grid.bDiv,o,a>1,j):y(d,c.grid.bDiv,o,a>1,j),$(c).triggerHandler("jqGridLoadComplete",[d]),i&&i.call(c,d),$(c).triggerHandler("jqGridAfterLoadComplete",[d]),e&&c.grid.populateVisible(),(c.p.loadonce||c.p.treeGrid)&&(c.p.datatype="local"),d=null,void(1===a&&C()))},error:function(b,d,e){$.isFunction(c.p.loadError)&&c.p.loadError.call(c,b,d,e),1===a&&C(),b=null},beforeSend:function(a,b){var d=!0;return $.isFunction(c.p.loadBeforeSend)&&(d=c.p.loadBeforeSend.call(c,a,b)),void 0===d&&(d=!0),d===!1?!1:void B()}},$.jgrid.ajaxOptions,c.p.ajaxGridOptions));break;case"xmlstring":B(),d=$.jgrid.stringToDoc(c.p.datastr),x(d,c.grid.bDiv),$(c).triggerHandler("jqGridLoadComplete",[d]),h&&c.p.loadComplete.call(c,d),$(c).triggerHandler("jqGridAfterLoadComplete",[d]),c.p.datatype="local",c.p.datastr=null,C();break;case"jsonstring":B(),d="string"==typeof c.p.datastr?$.jgrid.parse(c.p.datastr):c.p.datastr,y(d,c.grid.bDiv),$(c).triggerHandler("jqGridLoadComplete",[d]),h&&c.p.loadComplete.call(c,d),$(c).triggerHandler("jqGridAfterLoadComplete",[d]),c.p.datatype="local",c.p.datastr=null,C();break;case"local":case"clientside":B(),c.p.datatype="local";var q=z();y(q,c.grid.bDiv,o,a>1,j),$(c).triggerHandler("jqGridLoadComplete",[q]),i&&i.call(c,q),$(c).triggerHandler("jqGridAfterLoadComplete",[q]),e&&c.grid.populateVisible(),C()}}},E=function(a){$("#cb_"+$.jgrid.jqID(c.p.id),c.grid.hDiv)[c.p.useProp?"prop":"attr"]("checked",a);var b=c.p.frozenColumns?c.p.id+"_frozen":"";b&&$("#cb_"+$.jgrid.jqID(c.p.id),c.grid.fhDiv)[c.p.useProp?"prop":"attr"]("checked",a)},F=function(a,b){var d,e,g,h,i,j,k,m="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",n="",o="<div class='pagination'><table cellspacing='0' border='0'><tbody><tr>",p="",q=function(a){var b;return $.isFunction(c.p.onPaging)&&(b=c.p.onPaging.call(c,a)),c.p.selrow=null,c.p.multiselect&&(c.p.selarrrow=[],E(!1)),c.p.savedRow=[],"stop"==b?!1:!0};if(a=a.substr(1),b+="_"+a,d="pg_"+a,e=a+"_left",g=a+"_center",h=a+"_right",$("#"+$.jgrid.jqID(a)).append("<div id='"+d+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table ttest' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+e+"' align='left'></td><td id='"+g+"' align='center' style='white-space:pre;'></td><td id='"+h+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),c.p.rowList.length>0){for(p="<td dir='"+f+"'>",p+="<select class='ui-pg-selbox' role='listbox'>",k=0;k<c.p.rowList.length;k++)p+='<option role="option" value="'+c.p.rowList[k]+'"'+(c.p.rowNum==c.p.rowList[k]?' selected="selected"':"")+">"+c.p.rowList[k]+"</option>";p+="</select></td>"}if("rtl"==f&&(o+=p),c.p.pginput===!0&&(n="<td dir='"+f+"'>"+$.jgrid.format(c.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(a)+"'></span>")+"</td>"),c.p.pgbuttons===!0){var r=["first"+b,"prev"+b,"next"+b,"last"+b];"rtl"==f&&r.reverse(),o+="<td id='"+r[0]+"' class='ui-pg-button ui-corner-all'><span><a href='#'><i class='sprite-doubleleft'></i></a></span></td>",o+="<td id='"+r[1]+"' class='ui-pg-button ui-corner-all'><span><a href='#'><i class='sprite-left'></i></a></span></td>",o+=""!==n?m+n+m:"",o+="<td id='"+r[2]+"' class='ui-pg-button ui-corner-all'><span><a href='#'><i class='sprite-right'></i></a></span></td>",o+="<td id='"+r[3]+"' class='ui-pg-button ui-corner-all'><span><a href='#'><i class='sprite-doubleright'></i></a></span></td>"}else""!==n&&(o+=n);"ltr"==f&&(o+=p),o+="</tr></tbody></table>",c.p.viewrecords===!0&&$("td#"+a+"_"+c.p.recordpos,"#"+d).append("<div dir='"+f+"' style='text-align:"+c.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+a+"_"+c.p.pagerpos,"#"+d).append(o),j=$(".ui-jqgrid").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+j+";visibility:hidden;' ></div>"),i=$(o).clone().appendTo("#testpg").width(),$("#testpg").remove(),i>0&&""!==n&&(i+=50),c.p._nvtd=[],c.p._nvtd[0]=i?Math.floor((c.p.width-i)/2):Math.floor(c.p.width/3),c.p._nvtd[1]=0,o=null,$(".ui-pg-selbox","#"+d).bind("change",function(){return q("records")?(c.p.page=Math.round(c.p.rowNum*(c.p.page-1)/this.value-.5)+1,c.p.rowNum=this.value,c.p.pager&&$(".ui-pg-selbox",c.p.pager).val(this.value),c.p.toppager&&$(".ui-pg-selbox",c.p.toppager).val(this.value),D(),!1):!1}),c.p.pgbuttons===!0&&($(".ui-pg-button","#"+d).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(b)+", #prev"+$.jgrid.jqID(b)+", #next"+$.jgrid.jqID(b)+", #last"+$.jgrid.jqID(b)).click(function(){var a=l(c.p.page,1),d=l(c.p.lastpage,1),e=!1,f=!0,g=!0,h=!0,i=!0;return 0===d||1===d?(f=!1,g=!1,h=!1,i=!1):d>1&&a>=1?1===a?(f=!1,g=!1):a===d&&(h=!1,i=!1):d>1&&0===a&&(h=!1,i=!1,a=d-1),q(this.id)?(this.id==="first"+b&&f&&(c.p.page=1,e=!0),this.id==="prev"+b&&g&&(c.p.page=a-1,e=!0),this.id==="next"+b&&h&&(c.p.page=a+1,e=!0),this.id==="last"+b&&i&&(c.p.page=d,e=!0),e&&D(),!1):!1})),c.p.pginput===!0&&$("input.ui-pg-input","#"+d).keypress(function(a){var b=a.charCode?a.charCode:a.keyCode?a.keyCode:0;return 13==b?q("user")?(c.p.page=$(this).val()>0?$(this).val():c.p.page,D(),!1):!1:this})},G=function(a,b,d,e){if(c.p.colModel[b].sortable){var f;if(!(c.p.savedRow.length>0)){if(d||(c.p.lastsort==b?"asc"==c.p.sortorder?c.p.sortorder="desc":"desc"==c.p.sortorder&&(c.p.sortorder="asc"):c.p.sortorder=c.p.colModel[b].firstsortorder||"asc",c.p.page=1),e){if(c.p.lastsort==b&&c.p.sortorder==e&&!d)return;c.p.sortorder=e}var g=c.grid.headers[c.p.lastsort].el,h=c.grid.headers[b].el;if($("span.ui-grid-ico-sort",g).addClass("ui-state-disabled"),$(g).attr("aria-selected","false"),$("span.ui-icon-"+c.p.sortorder,h).removeClass("ui-state-disabled"),$(h).attr("aria-selected","true"),c.p.viewsortcols[0]||c.p.lastsort!=b&&($("span.s-ico",g).hide(),$("span.s-ico",h).show()),a=a.substring(5+c.p.id.length+1),c.p.sortname=c.p.colModel[b].index||a,f=c.p.sortorder,"stop"===$(c).triggerHandler("jqGridSortCol",[a,b,f]))return void(c.p.lastsort=b);if($.isFunction(c.p.onSortCol)&&"stop"==c.p.onSortCol.call(c,a,b,f))return void(c.p.lastsort=b);if("local"==c.p.datatype?c.p.deselectAfterSort&&$(c).jqGrid("resetSelection"):(c.p.selrow=null,c.p.multiselect&&E(!1),c.p.selarrrow=[],c.p.savedRow=[]),c.p.scroll){var i=c.grid.bDiv.scrollLeft;u.call(c,!0,!1),c.grid.hDiv.scrollLeft=i}c.p.subGrid&&"local"==c.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(c.p.id)).each(function(){$(this).trigger("click")}),D(),c.p.lastsort=b,c.p.sortname!=a&&b&&(c.p.lastsort=b)}}},H=function(){var a,b,e,f,g=0,h=$.jgrid.cellWidth()?0:l(c.p.cellLayout,0),i=0,j=l(c.p.scrollOffset,0),k=!1,m=0,n=0;$.each(c.p.colModel,function(){if("undefined"==typeof this.hidden&&(this.hidden=!1),c.p.grouping&&c.p.autowidth){var a=$.inArray(this.name,c.p.groupingView.groupField);-1!==a&&(this.hidden=!c.p.groupingView.groupColumnShow[a])}this.widthOrg=b=l(this.width,0),this.hidden===!1&&(g+=b+h,this.fixed?m+=b+h:i++,n++)}),isNaN(c.p.width)&&(c.p.width=g+(c.p.shrinkToFit!==!1||isNaN(c.p.height)?0:j)),d.width=c.p.width,c.p.tblwidth=g,c.p.shrinkToFit===!1&&c.p.forceFit===!0&&(c.p.forceFit=!1),c.p.shrinkToFit===!0&&i>0&&(e=d.width-h*i-m,isNaN(c.p.height)||(e-=j,k=!0),g=0,$.each(c.p.colModel,function(d){this.hidden!==!1||this.fixed||(b=Math.round(e*this.width/(c.p.tblwidth-h*i-m)),this.width=b,g+=b,a=d)}),f=0,k?d.width-m-(g+h*i)!==j&&(f=d.width-m-(g+h*i)-j):k||1===Math.abs(d.width-m-(g+h*i))||(f=d.width-m-(g+h*i)),c.p.colModel[a].width+=f,c.p.tblwidth=g+f+h*i+m,c.p.tblwidth>c.p.width&&(c.p.colModel[a].width-=c.p.tblwidth-parseInt(c.p.width,10),c.p.tblwidth=c.p.width))},I=function(a){var b,d=a,e=a;for(b=a+1;b<c.p.colModel.length;b++)if(c.p.colModel[b].hidden!==!0){e=b;break}return e-d},J=function(a){var b,d={},e=$.jgrid.cellWidth()?0:c.p.cellLayout;for(d[0]=d[1]=d[2]=0,b=0;a>=b;b++)c.p.colModel[b].hidden===!1&&(d[0]+=c.p.colModel[b].width+e);return"rtl"==c.p.direction&&(d[0]=c.p.width-d[0]),d[0]=d[0]-c.grid.bDiv.scrollLeft,$(c.grid.cDiv).is(":visible")&&(d[1]+=$(c.grid.cDiv).height()+parseInt($(c.grid.cDiv).css("padding-top"),10)+parseInt($(c.grid.cDiv).css("padding-bottom"),10)),c.p.toolbar[0]!==!0||"top"!=c.p.toolbar[1]&&"both"!=c.p.toolbar[1]||(d[1]+=$(c.grid.uDiv).height()+parseInt($(c.grid.uDiv).css("border-top-width"),10)+parseInt($(c.grid.uDiv).css("border-bottom-width"),10)),c.p.toppager&&(d[1]+=$(c.grid.topDiv).height()+parseInt($(c.grid.topDiv).css("border-bottom-width"),10)),d[2]+=$(c.grid.bDiv).height()+$(c.grid.hDiv).height(),d},K=function(a){var b,d=c.grid.headers,e=$.jgrid.getCellIndex(a);for(b=0;b<d.length;b++)if(a===d[b].el){e=b;break}return e};for(this.p.id=this.id,-1==$.inArray(c.p.multikey,k)&&(c.p.multikey=!1),c.p.keyIndex=!1,e=0;e<c.p.colModel.length;e++)c.p.colModel[e]=$.extend(!0,{},c.p.cmTemplate,c.p.colModel[e].template||{},c.p.colModel[e]),c.p.keyIndex===!1&&c.p.colModel[e].key===!0&&(c.p.keyIndex=e);if(c.p.sortorder=c.p.sortorder.toLowerCase(),c.p.grouping===!0&&(c.p.scroll=!1,c.p.rownumbers=!1,c.p.treeGrid=!1,c.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(_){}"local"!=c.p.datatype&&(c.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(c).jqGrid("setSubGrid")}catch(L){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cellWidth()?c.p.multiselectWidth+c.p.cellLayout:c.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:c.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),c.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},c.p.xmlReader),c.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},c.p.jsonReader),c.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},c.p.localReader),c.p.scroll&&(c.p.pgbuttons=!1,c.p.pginput=!1,c.p.rowList=[]),c.p.data.length&&v();var M,N,O,P,Q,R,S,T,U,V="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",W="",X="";if(c.p.shrinkToFit===!0&&c.p.forceFit===!0)for(e=c.p.colModel.length-1;e>=0;e--)if(!c.p.colModel[e].hidden){c.p.colModel[e].resizable=!1;break}for("horizontal"==c.p.viewsortcols[1]&&(W=" ui-i-asc",X=" ui-i-desc"),M=i?"class='ui-th-div-ie'":"",U="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+W+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+f+"'></span>",U+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+X+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+f+"'></span></span>",e=0;e<this.p.colNames.length;e++){var Y=c.p.headertitles?' title="'+$.jgrid.stripHtml(c.p.colNames[e])+'"':"";V+="<th id='"+c.p.id+"_"+c.p.colModel[e].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+f+"'"+Y+">",N=c.p.colModel[e].index||c.p.colModel[e].name,V+="<div id='jqgh_"+c.p.id+"_"+c.p.colModel[e].name+"' "+M+">"+c.p.colNames[e],c.p.colModel[e].width?c.p.colModel[e].width=parseInt(c.p.colModel[e].width,10):c.p.colModel[e].width=150,"boolean"!=typeof c.p.colModel[e].title&&(c.p.colModel[e].title=!0),N==c.p.sortname&&(c.p.lastsort=e),V+=U+"</div></th>"}if(V+="</tr></thead>",U=null,$(this).append(V),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect){var Z,aa=[];$("#cb_"+$.jgrid.jqID(c.p.id),this).bind("click",function(){c.p.selarrrow=[];var a=c.p.frozenColumns===!0?c.p.id+"_frozen":"";this.checked?($(c.rows).each(function(b){b>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(this.id))[c.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),c.p.selarrrow.push(this.id),c.p.selrow=this.id,a&&($("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(this.id),c.grid.fbDiv)[c.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),c.grid.fbDiv).addClass("ui-state-highlight"))))}),Z=!0,aa=[]):($(c.rows).each(function(b){b>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(this.id))[c.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),aa.push(this.id),a&&($("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(this.id),c.grid.fbDiv)[c.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),c.grid.fbDiv).removeClass("ui-state-highlight"))))}),c.p.selrow=null,Z=!1),$(c).triggerHandler("jqGridSelectAll",[Z?c.p.selarrrow:aa,Z]),$.isFunction(c.p.onSelectAll)&&c.p.onSelectAll.call(c,Z?c.p.selarrrow:aa,Z)})}if(c.p.autowidth===!0){var ba=$(j).innerWidth();c.p.width=ba>0?ba:"nw"}H(),$(j).css("width",d.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+c.p.id+"'>&#160;</div>"),$(h).css("width",d.width+"px"),V=$("thead:first",c).get(0);var ca="";c.p.footerrow&&(ca+="<table role='grid' style='width:"+c.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+f+"'>");var da=$("tr:first",V),ea="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(c.p.disableClick=!1,$("th",da).each(function(a){O=c.p.colModel[a].width,"undefined"==typeof c.p.colModel[a].resizable&&(c.p.colModel[a].resizable=!0),c.p.colModel[a].resizable?(P=document.createElement("span"),$(P).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+f),$.browser.opera||$(P).css("cursor","col-resize"),$(this).addClass(c.p.resizeclass)):P="",$(this).css("width",O+"px").prepend(P);var b="";c.p.colModel[a].hidden&&($(this).css("display","none"),b="display:none;"),ea+="<td role='gridcell' style='height:0px;width:"+O+"px;"+b+"'></td>",d.headers[a]={width:O,el:this},Q=c.p.colModel[a].sortable,"boolean"!=typeof Q&&(c.p.colModel[a].sortable=!0,Q=!0);var e=c.p.colModel[a].name;"cb"!=e&&"subgrid"!=e&&"rn"!=e&&c.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),Q&&(c.p.viewsortcols[0]?($("div span.s-ico",this).show(),a==c.p.lastsort&&$("div span.ui-icon-"+c.p.sortorder,this).removeClass("ui-state-disabled")):a==c.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+c.p.sortorder,this).removeClass("ui-state-disabled"))),c.p.footerrow&&(ca+="<td role='gridcell' "+m(a,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(a){if(1==$(a.target).closest("th>span.ui-jqgrid-resize").length){var b=K(this);c.p.forceFit===!0&&(c.p.nv=I(b)),d.dragStart(b,a,J(b))}}).click(function(a){if(c.p.disableClick)return c.p.disableClick=!1,!1;var b,d,e="th>div.ui-jqgrid-sortable";c.p.viewsortcols[2]||(e="th>div>span>span.ui-grid-ico-sort");var f=$(a.target).closest(e);if(1==f.length){var g=K(this);return c.p.viewsortcols[2]||(b=!0,d=f.attr("sort")),G($("div",this)[0].id,g,b,d),!1}}),c.p.sortable&&$.fn.sortable)try{$(c).jqGrid("sortableColumns",da)}catch(fa){}c.p.footerrow&&(ca+="</tr></tbody></table>"),ea+="</tr>",T=document.createElement("tbody"),this.appendChild(T),$(this).addClass("ui-jqgrid-btable").append(ea),ea=null;var ga=$("<table class='ui-jqgrid-htable table' style='width:"+c.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(V),ha=c.p.caption&&c.p.hiddengrid===!0?!0:!1,ia=$("<div class='ui-jqgrid-hbox"+("rtl"==f?"-rtl":"")+"'></div>");V=null,d.hDiv=document.createElement("div"),$(d.hDiv).css({width:d.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(ia),$(ia).append(ga),ga=null,ha&&$(d.hDiv).hide(),c.p.pager&&("string"==typeof c.p.pager?"#"!=c.p.pager.substr(0,1)&&(c.p.pager="#"+c.p.pager):c.p.pager="#"+$(c.p.pager).attr("id"),$(c.p.pager).css({width:d.width+"px"}).appendTo(j).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),ha&&$(c.p.pager).hide(),F(c.p.pager,"")),c.p.cellEdit===!1&&c.p.hoverrows===!0&&$(c).bind("mouseover",function(a){S=$(a.target).closest("tr.jqgrow"),"ui-subgrid"!==$(S).attr("class")&&$(S).addClass("ui-state-hover")}).bind("mouseout",function(a){S=$(a.target).closest("tr.jqgrow"),$(S).removeClass("ui-state-hover")});var ja,ka,la;$(c).before(d.hDiv).click(function(a){if(R=a.target,S=$(R,c.rows).closest("tr.jqgrow"),0===$(S).length||S[0].className.indexOf("ui-state-disabled")>-1||($(R,c).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==c.id)return this;var b=$(R).hasClass("cbox"),d=$(c).triggerHandler("jqGridBeforeSelectRow",[S[0].id,a]);if(d=d===!1||"stop"===d?!1:!0,d&&$.isFunction(c.p.beforeSelectRow)&&(d=c.p.beforeSelectRow.call(c,S[0].id,a)),"A"!=R.tagName&&("INPUT"!=R.tagName&&"TEXTAREA"!=R.tagName&&"OPTION"!=R.tagName&&"SELECT"!=R.tagName||b)&&d===!0)if(ja=S[0].id,ka=$.jgrid.getCellIndex(R),la=$(R).closest("td,th").html(),$(c).triggerHandler("jqGridCellSelect",[ja,ka,la,a]),$.isFunction(c.p.onCellSelect)&&c.p.onCellSelect.call(c,ja,ka,la,a),c.p.cellEdit===!0)if(c.p.multiselect&&b)$(c).jqGrid("setSelection",ja,!0,a);else{ja=S[0].rowIndex;try{$(c).jqGrid("editCell",ja,ka,!0)}catch(_){}}else if(c.p.multikey)a[c.p.multikey]?$(c).jqGrid("setSelection",ja,!0,a):c.p.multiselect&&b&&(b=$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+ja).is(":checked"),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+ja)[c.p.useProp?"prop":"attr"]("checked",b));else if(c.p.multiselect&&c.p.multiboxonly)if(b)$(c).jqGrid("setSelection",ja,!0,a);else{var e=c.p.frozenColumns?c.p.id+"_frozen":"";$(c.p.selarrrow).each(function(a,b){var d=c.rows.namedItem(b);$(d).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(b))[c.p.useProp?"prop":"attr"]("checked",!1),e&&($("#"+$.jgrid.jqID(b),"#"+$.jgrid.jqID(e)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(b),"#"+$.jgrid.jqID(e))[c.p.useProp?"prop":"attr"]("checked",!1))}),c.p.selarrrow=[],$(c).jqGrid("setSelection",ja,!0,a)}else $(c).jqGrid("setSelection",ja,!0,a)}).bind("reloadGrid",function(a,b){if(c.p.treeGrid===!0&&(c.p.datatype=c.p.treedatatype),b&&b.current&&c.grid.selectionPreserver(c),"local"==c.p.datatype?($(c).jqGrid("resetSelection"),c.p.data.length&&v()):c.p.treeGrid||(c.p.selrow=null,c.p.multiselect&&(c.p.selarrrow=[],E(!1)),c.p.savedRow=[]),c.p.scroll&&u.call(c,!0,!1),b&&b.page){var d=b.page;d>c.p.lastpage&&(d=c.p.lastpage),1>d&&(d=1),c.p.page=d,c.grid.prevRowHeight?c.grid.bDiv.scrollTop=(d-1)*c.grid.prevRowHeight*c.p.rowNum:c.grid.bDiv.scrollTop=0}return c.grid.prevRowHeight&&c.p.scroll?(delete c.p.lastpage,c.grid.populateVisible()):c.grid.populate(),c.p._inlinenav===!0&&$(c).jqGrid("showAddEditButtons"),!1}).dblclick(function(a){R=a.target,S=$(R,c.rows).closest("tr.jqgrow"),0!==$(S).length&&(ja=S[0].rowIndex,ka=$.jgrid.getCellIndex(R),$(c).triggerHandler("jqGridDblClickRow",[$(S).attr("id"),ja,ka,a]),$.isFunction(this.p.ondblClickRow)&&c.p.ondblClickRow.call(c,$(S).attr("id"),ja,ka,a))}).bind("contextmenu",function(a){R=a.target,S=$(R,c.rows).closest("tr.jqgrow"),0!==$(S).length&&(c.p.multiselect||$(c).jqGrid("setSelection",S[0].id,!0,a),ja=S[0].rowIndex,ka=$.jgrid.getCellIndex(R),$(c).triggerHandler("jqGridRightClickRow",[$(S).attr("id"),ja,ka,a]),$.isFunction(this.p.onRightClickRow)&&c.p.onRightClickRow.call(c,$(S).attr("id"),ja,ka,a))}),d.bDiv=document.createElement("div"),i&&"auto"===String(c.p.height).toLowerCase()&&(c.p.height="100%"),$(d.bDiv).append($('<div style="position:relative;'+(i&&$.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:c.p.height+(isNaN(c.p.height)?"":"px"),width:d.width+"px"}).scroll(d.scrollGrid),$("table:first",d.bDiv).css({width:c.p.tblwidth+"px"}),i?(2==$("tbody",this).length&&$("tbody:gt(0)",this).remove(),c.p.multikey&&$(d.bDiv).bind("selectstart",function(){return!1})):c.p.multikey&&$(d.bDiv).bind("mousedown",function(){return!1}),ha&&$(d.bDiv).hide(),d.cDiv=document.createElement("div");var ma=c.p.hidegrid===!0?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){ma.addClass("ui-state-hover")},function(){ma.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"==f?"left":"right","0px"):"";if($(d.cDiv).append(ma).append("<span class='ui-jqgrid-title"+("rtl"==f?"-rtl":"")+"'>"+c.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),$(d.cDiv).insertBefore(d.hDiv),c.p.toolbar[0]&&(d.uDiv=document.createElement("div"),"top"==c.p.toolbar[1]?$(d.uDiv).insertBefore(d.hDiv):"bottom"==c.p.toolbar[1]&&$(d.uDiv).insertAfter(d.hDiv),"both"==c.p.toolbar[1]?(d.ubDiv=document.createElement("div"),$(d.uDiv).insertBefore(d.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),$(d.ubDiv).insertAfter(d.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),ha&&$(d.ubDiv).hide()):$(d.uDiv).width(d.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),ha&&$(d.uDiv).hide()),c.p.toppager&&(c.p.toppager=$.jgrid.jqID(c.p.id)+"_toppager",d.topDiv=$("<div id='"+c.p.toppager+"'></div>")[0],c.p.toppager="#"+c.p.toppager,$(d.topDiv).insertBefore(d.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(d.width),F(c.p.toppager,"_t")),c.p.footerrow&&(d.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],ia=$("<div class='ui-jqgrid-hbox"+("rtl"==f?"-rtl":"")+"'></div>"),$(d.sDiv).append(ia).insertAfter(d.hDiv).width(d.width),$(ia).append(ca),d.footers=$(".ui-jqgrid-ftable",d.sDiv)[0].rows[0].cells,c.p.rownumbers&&(d.footers[0].className="ui-state-default jqgrid-rownum"),ha&&$(d.sDiv).hide()),ia=null,c.p.caption){var na=c.p.datatype;c.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",d.cDiv).click(function(a){var b,e=$.isFunction(c.p.onHeaderClick),f=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",g=this;return c.p.toolbar[0]===!0&&("both"==c.p.toolbar[1]&&(f+=", #"+$(d.ubDiv).attr("id")),f+=", #"+$(d.uDiv).attr("id")),b=$(f,"#gview_"+$.jgrid.jqID(c.p.id)).length,"visible"==c.p.gridstate?$(f,"#gbox_"+$.jgrid.jqID(c.p.id)).slideUp("fast",function(){b--,0===b&&($("span",g).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),c.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(c.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(c.p.id)).hide(),$(c).triggerHandler("jqGridHeaderClick",[c.p.gridstate,a]),e&&(ha||c.p.onHeaderClick.call(c,c.p.gridstate,a)))}):"hidden"==c.p.gridstate&&$(f,"#gbox_"+$.jgrid.jqID(c.p.id)).slideDown("fast",function(){b--,0===b&&($("span",g).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),ha&&(c.p.datatype=na,D(),ha=!1),c.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(c.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(c.p.id)).show(),$(c).triggerHandler("jqGridHeaderClick",[c.p.gridstate,a]),e&&(ha||c.p.onHeaderClick.call(c,c.p.gridstate,a)))}),!1}),ha&&(c.p.datatype="local",$(".ui-jqgrid-titlebar-close",d.cDiv).trigger("click")))}else $(d.cDiv).hide();$(d.hDiv).after(d.bDiv).mousemove(function(a){return d.resizing?(d.dragMove(a),!1):void 0}),$(".ui-jqgrid-labels",d.hDiv).bind("selectstart",function(){return!1}),$(document).mouseup(function(){return d.resizing?(d.dragEnd(),!1):!0}),c.formatCol=m,c.sortData=G,c.updatepager=A,c.refreshIndex=v,c.setHeadCheckBox=E,c.constructTr=w,c.formatter=function(a,b,c,d,e){return o(a,b,c,d,e)},$.extend(d,{populate:D,emptyRows:u}),this.grid=d,c.addXmlData=function(a){x(a,c.grid.bDiv)},c.addJSONData=function(a){y(a,c.grid.bDiv)},this.grid.cols=this.rows[0].cells,D(),c.p.hiddengrid=!1}})},$.jgrid.extend({getGridParam:function(a){var b=this[0];if(b&&b.grid)return a?"undefined"!=typeof b.p[a]?b.p[a]:null:b.p},setGridParam:function(a){return this.each(function(){this.grid&&"object"==typeof a&&$.extend(!0,this.p,a)})},getDataIDs:function(){var a,b=[],c=0,d=0;return this.each(function(){if(a=this.rows.length,a&&a>0)for(;a>c;)$(this.rows[c]).hasClass("jqgrow")&&(b[d]=this.rows[c].id,d++),c++}),b},setSelection:function(a,b,c){return this.each(function(){function d(a){var b=$(k.grid.bDiv)[0].clientHeight,c=$(k.grid.bDiv)[0].scrollTop,d=$(k.rows[a]).position().top,e=k.rows[a].clientHeight;d+e>=b+c?$(k.grid.bDiv)[0].scrollTop=d-(b+c)+e+c:b+c>d&&c>d&&($(k.grid.bDiv)[0].scrollTop=d)}var e,f,g,h,i,j,k=this;void 0!==a&&(b=b===!1?!1:!0,f=k.rows.namedItem(a+""),!f||!f.className||f.className.indexOf("ui-state-disabled")>-1||(k.p.scrollrows===!0&&(g=k.rows.namedItem(a).rowIndex,g>=0&&d(g)),k.p.frozenColumns===!0&&(j=k.p.id+"_frozen"),k.p.multiselect?(k.setHeadCheckBox(!1),k.p.selrow=f.id,h=$.inArray(k.p.selrow,k.p.selarrrow),-1===h?("ui-subgrid"!==f.className&&$(f).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,k.p.selarrrow.push(k.p.selrow)):("ui-subgrid"!==f.className&&$(f).removeClass("ui-state-highlight").attr("aria-selected","false"),
e=!1,k.p.selarrrow.splice(h,1),i=k.p.selarrrow[0],k.p.selrow=void 0===i?null:i),$("#jqg_"+$.jgrid.jqID(k.p.id)+"_"+$.jgrid.jqID(f.id))[k.p.useProp?"prop":"attr"]("checked",e),j&&(-1===h?$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).addClass("ui-state-highlight"):$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(k.p.id)+"_"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j))[k.p.useProp?"prop":"attr"]("checked",e)),$(k).triggerHandler("jqGridSelectRow",[f.id,e,c]),k.p.onSelectRow&&b&&k.p.onSelectRow.call(k,f.id,e,c)):"ui-subgrid"!==f.className&&(k.p.selrow!=f.id?($(k.rows.namedItem(k.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(f).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),j&&($("#"+$.jgrid.jqID(k.p.selrow),"#"+$.jgrid.jqID(j)).removeClass("ui-state-highlight"),$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(j)).addClass("ui-state-highlight")),e=!0):e=!1,k.p.selrow=f.id,$(k).triggerHandler("jqGridSelectRow",[f.id,e,c]),k.p.onSelectRow&&b&&k.p.onSelectRow.call(k,f.id,e,c))))})},resetSelection:function(a){return this.each(function(){var b,c,d,e=this;e.p.frozenColumns===!0&&(d=e.p.id+"_frozen"),"undefined"!=typeof a?(c=a===e.p.selrow?e.p.selrow:a,$("#"+$.jgrid.jqID(e.p.id)+" tbody:first tr#"+$.jgrid.jqID(c)).removeClass("ui-state-highlight").attr("aria-selected","false"),d&&$("#"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight"),e.p.multiselect&&($("#jqg_"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(e.p.id))[e.p.useProp?"prop":"attr"]("checked",!1),d&&$("#jqg_"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d))[e.p.useProp?"prop":"attr"]("checked",!1),e.setHeadCheckBox(!1)),c=null):e.p.multiselect?($(e.p.selarrrow).each(function(a,c){b=e.rows.namedItem(c),$(b).removeClass("ui-state-highlight").attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(c))[e.p.useProp?"prop":"attr"]("checked",!1),d&&($("#"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(e.p.id)+"_"+$.jgrid.jqID(c),"#"+$.jgrid.jqID(d))[e.p.useProp?"prop":"attr"]("checked",!1))}),e.setHeadCheckBox(!1),e.p.selarrrow=[]):e.p.selrow&&($("#"+$.jgrid.jqID(e.p.id)+" tbody:first tr#"+$.jgrid.jqID(e.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),d&&$("#"+$.jgrid.jqID(e.p.selrow),"#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight"),e.p.selrow=null),e.p.cellEdit===!0&&parseInt(e.p.iCol,10)>=0&&parseInt(e.p.iRow,10)>=0&&($("td:eq("+e.p.iCol+")",e.rows[e.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(e.rows[e.p.iRow]).removeClass("selected-row ui-state-hover")),e.p.savedRow=[]})},getRowData:function(a){var b,c,d={},e=!1,f=0;return this.each(function(){var g,h,i=this;if("undefined"==typeof a)e=!0,b=[],c=i.rows.length;else{if(h=i.rows.namedItem(a),!h)return d;c=2}for(;c>f;)e&&(h=i.rows[f]),$(h).hasClass("jqgrow")&&($('td[role="gridcell"]',h).each(function(a){if(g=i.p.colModel[a].name,"cb"!==g&&"subgrid"!==g&&"rn"!==g)if(i.p.treeGrid===!0&&g==i.p.ExpandColumn)d[g]=$.jgrid.htmlDecode($("span:first",this).html());else try{d[g]=$.unformat.call(i,this,{rowId:h.id,colModel:i.p.colModel[a]},a)}catch(b){d[g]=$.jgrid.htmlDecode($(this).html())}}),e&&(b.push(d),d={})),f++}),b?b:d},delRowData:function(a){var b,c,d,e=!1;return this.each(function(){var f=this;if(b=f.rows.namedItem(a),!b)return!1;if(d=b.rowIndex,$(b).remove(),f.p.records--,f.p.reccount--,f.updatepager(!0,!1),e=!0,f.p.multiselect&&(c=$.inArray(a,f.p.selarrrow),-1!=c&&f.p.selarrrow.splice(c,1)),a==f.p.selrow&&(f.p.selrow=null),"local"==f.p.datatype){var g=$.jgrid.stripPref(f.p.idPrefix,a),h=f.p._index[g];"undefined"!=typeof h&&(f.p.data.splice(h,1),f.refreshIndex())}if(f.p.altRows===!0&&e){var i=f.p.altclass;$(f.rows).each(function(a){a%2==1?$(this).addClass(i):$(this).removeClass(i)})}}),e},setRowData:function(a,b,c){var d,e,f=!0;return this.each(function(){if(!this.grid)return!1;var g,h,i=this,j=typeof c,k={};if(h=i.rows.namedItem(a),!h)return!1;if(b)try{if($(this.p.colModel).each(function(c){d=this.name,void 0!==b[d]&&(k[d]=this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?$.unformat.date.call(i,b[d],this):b[d],g=i.formatter(a,b[d],c,b,"edit"),e=this.title?{title:$.jgrid.stripHtml(g)}:{},i.p.treeGrid===!0&&d==i.p.ExpandColumn?$("td[role='gridcell']:eq("+c+") > span:first",h).html(g).attr(e):$("td[role='gridcell']:eq("+c+")",h).html(g).attr(e))}),"local"==i.p.datatype){var l=$.jgrid.stripPref(i.p.idPrefix,a),m=i.p._index[l];if(i.p.treeGrid)for(var n in i.p.treeReader)k.hasOwnProperty(i.p.treeReader[n])&&delete k[i.p.treeReader[n]];"undefined"!=typeof m&&(i.p.data[m]=$.extend(!0,i.p.data[m],k)),k=null}}catch(o){f=!1}f&&("string"===j?$(h).addClass(c):"object"===j&&$(h).css(c),$(i).triggerHandler("jqGridAfterGridComplete"))}),f},addRowData:function(a,b,c,d){c||(c="last");var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=!1,t="";return b&&($.isArray(b)?(m=!0,c="last",n=a):(b=[b],m=!1),this.each(function(){var u=this,v=b.length;i=u.p.rownumbers===!0?1:0,g=u.p.multiselect===!0?1:0,h=u.p.subGrid===!0?1:0,m||("undefined"!=typeof a?a+="":(a=$.jgrid.randId(),u.p.keyIndex!==!1&&(n=u.p.colModel[u.p.keyIndex+g+h+i].name,"undefined"!=typeof b[0][n]&&(a=b[0][n])))),o=u.p.altclass;for(var w=0,x="",y={},z=$.isFunction(u.p.afterInsertRow)?!0:!1;v>w;){if(p=b[w],f=[],m){try{a=p[n]}catch(A){a=$.jgrid.randId()}x=u.p.altRows===!0&&(u.rows.length-1)%2===0?o:""}for(r=a,a=u.p.idPrefix+a,i&&(t=u.formatCol(0,1,"",null,a,!0),f[f.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+t+">0</td>"),g&&(l='<input role="checkbox" type="checkbox" id="jqg_'+u.p.id+"_"+a+'" class="cbox"/>',t=u.formatCol(i,1,"",null,a,!0),f[f.length]='<td role="gridcell" '+t+">"+l+"</td>"),h&&(f[f.length]=$(u).jqGrid("addSubGridCell",g+i,1)),k=g+h+i;k<u.p.colModel.length;k++)q=u.p.colModel[k],e=q.name,y[e]=p[e],l=u.formatter(a,$.jgrid.getAccessor(p,e),k,p),t=u.formatCol(k,1,l,p,a,y),f[f.length]='<td role="gridcell" '+t+">"+l+"</td>";if(f.unshift(u.constructTr(a,!1,x,y,p,!1)),f[f.length]="</tr>",0===u.rows.length)$("table:first",u.grid.bDiv).append(f.join(""));else switch(c){case"last":$(u.rows[u.rows.length-1]).after(f.join("")),j=u.rows.length-1;break;case"first":$(u.rows[0]).after(f.join("")),j=1;break;case"after":j=u.rows.namedItem(d),j&&($(u.rows[j.rowIndex+1]).hasClass("ui-subgrid")?$(u.rows[j.rowIndex+1]).after(f):$(j).after(f.join(""))),j++;break;case"before":j=u.rows.namedItem(d),j&&($(j).before(f.join("")),j=j.rowIndex),j--}u.p.subGrid===!0&&$(u).jqGrid("addSubGrid",g+i,j),u.p.records++,u.p.reccount++,$(u).triggerHandler("jqGridAfterInsertRow",[a,p,p]),z&&u.p.afterInsertRow.call(u,a,p,p),w++,"local"==u.p.datatype&&(y[u.p.localReader.id]=r,u.p._index[r]=u.p.data.length,u.p.data.push(y),y={})}u.p.altRows!==!0||m||("last"==c?(u.rows.length-1)%2==1&&$(u.rows[u.rows.length-1]).addClass(o):$(u.rows).each(function(a){a%2==1?$(this).addClass(o):$(this).removeClass(o)})),u.updatepager(!0,!0),s=!0})),s},footerData:function(a,b,c){function d(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var e,f,g=!1,h={};return"undefined"==typeof a&&(a="get"),"boolean"!=typeof c&&(c=!0),a=a.toLowerCase(),this.each(function(){var i,j=this;return j.grid&&j.p.footerrow?"set"==a&&d(b)?!1:(g=!0,void $(this.p.colModel).each(function(d){e=this.name,"set"==a?void 0!==b[e]&&(i=c?j.formatter("",b[e],d,b,"edit"):b[e],f=this.title?{title:$.jgrid.stripHtml(i)}:{},$("tr.footrow td:eq("+d+")",j.grid.sDiv).html(i).attr(f),g=!0):"get"==a&&(h[e]=$("tr.footrow td:eq("+d+")",j.grid.sDiv).html())})):!1}),"get"==a?h:g},showHideCol:function(a,b){return this.each(function(){var c,d=this,e=!1,f=$.jgrid.cellWidth()?0:d.p.cellLayout;if(d.grid){"string"==typeof a&&(a=[a]),b="none"!=b?"":"none";var g=""===b?!0:!1,h=d.p.groupHeader&&("object"==typeof d.p.groupHeader||$.isFunction(d.p.groupHeader));h&&$(d).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(h){if(-1!==$.inArray(this.name,a)&&this.hidden===g){if(d.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr",d.grid.hDiv).each(function(){$(this.cells[h]).css("display",b)}),$(d.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[h]).css("display",b)}),d.p.footerrow&&$("tr.footrow td:eq("+h+")",d.grid.sDiv).css("display",b),c=parseInt(this.width,10),"none"===b?d.p.tblwidth-=c+f:d.p.tblwidth+=c+f,this.hidden=!g,e=!0,$(d).triggerHandler("jqGridShowHideCol",[g,this.name,h])}}),e===!0&&(d.p.shrinkToFit!==!0||isNaN(d.p.height)||(d.p.tblwidth+=parseInt(d.p.scrollOffset,10)),$(d).jqGrid("setGridWidth",d.p.shrinkToFit===!0?d.p.tblwidth:d.p.width)),h&&$(d).jqGrid("setGroupHeaders",d.p.groupHeader)}})},hideCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"none")})},showCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"")})},remapColumns:function(a,b,c){function d(b){var c;c=b.length?$.makeArray(b):$.extend({},b),$.each(a,function(a){b[a]=c[this]})}function e(b,c){$(">tr"+(c||""),b).each(function(){var b=this,c=$.makeArray(b.cells);$.each(a,function(){var a=c[this];a&&b.appendChild(a)})})}var f=this.get(0);d(f.p.colModel),d(f.p.colNames),d(f.grid.headers),e($("thead:first",f.grid.hDiv),c&&":not(.ui-jqgrid-labels)"),b&&e($("#"+$.jgrid.jqID(f.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),f.p.footerrow&&e($("tbody:first",f.grid.sDiv)),f.p.remapColumns&&(f.p.remapColumns.length?d(f.p.remapColumns):f.p.remapColumns=$.makeArray(a)),f.p.lastsort=$.inArray(f.p.lastsort,a),f.p.treeGrid&&(f.p.expColInd=$.inArray(f.p.expColInd,a)),$(f).triggerHandler("jqGridRemapColumns",[a,b,c])},setGridWidth:function(a,b){return this.each(function(){if(this.grid){var c,d,e,f,g=this,h=0,i=$.jgrid.cellWidth()?0:g.p.cellLayout,j=0,k=!1,l=g.p.scrollOffset,m=0,n=0;if("boolean"!=typeof b&&(b=g.p.shrinkToFit),!isNaN(a)){if(a=parseInt(a,10),g.grid.width=g.p.width=a,$("#gbox_"+$.jgrid.jqID(g.p.id)).css("width",a+"px"),$("#gview_"+$.jgrid.jqID(g.p.id)).css("width",a+"px"),$(g.grid.bDiv).css("width",a+"px"),$(g.grid.hDiv).css("width",a+"px"),g.p.pager&&$(g.p.pager).css("width",a+"px"),g.p.toppager&&$(g.p.toppager).css("width",a+"px"),g.p.toolbar[0]===!0&&($(g.grid.uDiv).css("width",a+"px"),"both"==g.p.toolbar[1]&&$(g.grid.ubDiv).css("width",a+"px")),g.p.footerrow&&$(g.grid.sDiv).css("width",a+"px"),b===!1&&g.p.forceFit===!0&&(g.p.forceFit=!1),b===!0){if($.each(g.p.colModel,function(){this.hidden===!1&&(c=this.widthOrg,h+=c+i,this.fixed?m+=c+i:j++,n++)}),0===j)return;g.p.tblwidth=h,e=a-i*j-m,isNaN(g.p.height)||($(g.grid.bDiv)[0].clientHeight<$(g.grid.bDiv)[0].scrollHeight||1===g.rows.length)&&(k=!0,e-=l),h=0;var o=g.grid.cols.length>0;if($.each(g.p.colModel,function(a){if(this.hidden===!1&&!this.fixed){if(c=this.widthOrg,c=Math.round(e*c/(g.p.tblwidth-i*j-m)),0>c)return;this.width=c,h+=c,g.grid.headers[a].width=c,g.grid.headers[a].el.style.width=c+"px",g.p.footerrow&&(g.grid.footers[a].style.width=c+"px"),o&&(g.grid.cols[a].style.width=c+"px"),d=a}}),!d)return;if(f=0,k?a-m-(h+i*j)!==l&&(f=a-m-(h+i*j)-l):1!==Math.abs(a-m-(h+i*j))&&(f=a-m-(h+i*j)),g.p.colModel[d].width+=f,g.p.tblwidth=h+f+i*j+m,g.p.tblwidth>a){var p=g.p.tblwidth-parseInt(a,10);g.p.tblwidth=a,c=g.p.colModel[d].width=g.p.colModel[d].width-p}else c=g.p.colModel[d].width;g.grid.headers[d].width=c,g.grid.headers[d].el.style.width=c+"px",o&&(g.grid.cols[d].style.width=c+"px"),g.p.footerrow&&(g.grid.footers[d].style.width=c+"px")}g.p.tblwidth&&($("table:first",g.grid.bDiv).css("width",g.p.tblwidth+"px"),$("table:first",g.grid.hDiv).css("width",g.p.tblwidth+"px"),g.grid.hDiv.scrollLeft=g.grid.bDiv.scrollLeft,g.p.footerrow&&$("table:first",g.grid.sDiv).css("width",g.p.tblwidth+"px"))}}})},setGridHeight:function(a){return this.each(function(){var b=this;if(b.grid){var c=$(b.grid.bDiv);c.css({height:a+(isNaN(a)?"":"px")}),b.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(b.p.id)+"_frozen").parent().height(c.height()-16),b.p.height=a,b.p.scroll&&b.grid.populateVisible()}})},setCaption:function(a){return this.each(function(){this.p.caption=a,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(a),$(this.grid.cDiv).show()})},setLabel:function(a,b,c,d){return this.each(function(){var e=this,f=-1;if(e.grid&&"undefined"!=typeof a&&($(e.p.colModel).each(function(b){return this.name==a?(f=b,!1):void 0}),f>=0)){var g=$("tr.ui-jqgrid-labels th:eq("+f+")",e.grid.hDiv);if(b){var h=$(".s-ico",g);$("[id^=jqgh_]",g).empty().html(b).append(h),e.p.colNames[f]=b}c&&("string"==typeof c?$(g).addClass(c):$(g).css(c)),"object"==typeof d&&$(g).attr(d)}})},setCell:function(a,b,c,d,e,f){return this.each(function(){var g,h,i=this,j=-1;if(i.grid&&(isNaN(b)?$(i.p.colModel).each(function(a){return this.name==b?(j=a,!1):void 0}):j=parseInt(b,10),j>=0)){var k=i.rows.namedItem(a);if(k){var l=$("td:eq("+j+")",k);if((""!==c||f===!0)&&(g=i.formatter(a,c,j,k,"edit"),h=i.p.colModel[j].title?{title:$.jgrid.stripHtml(g)}:{},i.p.treeGrid&&$(".tree-wrap",$(l)).length>0?$("span",$(l)).html(g).attr(h):$(l).html(g).attr(h),"local"==i.p.datatype)){var m,n=i.p.colModel[j];c=n.formatter&&"string"==typeof n.formatter&&"date"==n.formatter?$.unformat.date.call(i,c,n):c,m=i.p._index[a],"undefined"!=typeof m&&(i.p.data[m][n.name]=c)}"string"==typeof d?$(l).addClass(d):d&&$(l).css(d),"object"==typeof e&&$(l).attr(e)}}})},getCell:function(a,b){var c=!1;return this.each(function(){var d=this,e=-1;if(d.grid&&(isNaN(b)?$(d.p.colModel).each(function(a){return this.name===b?(e=a,!1):void 0}):e=parseInt(b,10),e>=0)){var f=d.rows.namedItem(a);if(f)try{c=$.unformat.call(d,$("td:eq("+e+")",f),{rowId:f.id,colModel:d.p.colModel[e]},e)}catch(g){c=$.jgrid.htmlDecode($("td:eq("+e+")",f).html())}}}),c},getCol:function(a,b,c){var d,e,f,g,h=[],i=0;return b="boolean"!=typeof b?!1:b,"undefined"==typeof c&&(c=!1),this.each(function(){var j=this,k=-1;if(j.grid&&(isNaN(a)?$(j.p.colModel).each(function(b){return this.name===a?(k=b,!1):void 0}):k=parseInt(a,10),k>=0)){var l=j.rows.length,m=0;if(l&&l>0){for(;l>m;){if($(j.rows[m]).hasClass("jqgrow")){try{d=$.unformat.call(j,$(j.rows[m].cells[k]),{rowId:j.rows[m].id,colModel:j.p.colModel[k]},k)}catch(n){d=$.jgrid.htmlDecode(j.rows[m].cells[k].innerHTML)}c?(g=parseFloat(d),i+=g,void 0===f&&(f=e=g),e=Math.min(e,g),f=Math.max(f,g)):b?h.push({id:j.rows[m].id,value:d}):h.push(d)}m++}if(c)switch(c.toLowerCase()){case"sum":h=i;break;case"avg":h=i/l;break;case"count":h=l;break;case"min":h=e;break;case"max":h=f}}}}),h},clearGridData:function(a){return this.each(function(){var b=this;if(b.grid){if("boolean"!=typeof a&&(a=!1),b.p.deepempty)$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr:gt(0)").remove();else{var c=$("#"+$.jgrid.jqID(b.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(b.p.id)+" tbody:first").empty().append(c)}b.p.footerrow&&a&&$(".ui-jqgrid-ftable td",b.grid.sDiv).html("&#160;"),b.p.selrow=null,b.p.selarrrow=[],b.p.savedRow=[],b.p.records=0,b.p.page=1,b.p.lastpage=0,b.p.reccount=0,b.p.data=[],b.p._index={},b.updatepager(!0,!1)}})},getInd:function(a,b){var c,d=!1;return this.each(function(){c=this.rows.namedItem(a),c&&(d=b===!0?c:c.rowIndex)}),d},bindKeys:function(a){var b=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},a||{});return this.each(function(){var a=this;$("body").is("[role]")||$("body").attr("role","application"),a.p.scrollrows=b.scrollingRows,$(a).keydown(function(c){var d,e,f,g=$(a).find("tr[tabindex=0]")[0],h=a.p.treeReader.expanded_field;if(g)if(f=a.p._index[g.id],37===c.keyCode||38===c.keyCode||39===c.keyCode||40===c.keyCode){if(38===c.keyCode){if(e=g.previousSibling,d="",e)if($(e).is(":hidden")){for(;e;)if(e=e.previousSibling,!$(e).is(":hidden")&&$(e).hasClass("jqgrow")){d=e.id;break}}else d=e.id;$(a).jqGrid("setSelection",d,!0,c),c.preventDefault()}if(40===c.keyCode){if(e=g.nextSibling,d="",e)if($(e).is(":hidden")){for(;e;)if(e=e.nextSibling,!$(e).is(":hidden")&&$(e).hasClass("jqgrow")){d=e.id;break}}else d=e.id;$(a).jqGrid("setSelection",d,!0,c),c.preventDefault()}37===c.keyCode&&(a.p.treeGrid&&a.p.data[f][h]&&$(g).find("div.treeclick").trigger("click"),$(a).triggerHandler("jqGridKeyLeft",[a.p.selrow]),$.isFunction(b.onLeftKey)&&b.onLeftKey.call(a,a.p.selrow)),39===c.keyCode&&(a.p.treeGrid&&!a.p.data[f][h]&&$(g).find("div.treeclick").trigger("click"),$(a).triggerHandler("jqGridKeyRight",[a.p.selrow]),$.isFunction(b.onRightKey)&&b.onRightKey.call(a,a.p.selrow))}else 13===c.keyCode?($(a).triggerHandler("jqGridKeyEnter",[a.p.selrow]),$.isFunction(b.onEnter)&&b.onEnter.call(a,a.p.selrow)):32===c.keyCode&&($(a).triggerHandler("jqGridKeySpace",[a.p.selrow]),$.isFunction(b.onSpace)&&b.onSpace.call(a,a.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(a){var b,c=!1;return this.each(function(){"undefined"!=typeof a&&(b=this.p._index[a],b>=0&&(c=this.p.data[b]))}),c}})}(jQuery),function($){"use strict";$.jgrid.extend({getColProp:function(a){var b={},c=this[0];if(!c.grid)return!1;for(var d=c.p.colModel,e=0;e<d.length;e++)if(d[e].name==a){b=d[e];break}return b},setColProp:function(a,b){return this.each(function(){if(this.grid&&b)for(var c=this.p.colModel,d=0;d<c.length;d++)if(c[d].name==a){$.extend(this.p.colModel[d],b);break}})},sortGrid:function(a,b,c){return this.each(function(){var d=this,e=-1;if(d.grid){a||(a=d.p.sortname);for(var f=0;f<d.p.colModel.length;f++)if(d.p.colModel[f].index==a||d.p.colModel[f].name==a){e=f;break}if(-1!=e){var g=d.p.colModel[e].sortable;"boolean"!=typeof g&&(g=!0),"boolean"!=typeof b&&(b=!1),g&&d.sortData("jqgh_"+d.p.id+"_"+a,e,b,c)}}})},clearBeforeUnload:function(){return this.each(function(){var a=this.grid;a.emptyRows.call(this,!0,!0),$(a.hDiv).unbind("mousemove"),$(this).unbind(),a.dragEnd=null,a.dragMove=null,a.dragStart=null,a.emptyRows=null,a.populate=null,a.populateVisible=null,a.scrollGrid=null,a.selectionPreserver=null,a.bDiv=null,a.cDiv=null,a.hDiv=null,a.cols=null;var b,c=a.headers.length;for(b=0;c>b;b++)a.headers[b].el=null;this.formatCol=null,this.sortData=null,this.updatepager=null,this.refreshIndex=null,this.setHeadCheckBox=null,this.constructTr=null,this.formatter=null,this.addXmlData=null,this.addJSONData=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&$(this.p.pager).remove();try{$(this).jqGrid("clearBeforeUnload"),$("#gbox_"+$.jgrid.jqID(this.id)).remove()}catch(_){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var a={id:$(this).attr("id"),cl:$(this).attr("class")};this.p.pager&&$(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var b=document.createElement("table");$(b).attr({id:a.id}),b.className=a.cl;var c=$.jgrid.jqID(this.id);$(b).removeClass("ui-jqgrid-btable"),1===$(this.p.pager).parents("#gbox_"+c).length?($(b).insertBefore("#gbox_"+c).show(),$(this.p.pager).insertBefore("#gbox_"+c)):$(b).insertBefore("#gbox_"+c).show(),$(this).jqGrid("clearBeforeUnload"),$("#gbox_"+c).remove()}})},setGridState:function(a){return this.each(function(){if(this.grid){var b=this;"hidden"==a?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(b.p.id)).slideUp("fast"),b.p.pager&&$(b.p.pager).slideUp("fast"),b.p.toppager&&$(b.p.toppager).slideUp("fast"),b.p.toolbar[0]===!0&&("both"==b.p.toolbar[1]&&$(b.grid.ubDiv).slideUp("fast"),$(b.grid.uDiv).slideUp("fast")),b.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(b.p.id)).slideUp("fast"),$(".ui-jqgrid-titlebar-close span",b.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),b.p.gridstate="hidden"):"visible"==a&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(b.p.id)).slideDown("fast"),b.p.pager&&$(b.p.pager).slideDown("fast"),b.p.toppager&&$(b.p.toppager).slideDown("fast"),b.p.toolbar[0]===!0&&("both"==b.p.toolbar[1]&&$(b.grid.ubDiv).slideDown("fast"),$(b.grid.uDiv).slideDown("fast")),b.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(b.p.id)).slideDown("fast"),$(".ui-jqgrid-titlebar-close span",b.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),b.p.gridstate="visible")}})},filterToolbar:function(a){return a=$.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},a||{}),this.each(function(){function b(a,b){var c=$(a);c[0]&&jQuery.each(b,function(){void 0!==this.data?c.bind(this.type,this.data,this.fn):c.bind(this.type,this.fn)})}var c=this;if(!this.ftoolbar){var d,e=function(){var b,d,e,f={},g=0,h={};$.each(c.p.colModel,function(){if(d=this.index||this.name,e=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"==this.stype?"eq":a.defaultSearch,b=$("#gs_"+$.jgrid.jqID(this.name),this.frozen===!0&&c.p.frozenColumns===!0?c.grid.fhDiv:c.grid.hDiv).val())f[d]=b,h[d]=e,g++;else try{delete c.p.postData[d]}catch(i){}});var i=g>0?!0:!1;if(a.stringResult===!0||"local"==c.p.datatype){var j='{"groupOp":"'+a.groupOp+'","rules":[',k=0;$.each(f,function(a,b){k>0&&(j+=","),j+='{"field":"'+a+'",',j+='"op":"'+h[a]+'",',b+="",j+='"data":"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',k++}),j+="]}",$.extend(c.p.postData,{filters:j}),$.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else $.extend(c.p.postData,f);var l;c.p.searchurl&&(l=c.p.url,$(c).jqGrid("setGridParam",{url:c.p.searchurl}));var m="stop"===$(c).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!m&&$.isFunction(a.beforeSearch)&&(m=a.beforeSearch.call(c)),m||$(c).jqGrid("setGridParam",{search:i}).trigger("reloadGrid",[{page:1}]),l&&$(c).jqGrid("setGridParam",{url:l}),$(c).triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(a.afterSearch)&&a.afterSearch.call(c)},f=function(b){var d,e={},f=0;b="boolean"!=typeof b?!0:b,$.each(c.p.colModel,function(){var a;switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(a=this.searchoptions.defaultValue),d=this.index||this.name,this.stype){case"select":if($("#gs_"+$.jgrid.jqID(this.name)+" option",this.frozen===!0&&c.p.frozenColumns===!0?c.grid.fhDiv:c.grid.hDiv).each(function(b){return 0===b&&(this.selected=!0),$(this).val()==a?(this.selected=!0,!1):void 0}),void 0!==a)e[d]=a,f++;else try{delete c.p.postData[d]}catch(b){}break;case"text":if($("#gs_"+$.jgrid.jqID(this.name),this.frozen===!0&&c.p.frozenColumns===!0?c.grid.fhDiv:c.grid.hDiv).val(a),void 0!==a)e[d]=a,f++;else try{delete c.p.postData[d]}catch(g){}}});var g=f>0?!0:!1;if(a.stringResult===!0||"local"==c.p.datatype){var h='{"groupOp":"'+a.groupOp+'","rules":[',i=0;$.each(e,function(a,b){i>0&&(h+=","),h+='{"field":"'+a+'",',h+='"op":"eq",',b+="",h+='"data":"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',i++}),h+="]}",$.extend(c.p.postData,{filters:h}),$.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else $.extend(c.p.postData,e);var j;c.p.searchurl&&(j=c.p.url,$(c).jqGrid("setGridParam",{url:c.p.searchurl}));var k="stop"===$(c).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!k&&$.isFunction(a.beforeClear)&&(k=a.beforeClear.call(c)),k||b&&$(c).jqGrid("setGridParam",{search:g}).trigger("reloadGrid",[{page:1}]),j&&$(c).jqGrid("setGridParam",{url:j}),$(c).triggerHandler("jqGridToolbarAfterClear"),$.isFunction(a.afterClear)&&a.afterClear()},g=function(){var a=$("tr.ui-search-toolbar",c.grid.hDiv),b=c.p.frozenColumns===!0?$("tr.ui-search-toolbar",c.grid.fhDiv):!1;"none"==a.css("display")?(a.show(),b&&b.show()):(a.hide(),b&&b.hide())},h=$("<tr class='ui-search-toolbar' role='rowheader'></tr>");$.each(c.p.colModel,function(){var f,g,i,j,k,l=this;if(g=$("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+c.p.direction+"'></th>"),f=$("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>"),this.hidden===!0&&$(g).css("display","none"),this.search=this.search===!1?!1:!0,"undefined"==typeof this.stype&&(this.stype="text"),i=$.extend({},this.searchoptions||{}),this.search)switch(this.stype){case"select":if(j=this.surl||i.dataUrl)k=f,$.ajax($.extend({url:j,dataType:"html",success:function(c){if(void 0!==i.buildSelect){var d=i.buildSelect(c);d&&$(k).append(d)}else $(k).append(c);void 0!==i.defaultValue&&$("select",k).val(i.defaultValue),$("select",k).attr({name:l.index||l.name,id:"gs_"+l.name}),i.attr&&$("select",k).attr(i.attr),$("select",k).css({width:"100%"}),void 0!==i.dataInit&&i.dataInit($("select",k)[0]),void 0!==i.dataEvents&&b($("select",k)[0],i.dataEvents),a.autosearch===!0&&$("select",k).change(function(){return e(),!1}),c=null}},$.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{}));else{var m,n,o;if(l.searchoptions?(m=void 0===l.searchoptions.value?"":l.searchoptions.value,n=void 0===l.searchoptions.separator?":":l.searchoptions.separator,o=void 0===l.searchoptions.delimiter?";":l.searchoptions.delimiter):l.editoptions&&(m=void 0===l.editoptions.value?"":l.editoptions.value,n=void 0===l.editoptions.separator?":":l.editoptions.separator,o=void 0===l.editoptions.delimiter?";":l.editoptions.delimiter),m){var p=document.createElement("select");p.style.width="100%",$(p).attr({name:l.index||l.name,id:"gs_"+l.name});var q,r,s;if("string"==typeof m){q=m.split(o);for(var t=0;t<q.length;t++)r=q[t].split(n),s=document.createElement("option"),s.value=r[0],s.innerHTML=r[1],p.appendChild(s)}else if("object"==typeof m)for(var u in m)m.hasOwnProperty(u)&&(s=document.createElement("option"),s.value=u,s.innerHTML=m[u],p.appendChild(s));void 0!==i.defaultValue&&$(p).val(i.defaultValue),i.attr&&$(p).attr(i.attr),void 0!==i.dataInit&&i.dataInit(p),void 0!==i.dataEvents&&b(p,i.dataEvents),$(f).append(p),a.autosearch===!0&&$(p).change(function(){return e(),!1})}}break;case"text":var v=void 0!==i.defaultValue?i.defaultValue:"";$(f).append("<input type='text' style='width:95%;padding:0px;' name='"+(l.index||l.name)+"' id='gs_"+l.name+"' value='"+v+"'/>"),i.attr&&$("input",f).attr(i.attr),void 0!==i.dataInit&&i.dataInit($("input",f)[0]),void 0!==i.dataEvents&&b($("input",f)[0],i.dataEvents),a.autosearch===!0&&(a.searchOnEnter?$("input",f).keypress(function(a){var b=a.charCode?a.charCode:a.keyCode?a.keyCode:0;return 13==b?(e(),!1):this}):$("input",f).keydown(function(a){var b=a.which;switch(b){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:d&&clearTimeout(d),d=setTimeout(function(){e()},500)}}))}$(g).append(f),$(h).append(g)}),$("table thead",c.grid.hDiv).append(h),this.ftoolbar=!0,this.triggerToolbar=e,this.clearToolbar=f,this.toggleToolbar=g}})},destroyGroupHeader:function(a){return"undefined"==typeof a&&(a=!0),this.each(function(){var b,c,d,e,f,g,h,i=this,j=i.grid,k=$("table.ui-jqgrid-htable thead",j.hDiv),l=i.p.colModel;if(j){for($(this).unbind(".setGroupHeaders"),b=$("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),e=j.headers,c=0,d=e.length;d>c;c++){h=l[c].hidden?"none":"",f=$(e[c].el).width(e[c].width).css("display",h);try{f.removeAttr("rowSpan")}catch(m){f.attr("rowSpan",1)}b.append(f),g=f.children("span.ui-jqgrid-resize"),g.length>0&&(g[0].style.height=""),f.children("div")[0].style.top=""}$(k).children("tr.ui-jqgrid-labels").remove(),$(k).prepend(b),a===!0&&$(i).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(a){return a=$.extend({useColSpanStyle:!1,groupHeaders:[]},a||{}),this.each(function(){this.p.groupHeader=a;var b,c,d,e,f,g,h,i,j,k,l,m,n,o=this,p=0,q=o.p.colModel,r=q.length,s=o.grid.headers,t=$("table.ui-jqgrid-htable",o.grid.hDiv),u=t.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),v=t.children("thead"),w=t.find(".jqg-first-row-header");void 0===w[0]?w=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):w.empty();var x,y=function(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c].startColumnName===a)return c;return-1};for($(o).prepend(v),d=$("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header"),b=0;r>b;b++)if(f=s[b].el,g=$(f),c=q[b],h={height:"0px",width:s[b].width+"px",display:c.hidden?"none":""},$("<th>",{role:"gridcell"}).css(h).addClass("ui-first-th-"+o.p.direction).appendTo(w),f.style.width="",i=y(c.name,a.groupHeaders),i>=0){for(j=a.groupHeaders[i],k=j.numberOfColumns,l=j.titleText,m=0,i=0;k>i&&r>b+i;i++)q[b+i].hidden||m++;e=$("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+o.p.direction).css({height:"22px","border-top":"0px none"}).html(l),m>0&&e.attr("colspan",String(m)),o.p.headertitles&&e.attr("title",e.text()),0===m&&e.hide(),g.before(e),d.append(f),p=k-1}else 0===p?a.useColSpanStyle?g.attr("rowspan","2"):($("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+o.p.direction).css({display:c.hidden?"none":"","border-top":"0px none"}).insertBefore(g),d.append(f)):(d.append(f),p--);n=$(o).children("thead"),n.prepend(w),d.insertAfter(u),t.append(n),a.useColSpanStyle&&(t.find("span.ui-jqgrid-resize").each(function(){var a=$(this).parent();a.is(":visible")&&(this.style.cssText="height: "+a.height()+"px !important; cursor: col-resize;")}),t.find("div.ui-jqgrid-sortable").each(function(){var a=$(this),b=a.parent();b.is(":visible")&&b.is(":has(span.ui-jqgrid-resize)")&&a.css("top",(b.height()-a.outerHeight())/2+"px")})),x=n.find("tr.jqg-first-row-header"),$(o).bind("jqGridResizeStop.setGroupHeaders",function(a,b,c){x.find("th").eq(c).width(b)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var a=this,b=a.p.colModel,c=0,d=b.length,e=-1,f=!1;if(!(a.p.subGrid===!0||a.p.treeGrid===!0||a.p.cellEdit===!0||a.p.sortable||a.p.scroll||a.p.grouping)){for(a.p.rownumbers&&c++,a.p.multiselect&&c++;d>c&&b[c].frozen===!0;)f=!0,e=c,c++;if(e>=0&&f){var g=a.p.caption?$(a.grid.cDiv).outerHeight():0,h=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(a.p.id)).height();a.p.toppager&&(g+=$(a.grid.topDiv).outerHeight()),a.p.toolbar[0]===!0&&"bottom"!=a.p.toolbar[1]&&(g+=$(a.grid.uDiv).outerHeight()),a.grid.fhDiv=$('<div style="position:absolute;left:0px;top:'+g+"px;height:"+h+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),a.grid.fbDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(g,10)+parseInt(h,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),$("#gview_"+$.jgrid.jqID(a.p.id)).append(a.grid.fhDiv);var i=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(a.p.id)).clone(!0);if(a.p.groupHeader){$("tr.jqg-first-row-header, tr.jqg-third-row-header",i).each(function(){$("th:gt("+e+")",this).remove()});var j=-1,k=-1;$("tr.jqg-second-row-header th",i).each(function(){var a=parseInt($(this).attr("colspan"),10);return a&&(j+=a,k++),j===e?!1:void 0}),j!==e&&(k=e),$("tr.jqg-second-row-header",i).each(function(){$("th:gt("+k+")",this).remove()})}else $("tr",i).each(function(){$("th:gt("+e+")",this).remove()});$(i).width(1),$(a.grid.fhDiv).append(i).mousemove(function(b){return a.grid.resizing?(a.grid.dragMove(b),!1):void 0}),$(a).bind("jqGridResizeStop.setFrozenColumns",function(b,c,d){var e=$(".ui-jqgrid-htable",a.grid.fhDiv);$("th:eq("+d+")",e).width(c);var f=$(".ui-jqgrid-btable",a.grid.fbDiv);$("tr:first td:eq("+d+")",f).width(c)}),$(a).bind("jqGridOnSortCol.setFrozenColumns",function(b,c){var d=$("tr.ui-jqgrid-labels:last th:eq("+a.p.lastsort+")",a.grid.fhDiv),e=$("tr.ui-jqgrid-labels:last th:eq("+c+")",a.grid.fhDiv);$("span.ui-grid-ico-sort",d).addClass("ui-state-disabled"),$(d).attr("aria-selected","false"),$("span.ui-icon-"+a.p.sortorder,e).removeClass("ui-state-disabled"),$(e).attr("aria-selected","true"),a.p.viewsortcols[0]||a.p.lastsort!=c&&($("span.s-ico",d).hide(),$("span.s-ico",e).show())}),$("#gview_"+$.jgrid.jqID(a.p.id)).append(a.grid.fbDiv),jQuery(a.grid.bDiv).scroll(function(){jQuery(a.grid.fbDiv).scrollTop(jQuery(this).scrollTop())}),a.p.hoverrows===!0&&$("#"+$.jgrid.jqID(a.p.id)).unbind("mouseover").unbind("mouseout"),
$(a).bind("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID(a.p.id)+"_frozen").remove(),jQuery(a.grid.fbDiv).height(jQuery(a.grid.bDiv).height()-16);var b=$("#"+$.jgrid.jqID(a.p.id)).clone(!0);$("tr",b).each(function(){$("td:gt("+e+")",this).remove()}),$(b).width(1).attr("id",a.p.id+"_frozen"),$(a.grid.fbDiv).append(b),a.p.hoverrows===!0&&($("tr.jqgrow",b).hover(function(){$(this).addClass("ui-state-hover"),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(a.p.id)).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover"),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(a.p.id)).removeClass("ui-state-hover")}),$("tr.jqgrow","#"+$.jgrid.jqID(a.p.id)).hover(function(){$(this).addClass("ui-state-hover"),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(a.p.id)+"_frozen").addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover"),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(a.p.id)+"_frozen").removeClass("ui-state-hover")})),b=null}),a.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&this.p.frozenColumns===!0){var a=this;if($(a.grid.fhDiv).remove(),$(a.grid.fbDiv).remove(),a.grid.fhDiv=null,a.grid.fbDiv=null,$(this).unbind(".setFrozenColumns"),a.p.hoverrows===!0){var b;$("#"+$.jgrid.jqID(a.p.id)).bind("mouseover",function(a){b=$(a.target).closest("tr.jqgrow"),"ui-subgrid"!==$(b).attr("class")&&$(b).addClass("ui-state-hover")}).bind("mouseout",function(a){b=$(a.target).closest("tr.jqgrow"),$(b).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})}(jQuery),function($){$.fn.jqm=function(c){var d={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:e,ajaxText:"",target:e,modal:e,toTop:e,onShow:e,onHide:e,onLoad:e};return this.each(function(){return this._jqm?b[this._jqm].c=$.extend({},b[this._jqm].c,c):(a++,this._jqm=a,b[a]={c:$.extend(d,$.jqm.params,c),a:e,w:$(this).addClass("jqmID"+a),s:a},void(d.trigger&&$(this).jqmAddTrigger(d.trigger)))})},$.fn.jqmAddClose=function(a){return j(this,a,"jqmHide")},$.fn.jqmAddTrigger=function(a){return j(this,a,"jqmShow")},$.fn.jqmShow=function(a){return this.each(function(){$.jqm.open(this._jqm,a)})},$.fn.jqmHide=function(a){return this.each(function(){$.jqm.close(this._jqm,a)})},$.jqm={hash:{},open:function(a,g){var i=b[a],j=i.c,k="."+j.closeClass,l=parseInt(i.w.css("z-index"));l=l>0?l:3e3;var m=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":l-1,opacity:j.overlay/100});if(i.a)return e;if(i.t=g,i.a=!0,i.w.css("z-index",l),j.modal?(c[0]||setTimeout(function(){h("bind")},1),c.push(a)):j.overlay>0?j.closeoverlay&&i.w.jqmAddClose(m):m=e,i.o=m?m.addClass(j.overlayClass).prependTo("body"):e,d)try{if($("html,body").css({height:"100%",width:"100%"}),m){m=m.css({position:"absolute"})[0];for(var n in{Top:1,Left:1})m.style.setExpression(n.toLowerCase(),"(_=(document.documentElement.scroll"+n+" || document.body.scroll"+n+"))+'px'")}}catch(o){}if(j.ajax){var p=j.target||i.w,q=j.ajax;p="string"==typeof p?$(p,i.w):$(p),q="@"==q.substr(0,1)?$(g).attr(q.substring(1)):q,p.html(j.ajaxText).load(q,function(){j.onLoad&&j.onLoad.call(this,i),k&&i.w.jqmAddClose($(k,i.w)),f(i)})}else k&&i.w.jqmAddClose($(k,i.w));return j.toTop&&i.o&&i.w.before('<span id="jqmP'+i.w[0]._jqm+'"></span>').insertAfter(i.o),j.onShow?j.onShow(i):i.w.show(),f(i),e},close:function(a){var d=b[a];return d.a?(d.a=e,c[0]&&(c.pop(),c[0]||h("unbind")),d.c.toTop&&d.o&&$("#jqmP"+d.w[0]._jqm).after(d.w).remove(),d.c.onHide?d.c.onHide(d):(d.w.hide(),d.o&&d.o.remove()),e):e},params:{}};var a=0,b=$.jqm.hash,c=[],d=$.browser.msie&&"6.0"==$.browser.version,e=!1,f=function(a){var b=$('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});d&&(a.o?a.o.html('<p style="width:100%;height:100%"/>').prepend(b):$("iframe.jqm",a.w)[0]||a.w.prepend(b)),g(a)},g=function(a){try{$(":input:visible",a.w)[0].focus()}catch(_){}},h=function(a){$(document)[a]("keypress",i)[a]("keydown",i)[a]("mousedown",i)},i=function(a){var d=b[c[c.length-1]],e=!$(a.target).parents(".jqmID"+d.s)[0];return e&&g(d),!e},j=function(a,c,d){return a.each(function(){var a=this._jqm;$(c).each(function(){this[d]||(this[d]=[],$(this).click(function(){for(var a in{jqmShow:1,jqmHide:1})for(var c in this[a])b[this[a][c]]&&b[this[a][c]].w[a](this);return e})),this[d].push(a)})})}}(jQuery),function($){$.fn.jqDrag=function(a){return f(this,a,"d")},$.fn.jqResize=function(a,b){return f(this,a,"r",b)},$.jqDnR={dnr:{},e:0,drag:function(c){return"d"==d.k?e.css({left:d.X+c.pageX-d.pX,top:d.Y+c.pageY-d.pY}):(e.css({width:Math.max(c.pageX-d.pX+d.W,0),height:Math.max(c.pageY-d.pY+d.H,0)}),b&&a.css({width:Math.max(c.pageX-b.pX+b.W,0),height:Math.max(c.pageY-b.pY+b.H,0)})),!1},stop:function(){$(document).unbind("mousemove",c.drag).unbind("mouseup",c.stop)}};var a,b,c=$.jqDnR,d=c.dnr,e=c.e,f=function(c,f,i,j){return c.each(function(){f=f?$(f,c):c,f.bind("mousedown",{e:c,k:i},function(c){var f=c.data,i={};if(e=f.e,a=j?$(j):!1,"relative"!=e.css("position"))try{e.position(i)}catch(k){}if(d={X:i.left||g("left")||0,Y:i.top||g("top")||0,W:g("width")||e[0].scrollWidth||0,H:g("height")||e[0].scrollHeight||0,pX:c.pageX,pY:c.pageY,k:f.k},b=a&&"d"!=f.k?{X:i.left||h("left")||0,Y:i.top||h("top")||0,W:a[0].offsetWidth||h("width")||0,H:a[0].offsetHeight||h("height")||0,pX:c.pageX,pY:c.pageY,k:f.k}:!1,$("input.hasDatepicker",e[0])[0])try{$("input.hasDatepicker",e[0]).datepicker("hide")}catch(l){}return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),!1})})},g=function(a){return parseInt(e.css(a),10)||!1},h=function(b){return parseInt(a.css(b),10)||!1}}(jQuery);var xmlJsonClass={xml2json:function(a,b){9===a.nodeType&&(a=a.documentElement);var c=this.removeWhite(a),d=this.toObj(c),e=this.toJson(d,a.nodeName,"	");return"{\n"+b+(b?e.replace(/\t/g,b):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var c,d=function(a,b,c){var e,f,g="";if(a instanceof Array)if(0===a.length)g+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(e=0,f=a.length;f>e;e+=1){var h=c+d(a[e],b,c+"	")+"\n";g+=h}else if("object"==typeof a){var i=!1;g+=c+"<"+b;var j;for(j in a)a.hasOwnProperty(j)&&("@"===j.charAt(0)?g+=" "+j.substr(1)+'="'+a[j].toString()+'"':i=!0);if(g+=i?">":"/>",i){for(j in a)a.hasOwnProperty(j)&&("#text"===j?g+=a[j]:"#cdata"===j?g+="<![CDATA["+a[j]+"]]>":"@"!==j.charAt(0)&&(g+=d(a[j],j,c+"	")));g+=("\n"===g.charAt(g.length-1)?c:"")+"</"+b+">"}}else"function"==typeof a?g+=c+"<"+b+"><![CDATA["+a+"]]></"+b+">":(void 0===a&&(a=""),g+='""'===a.toString()||0===a.toString().length?c+"<"+b+">__EMPTY_STRING_</"+b+">":c+"<"+b+">"+a.toString()+"</"+b+">");return g},e="";for(c in a)a.hasOwnProperty(c)&&(e+=d(a[c],c,""));return b?e.replace(/\t/g,b):e.replace(/\t|\n/g,"")},toObj:function(a){var b={},c=/function/i;if(1===a.nodeType){if(a.attributes.length){var d;for(d=0;d<a.attributes.length;d+=1)b["@"+a.attributes[d].nodeName]=(a.attributes[d].nodeValue||"").toString()}if(a.firstChild){var e,f=0,g=0,h=!1;for(e=a.firstChild;e;e=e.nextSibling)1===e.nodeType?h=!0:3===e.nodeType&&e.nodeValue.match(/[^ \f\n\r\t\v]/)?f+=1:4===e.nodeType&&(g+=1);if(h)if(2>f&&2>g)for(this.removeWhite(a),e=a.firstChild;e;e=e.nextSibling)3===e.nodeType?b["#text"]=this.escape(e.nodeValue):4===e.nodeType?c.test(e.nodeValue)?b[e.nodeName]=[b[e.nodeName],e.nodeValue]:b["#cdata"]=this.escape(e.nodeValue):b[e.nodeName]?b[e.nodeName]instanceof Array?b[e.nodeName][b[e.nodeName].length]=this.toObj(e):b[e.nodeName]=[b[e.nodeName],this.toObj(e)]:b[e.nodeName]=this.toObj(e);else a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):b=this.escape(this.innerXml(a));else if(f)a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):(b=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===b?b="[]":"__EMPTY_STRING_"===b&&(b=""));else if(g)if(g>1)b=this.escape(this.innerXml(a));else for(e=a.firstChild;e;e=e.nextSibling){if(c.test(a.firstChild.nodeValue)){b=a.firstChild.nodeValue;break}b["#cdata"]=this.escape(e.nodeValue)}}a.attributes.length||a.firstChild||(b=null)}else 9===a.nodeType?b=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return b},toJson:function(a,b,c,d){void 0===d&&(d=!0);var e=b?'"'+b+'"':"",f="	",g="\n";if(d||(f="",g=""),"[]"===a)e+=b?":[]":"[]";else if(a instanceof Array){var h,i,j=[];for(i=0,h=a.length;h>i;i+=1)j[i]=this.toJson(a[i],"",c+f,d);e+=(b?":[":"[")+(j.length>1?g+c+f+j.join(","+g+c+f)+g+c:j.join(""))+"]"}else if(null===a)e+=(b&&":")+"null";else if("object"==typeof a){var k,l=[];for(k in a)a.hasOwnProperty(k)&&(l[l.length]=this.toJson(a[k],k,c+f,d));e+=(b?":{":"{")+(l.length>1?g+c+f+l.join(","+g+c+f)+g+c:l.join(""))+"}"}else e+="string"==typeof a?(b&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(b&&":")+a.toString();return e},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else for(var c=function(a){var b,d="";if(1===a.nodeType){for(d+="<"+a.nodeName,b=0;b<a.attributes.length;b+=1)d+=" "+a.attributes[b].nodeName+'="'+(a.attributes[b].nodeValue||"").toString()+'"';if(a.firstChild){d+=">";for(var e=a.firstChild;e;e=e.nextSibling)d+=c(e);d+="</"+a.nodeName+">"}else d+="/>"}else 3===a.nodeType?d+=a.nodeValue:4===a.nodeType&&(d+="<![CDATA["+a.nodeValue+"]]>");return d},d=a.firstChild;d;d=d.nextSibling)b+=c(d);return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var b;for(b=a.firstChild;b;)if(3===b.nodeType)if(b.nodeValue.match(/[^ \f\n\r\t\v]/))b=b.nextSibling;else{var c=b.nextSibling;a.removeChild(b),b=c}else 1===b.nodeType?(this.removeWhite(b),b=b.nextSibling):b=b.nextSibling;return a}};!function($){"use strict";$.fmatter={},$.extend($.fmatter,{isBoolean:function(a){return"boolean"==typeof a},isObject:function(a){return a&&("object"==typeof a||$.isFunction(a))||!1},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isNull:function(a){return null===a},isUndefined:function(a){return"undefined"==typeof a},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(a){return!this.isString(a)&&this.isValue(a)?!1:this.isValue(a)?(a=$.trim(a).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===a):!0}}),$.fn.fmatter=function(a,b,c,d,e){var f=b;c=$.extend({},$.jgrid.formatter,c);try{f=$.fn.fmatter[a].call(this,b,c,d,e)}catch(g){}return f},$.fmatter.util={NumberFormat:function(a,b){if($.fmatter.isNumber(a)||(a*=1),$.fmatter.isNumber(a)){var c,d=0>a,e=a+"",f=b.decimalSeparator?b.decimalSeparator:".";if($.fmatter.isNumber(b.decimalPlaces)){var g=b.decimalPlaces,h=Math.pow(10,g);if(e=Math.round(a*h)/h+"",c=e.lastIndexOf("."),g>0)for(0>c?(e+=f,c=e.length-1):"."!==f&&(e=e.replace(".",f));e.length-1-c<g;)e+="0"}if(b.thousandsSeparator){var i=b.thousandsSeparator;c=e.lastIndexOf(f),c=c>-1?c:e.length;for(var j=e.substring(c),k=-1,l=c;l>0;l--)k++,k%3===0&&l!==c&&(!d||l>1)&&(j=i+j),j=e.charAt(l-1)+j;e=j}return e=b.prefix?b.prefix+e:e,e=b.suffix?e+b.suffix:e}return a},DateFormat:function(a,b,c,d){var e,f,g,h=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,j=/[^-+\dA-Z]/g,k=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),l="string"==typeof b?b.match(k):null,m=function(a,b){for(a=String(a),b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},n={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},o=0,p=["i18n"];if(p.i18n={dayNames:d.dayNames,monthNames:d.monthNames},a in d.masks&&(a=d.masks[a]),isNaN(b-0)||"u"!=String(a).toLowerCase())if(b.constructor===Date)o=b;else if(null!==l){if(o=new Date(parseInt(l[1],10)),l[3]){var q=60*Number(l[5])+Number(l[6]);q*="-"==l[4]?1:-1,q-=o.getTimezoneOffset(),o.setTime(Number(Number(o)+60*q*1e3))}}else{for(b=String(b).split(/[\\\/:_;.,\t\T\s-]/),a=a.split(/[\\\/:_;.,\t\T\s-]/),f=0,g=a.length;g>f;f++)"M"==a[f]&&(e=$.inArray(b[f],p.i18n.monthNames),-1!==e&&12>e&&(b[f]=e+1)),"F"==a[f]&&(e=$.inArray(b[f],p.i18n.monthNames),-1!==e&&e>11&&(b[f]=e+1-12)),b[f]&&(n[a[f].toLowerCase()]=parseInt(b[f],10));if(n.f&&(n.m=n.f),0===n.m&&0===n.y&&0===n.d)return"&#160;";n.m=parseInt(n.m,10)-1;var r=n.y;r>=70&&99>=r?n.y=1900+n.y:r>=0&&69>=r&&(n.y=2e3+n.y),o=new Date(n.y,n.m,n.d,n.h,n.i,n.s,n.u)}else o=new Date(1e3*parseFloat(b));c in d.masks?c=d.masks[c]:c||(c="Y-m-d");var s=o.getHours(),t=o.getMinutes(),u=o.getDate(),v=o.getMonth()+1,w=o.getTimezoneOffset(),x=o.getSeconds(),y=o.getMilliseconds(),z=o.getDay(),A=o.getFullYear(),B=(z+6)%7+1,C=(new Date(A,v-1,u)-new Date(A,0,1))/864e5,D={d:m(u),D:p.i18n.dayNames[z],j:u,l:p.i18n.dayNames[z+7],N:B,S:d.S(u),w:z,z:C,W:5>B?Math.floor((C+B-1)/7)+1:Math.floor((C+B-1)/7)||((new Date(A-1,0,1).getDay()+6)%7<4?53:52),F:p.i18n.monthNames[v-1+12],m:m(v),M:p.i18n.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:A,y:String(A).substring(2),a:12>s?d.AmPm[0]:d.AmPm[1],A:12>s?d.AmPm[2]:d.AmPm[3],B:"?",g:s%12||12,G:s,h:m(s%12||12),H:m(s),i:m(t),s:m(x),u:y,e:"?",I:"?",O:(w>0?"-":"+")+m(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),P:"?",T:(String(o).match(i)||[""]).pop().replace(j,""),Z:"?",c:"?",r:"?",U:Math.floor(o/1e3)};return c.replace(h,function(a){return a in D?D[a]:a.substring(1)})}},$.fn.fmatter.defaultFormat=function(a,b){return $.fmatter.isValue(a)&&""!==a?a:b.defaultValue?b.defaultValue:"&#160;"},$.fn.fmatter.email=function(a,b){return $.fmatter.isEmpty(a)?$.fn.fmatter.defaultFormat(a,b):'<a href="mailto:'+a+'">'+a+"</a>"},$.fn.fmatter.checkbox=function(a,b){var c,d=$.extend({},b.checkbox);void 0===b.colModel||$.fmatter.isUndefined(b.colModel.formatoptions)||(d=$.extend({},d,b.colModel.formatoptions)),c=d.disabled===!0?'disabled="disabled"':"",($.fmatter.isEmpty(a)||$.fmatter.isUndefined(a))&&(a=$.fn.fmatter.defaultFormat(a,d)),a+="",a=a.toLowerCase();var e=a.search(/(false|0|no|off)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+e+' value="'+a+'" offval="no" '+c+"/>"},$.fn.fmatter.link=function(a,b){var c={target:b.target},d="";return void 0===b.colModel||$.fmatter.isUndefined(b.colModel.formatoptions)||(c=$.extend({},c,b.colModel.formatoptions)),c.target&&(d="target="+c.target),$.fmatter.isEmpty(a)?$.fn.fmatter.defaultFormat(a,b):"<a "+d+' href="'+a+'">'+a+"</a>"},$.fn.fmatter.showlink=function(a,b){var c,d={baseLinkUrl:b.baseLinkUrl,showAction:b.showAction,addParam:b.addParam||"",target:b.target,idName:b.idName},e="";return void 0===b.colModel||$.fmatter.isUndefined(b.colModel.formatoptions)||(d=$.extend({},d,b.colModel.formatoptions)),d.target&&(e="target="+d.target),c=d.baseLinkUrl+d.showAction+"?"+d.idName+"="+b.rowId+d.addParam,$.fmatter.isString(a)||$.fmatter.isNumber(a)?"<a "+e+' href="'+c+'">'+a+"</a>":$.fn.fmatter.defaultFormat(a,b)},$.fn.fmatter.integer=function(a,b){var c=$.extend({},b.integer);return void 0===b.colModel||$.fmatter.isUndefined(b.colModel.formatoptions)||(c=$.extend({},c,b.colModel.formatoptions)),$.fmatter.isEmpty(a)?c.defaultValue:$.fmatter.util.NumberFormat(a,c)},$.fn.fmatter.number=function(a,b){var c=$.extend({},b.number);return void 0===b.colModel||$.fmatter.isUndefined(b.colModel.formatoptions)||(c=$.extend({},c,b.colModel.formatoptions)),$.fmatter.isEmpty(a)?c.defaultValue:$.fmatter.util.NumberFormat(a,c)},$.fn.fmatter.currency=function(a,b){var c=$.extend({},b.currency);return void 0===b.colModel||$.fmatter.isUndefined(b.colModel.formatoptions)||(c=$.extend({},c,b.colModel.formatoptions)),$.fmatter.isEmpty(a)?c.defaultValue:$.fmatter.util.NumberFormat(a,c)},$.fn.fmatter.date=function(a,b,c,d){var e=$.extend({},b.date);return void 0===b.colModel||$.fmatter.isUndefined(b.colModel.formatoptions)||(e=$.extend({},e,b.colModel.formatoptions)),e.reformatAfterEdit||"edit"!=d?$.fmatter.isEmpty(a)?$.fn.fmatter.defaultFormat(a,b):$.fmatter.util.DateFormat(e.srcformat,a,e.newformat,e):$.fn.fmatter.defaultFormat(a,b)},$.fn.fmatter.select=function(a,b){a+="";var c,d,e=!1,f=[];if($.fmatter.isUndefined(b.colModel.formatoptions)?$.fmatter.isUndefined(b.colModel.editoptions)||(e=b.colModel.editoptions.value,c=void 0===b.colModel.editoptions.separator?":":b.colModel.editoptions.separator,d=void 0===b.colModel.editoptions.delimiter?";":b.colModel.editoptions.delimiter):(e=b.colModel.formatoptions.value,c=void 0===b.colModel.formatoptions.separator?":":b.colModel.formatoptions.separator,d=void 0===b.colModel.formatoptions.delimiter?";":b.colModel.formatoptions.delimiter),e){var g,h=b.colModel.editoptions.multiple===!0?!0:!1,i=[];if(h&&(i=a.split(","),i=$.map(i,function(a){return $.trim(a)})),$.fmatter.isString(e)){for(var j=e.split(d),k=0,l=0;l<j.length;l++)if(g=j[l].split(c),g.length>2&&(g[1]=$.map(g,function(a,b){return b>0?a:void 0}).join(c)),h)$.inArray(g[0],i)>-1&&(f[k]=g[1],k++);else if($.trim(g[0])==$.trim(a)){f[0]=g[1];break}}else $.fmatter.isObject(e)&&(h?f=$.map(i,function(a){return e[a]}):f[0]=e[a]||"")}return a=f.join(", "),""===a?$.fn.fmatter.defaultFormat(a,b):a},$.fn.fmatter.rowactions=function(a,b,c,d){var e={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}};a=$.jgrid.jqID(a),b=$.jgrid.jqID(b);var f=$("#"+b)[0].p.colModel[d];$.fmatter.isUndefined(f.formatoptions)||(e=$.extend(e,f.formatoptions)),$.fmatter.isUndefined($("#"+b)[0].p.editOptions)||(e.editOptions=$("#"+b)[0].p.editOptions),$.fmatter.isUndefined($("#"+b)[0].p.delOptions)||(e.delOptions=$("#"+b)[0].p.delOptions);var g=$("#"+b)[0],h=function(c,d){$.isFunction(e.afterSave)&&e.afterSave.call(g,c,d),$("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").show(),$("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").hide()},i=function(c){$.isFunction(e.afterRestore)&&e.afterRestore.call(g,c),$("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").show(),$("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").hide()};if($("#"+a,"#"+b).hasClass("jqgrid-new-row")){var j=g.p.prmNames,k=j.oper;e.extraparam[k]=j.addoper}var l={keys:e.keys,oneditfunc:e.onEdit,successfunc:e.onSuccess,url:e.url,extraparam:e.extraparam,aftersavefunc:h,errorfunc:e.onError,afterrestorefunc:i,restoreAfterError:e.restoreAfterError,mtype:e.mtype};switch(c){case"edit":$("#"+b).jqGrid("editRow",a,l),$("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").hide(),$("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").show(),$(g).triggerHandler("jqGridAfterGridComplete");break;case"save":$("#"+b).jqGrid("saveRow",a,l)&&($("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").show(),$("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").hide(),$(g).triggerHandler("jqGridAfterGridComplete"));break;case"cancel":$("#"+b).jqGrid("restoreRow",a,i),$("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").show(),$("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").hide(),$(g).triggerHandler("jqGridAfterGridComplete");break;case"del":$("#"+b).jqGrid("delGridRow",a,e.delOptions);break;case"formedit":$("#"+b).jqGrid("setSelection",a),$("#"+b).jqGrid("editGridRow",a,e.editOptions)}},$.fn.fmatter.actions=function(a,b){var c={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1};$.fmatter.isUndefined(b.colModel.formatoptions)||(c=$.extend(c,b.colModel.formatoptions));var d,e=b.rowId,f="";return"undefined"==typeof e||$.fmatter.isEmpty(e)?"":(c.editformbutton?(d="onclick=jQuery.fn.fmatter.rowactions('"+e+"','"+b.gid+"','formedit',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",f=f+"<div title='"+$.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+d+"><span class='ui-icon ui-icon-pencil'></span></div>"):c.editbutton&&(d="onclick=jQuery.fn.fmatter.rowactions('"+e+"','"+b.gid+"','edit',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",f=f+"<div title='"+$.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+d+"><span class='ui-icon ui-icon-pencil'></span></div>"),c.delbutton&&(d="onclick=jQuery.fn.fmatter.rowactions('"+e+"','"+b.gid+"','del',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",f=f+"<div title='"+$.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+d+"><span class='ui-icon ui-icon-trash'></span></div>"),d="onclick=jQuery.fn.fmatter.rowactions('"+e+"','"+b.gid+"','save',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",f=f+"<div title='"+$.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+d+"><span class='ui-icon ui-icon-disk'></span></div>",d="onclick=jQuery.fn.fmatter.rowactions('"+e+"','"+b.gid+"','cancel',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",f=f+"<div title='"+$.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+d+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+f+"</div>")},$.unformat=function(a,b,c,d){var e,f,g=b.colModel.formatter,h=b.colModel.formatoptions||{},i=/([\.\*\_\'\(\)\{\}\+\?\\])/g,j=b.colModel.unformat||$.fn.fmatter[g]&&$.fn.fmatter[g].unformat;if("undefined"!=typeof j&&$.isFunction(j))e=j.call(this,$(a).text(),b,a);else if(!$.fmatter.isUndefined(g)&&$.fmatter.isString(g)){var k,l=$.jgrid.formatter||{};switch(g){case"integer":h=$.extend({},l.integer,h),f=h.thousandsSeparator.replace(i,"\\$1"),k=new RegExp(f,"g"),e=$(a).text().replace(k,"");break;case"number":h=$.extend({},l.number,h),f=h.thousandsSeparator.replace(i,"\\$1"),k=new RegExp(f,"g"),e=$(a).text().replace(k,"").replace(h.decimalSeparator,".");break;case"currency":h=$.extend({},l.currency,h),f=h.thousandsSeparator.replace(i,"\\$1"),k=new RegExp(f,"g"),e=$(a).text(),h.prefix&&h.prefix.length&&(e=e.substr(h.prefix.length)),h.suffix&&h.suffix.length&&(e=e.substr(0,e.length-h.suffix.length)),e=e.replace(k,"").replace(h.decimalSeparator,".");break;case"checkbox":var m=b.colModel.editoptions?b.colModel.editoptions.value.split(":"):["Yes","No"];e=$("input",a).is(":checked")?m[0]:m[1];break;case"select":e=$.unformat.select(a,b,c,d);break;case"actions":return"";default:e=$(a).text()}}return void 0!==e?e:d===!0?$(a).text():$.jgrid.htmlDecode($(a).html())},$.unformat.select=function(a,b,c,d){var e=[],f=$(a).text();if(d===!0)return f;var g=$.extend({},$.fmatter.isUndefined(b.colModel.formatoptions)?b.colModel.editoptions:b.colModel.formatoptions),h=void 0===g.separator?":":g.separator,i=void 0===g.delimiter?";":g.delimiter;if(g.value){var j,k=g.value,l=g.multiple===!0?!0:!1,m=[];if(l&&(m=f.split(","),m=$.map(m,function(a){return $.trim(a)})),$.fmatter.isString(k)){for(var n=k.split(i),o=0,p=0;p<n.length;p++)if(j=n[p].split(h),j.length>2&&(j[1]=$.map(j,function(a,b){return b>0?a:void 0}).join(h)),l)$.inArray(j[1],m)>-1&&(e[o]=j[0],o++);else if($.trim(j[1])==$.trim(f)){e[0]=j[0];break}}else($.fmatter.isObject(k)||$.isArray(k))&&(l||(m[0]=f),e=$.map(m,function(a){var b;return $.each(k,function(c,d){return d==a?(b=c,!1):void 0}),"undefined"!=typeof b?b:void 0}));return e.join(", ")}return f||""},$.unformat.date=function(a,b){var c=$.jgrid.formatter.date||{};return $.fmatter.isUndefined(b.formatoptions)||(c=$.extend({},c,b.formatoptions)),$.fmatter.isEmpty(a)?$.fn.fmatter.defaultFormat(a,b):$.fmatter.util.DateFormat(c.newformat,a,c.srcformat,c)}}(jQuery),function($){$.extend($.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true"),a.o&&a.o.remove()},hideModal:function(a,b){if(b=$.extend({jqm:!0,gb:""},b||{}),b.onClose){var c=b.onClose(a);if("boolean"==typeof c&&!c)return}if($.fn.jqm&&b.jqm===!0)$(a).attr("aria-hidden","true").jqmHide();else{if(""!==b.gb)try{$(".jqgrid-overlay:first",b.gb).hide()}catch(d){}$(a).hide().attr("aria-hidden","true")}},findPos:function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},createModal:function(a,b,c,d,e,f,g){c=$.extend(!0,{},$.jgrid.jqModal||{},c);var h,i=document.createElement("div"),j=this;g=$.extend({},g||{}),h="rtl"==$(c.gbox).attr("dir")?!0:!1,i.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",i.id=a.themodal;var k=document.createElement("div");k.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",k.id=a.modalhead,$(k).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>");var l=$("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");$(k).append(l),h?(i.dir="rtl",$(".ui-jqdialog-title",k).css("float","right"),$(".ui-jqdialog-titlebar-close",k).css("left","0.3em")):(i.dir="ltr",$(".ui-jqdialog-title",k).css("float","left"),$(".ui-jqdialog-titlebar-close",k).css("right","0.3em"));var m=document.createElement("div");$(m).addClass("ui-jqdialog-content ui-widget-content").attr("id",a.modalcontent),$(m).append(b),i.appendChild(m),$(i).prepend(k),f===!0?$("body").append(i):"string"==typeof f?$(f).append(i):$(i).insertBefore(d),$(i).css(g),"undefined"==typeof c.jqModal&&(c.jqModal=!0);var n={};if($.fn.jqm&&c.jqModal===!0){if(0===c.left&&0===c.top&&c.overlay){var o=[];o=$.jgrid.findPos(e),c.left=o[0]+4,c.top=o[1]+4}n.top=c.top+"px",n.left=c.left}else(0!==c.left||0!==c.top)&&(n.left=c.left,n.top=c.top+"px");if($("a.ui-jqdialog-titlebar-close",k).click(function(){var b=$("#"+$.jgrid.jqID(a.themodal)).data("onClose")||c.onClose,d=$("#"+$.jgrid.jqID(a.themodal)).data("gbox")||c.gbox;return j.hideModal("#"+$.jgrid.jqID(a.themodal),{gb:d,jqm:c.jqModal,onClose:b}),!1}),0!==c.width&&c.width||(c.width=300),0!==c.height&&c.height||(c.height=200),!c.zIndex){var p=$(d).parents("*[role=dialog]").filter(":first").css("z-index");p?c.zIndex=parseInt(p,10)+2:c.zIndex=950}var q=0;if(h&&n.left&&!f&&(q=$(c.gbox).width()-(isNaN(c.width)?0:parseInt(c.width,10))-8,n.left=parseInt(n.left,10)+parseInt(q,10)),n.left&&(n.left+="px"),$(i).css($.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex,overflow:"hidden"},n)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":a.modalhead,"aria-hidden":"true"}),"undefined"==typeof c.drag&&(c.drag=!0),"undefined"==typeof c.resize&&(c.resize=!0),c.drag)if($(k).css("cursor","move"),$.fn.jqDrag)$(i).jqDrag(k);else try{$(i).draggable({handle:$("#"+$.jgrid.jqID(k.id))})}catch(r){}if(c.resize)if($.fn.jqResize)$(i).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),$("#"+$.jgrid.jqID(a.themodal)).jqResize(".jqResize",a.scrollelm?"#"+$.jgrid.jqID(a.scrollelm):!1);else try{$(i).resizable({handles:"se, sw",alsoResize:a.scrollelm?"#"+$.jgrid.jqID(a.scrollelm):!1})}catch(s){}c.closeOnEscape===!0&&$(i).keydown(function(b){if(27==b.which){var d=$("#"+$.jgrid.jqID(a.themodal)).data("onClose")||c.onClose;j.hideModal(this,{gb:c.gbox,jqm:c.jqModal,onClose:d})}})},viewModal:function(a,b){if(b=$.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},b||{}),$.fn.jqm&&b.jqm===!0)b.jqM?$(a).attr("aria-hidden","false").jqm(b).jqmShow():$(a).attr("aria-hidden","false").jqmShow();else{""!==b.gbox&&($(".jqgrid-overlay:first",b.gbox).show(),$(a).data("gbox",b.gbox)),$(a).show().attr("aria-hidden","false");try{$(":input:visible",a)[0].focus()}catch(_){}}},info_dialog:function(a,b,c,d){var e={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};$.extend(!0,e,$.jgrid.jqModal||{},{caption:"<b>"+a+"</b>"},d||{});var f=e.jqModal,g=this;$.fn.jqm&&!f&&(f=!1);var h="";if(e.buttons.length>0)for(var i=0;i<e.buttons.length;i++)"undefined"==typeof e.buttons[i].id&&(e.buttons[i].id="info_button_"+i),h+="<a href='javascript:void(0)' id='"+e.buttons[i].id+"' class='fm-button ui-state-default ui-corner-all'>"+e.buttons[i].text+"</a>";var j=isNaN(e.dataheight)?e.dataheight:e.dataheight+"px",k="text-align:"+e.align+";",l="<div id='info_id'>";l+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+j+";"+k+"'>"+b+"</div>",l+=c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+e.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+c+"</a>"+h+"</div>":""!==h?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+e.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+h+"</div>":"",l+="</div>";try{"false"==$("#info_dialog").attr("aria-hidden")&&$.jgrid.hideModal("#info_dialog",{jqm:f}),$("#info_dialog").remove()}catch(m){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},l,e,"","",!0),h&&$.each(e.buttons,function(a){$("#"+$.jgrid.jqID(this.id),"#info_id").bind("click",function(){return e.buttons[a].onClick.call($("#info_dialog")),!1})}),$("#closedialog","#info_id").click(function(){return g.hideModal("#info_dialog",{jqm:f}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),$.isFunction(e.beforeOpen)&&e.beforeOpen(),$.jgrid.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove(),a.o&&a.o.remove()},modal:e.modal,jqm:f}),$.isFunction(e.afterOpen)&&e.afterOpen();try{$("#info_dialog").focus()}catch(n){}},createEl:function(a,b,c,d,e){function f(a,b){return $.isFunction(b.dataInit)&&b.dataInit.call(i,a),b.dataEvents&&$.each(b.dataEvents,function(){void 0!==this.data?$(a).bind(this.type,this.data,this.fn):$(a).bind(this.type,this.fn)}),b}function g(a,b,c){var d=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr"];"undefined"!=typeof c&&$.isArray(c)&&$.merge(d,c),$.each(b,function(b,c){-1===$.inArray(b,d)&&$(a).attr(b,c)}),b.hasOwnProperty("id")||$(a).attr("id",$.jgrid.randId())}var h="",i=this;switch(a){case"textarea":h=document.createElement("textarea"),d?b.cols||$(h).css({width:"98%"}):b.cols||(b.cols=20),b.rows||(b.rows=2),("&nbsp;"==c||"&#160;"==c||1==c.length&&160==c.charCodeAt(0))&&(c=""),h.value=c,g(h,b),b=f(h,b),$(h).attr({role:"textbox",multiline:"true"});break;case"checkbox":if(h=document.createElement("input"),h.type="checkbox",b.value){var j=b.value.split(":");c===j[0]&&(h.checked=!0,h.defaultChecked=!0),h.value=j[0],$(h).attr("offval",j[1])}else{var k=c.toLowerCase();k.search(/(false|0|no|off|undefined)/i)<0&&""!==k?(h.checked=!0,h.defaultChecked=!0,h.value=c):h.value="on",$(h).attr("offval","off")}g(h,b,["value"]),b=f(h,b),$(h).attr("role","checkbox");break;case"select":h=document.createElement("select"),h.setAttribute("role","select");var l,m=[];if(b.multiple===!0?(l=!0,h.multiple="multiple",$(h).attr("aria-multiselectable","true")):l=!1,"undefined"!=typeof b.dataUrl)$.ajax($.extend({url:b.dataUrl,type:"GET",dataType:"html",context:{elem:h,options:b,vl:c
},success:function(a){var b,c=[],d=this.elem,e=this.vl,h=$.extend({},this.options),j=h.multiple===!0;if($.isFunction(h.buildSelect)){var k=h.buildSelect.call(i,a);b=$(k).html()}else b=$(a).html();b&&($(d).append(b),g(d,h),h=f(d,h),"undefined"==typeof h.size&&(h.size=j?3:1),j?(c=e.split(","),c=$.map(c,function(a){return $.trim(a)})):c[0]=$.trim(e),setTimeout(function(){$("option",d).each(function(a){0===a&&d.multiple&&(this.selected=!1),$(this).attr("role","option"),($.inArray($.trim($(this).text()),c)>-1||$.inArray($.trim($(this).val()),c)>-1)&&(this.selected="selected")})},0))}},e||{}));else if(b.value){var n;"undefined"==typeof b.size&&(b.size=l?3:1),l&&(m=c.split(","),m=$.map(m,function(a){return $.trim(a)})),"function"==typeof b.value&&(b.value=b.value());var o,p,q,r=void 0===b.separator?":":b.separator,s=void 0===b.delimiter?";":b.delimiter;if("string"==typeof b.value)for(o=b.value.split(s),n=0;n<o.length;n++)p=o[n].split(r),p.length>2&&(p[1]=$.map(p,function(a,b){return b>0?a:void 0}).join(r)),q=document.createElement("option"),q.setAttribute("role","option"),q.value=p[0],q.innerHTML=p[1],h.appendChild(q),l||$.trim(p[0])!=$.trim(c)&&$.trim(p[1])!=$.trim(c)||(q.selected="selected"),l&&($.inArray($.trim(p[1]),m)>-1||$.inArray($.trim(p[0]),m)>-1)&&(q.selected="selected");else if("object"==typeof b.value){var t=b.value;for(var u in t)t.hasOwnProperty(u)&&(q=document.createElement("option"),q.setAttribute("role","option"),q.value=u,q.innerHTML=t[u],h.appendChild(q),l||$.trim(u)!=$.trim(c)&&$.trim(t[u])!=$.trim(c)||(q.selected="selected"),l&&($.inArray($.trim(t[u]),m)>-1||$.inArray($.trim(u),m)>-1)&&(q.selected="selected"))}g(h,b,["value"]),b=f(h,b)}break;case"text":case"password":case"button":var v;v="button"==a?"button":"textbox",h=document.createElement("input"),h.type=a,h.value=c,g(h,b),b=f(h,b),"button"!=a&&(d?b.size||$(h).css({width:"98%"}):b.size||(b.size=20)),$(h).attr("role",v);break;case"image":case"file":h=document.createElement("input"),h.type=a,g(h,b),b=f(h,b);break;case"custom":h=document.createElement("span");try{if(!$.isFunction(b.custom_element))throw"e1";var w=b.custom_element.call(i,c,b);if(!w)throw"e2";w=$(w).addClass("customelement").attr({id:b.id,name:b.name}),$(h).empty().append(w)}catch(x){"e1"==x&&$.jgrid.info_dialog($.jgrid.errors.errcap,"function 'custom_element' "+$.jgrid.edit.msg.nodefined,$.jgrid.edit.bClose),"e2"==x?$.jgrid.info_dialog($.jgrid.errors.errcap,"function 'custom_element' "+$.jgrid.edit.msg.novalue,$.jgrid.edit.bClose):$.jgrid.info_dialog($.jgrid.errors.errcap,"string"==typeof x?x:x.message,$.jgrid.edit.bClose)}}return h},checkDate:function(a,b){var c,d=function(a){return a%4!==0||a%100===0&&a%400!==0?28:29},e=function(a){for(var b=1;a>=b;b++)this[b]=31,(4==b||6==b||9==b||11==b)&&(this[b]=30),2==b&&(this[b]=29);return this},f={};if(a=a.toLowerCase(),c=-1!=a.indexOf("/")?"/":-1!=a.indexOf("-")?"-":-1!=a.indexOf(".")?".":"/",a=a.split(c),b=b.split(c),3!=b.length)return!1;for(var g,h=-1,i=-1,j=-1,k=0;k<a.length;k++){var l=isNaN(b[k])?0:parseInt(b[k],10);f[a[k]]=l,g=a[k],-1!=g.indexOf("y")&&(h=k),-1!=g.indexOf("m")&&(j=k),-1!=g.indexOf("d")&&(i=k)}g="y"==a[h]||"yyyy"==a[h]?4:"yy"==a[h]?2:-1;var m,n=e(12);return-1===h?!1:(m=f[a[h]].toString(),2==g&&1==m.length&&(g=1),m.length!=g||0===f[a[h]]&&"00"!=b[h]?!1:-1===j?!1:(m=f[a[j]].toString(),m.length<1||f[a[j]]<1||f[a[j]]>12?!1:-1===i?!1:(m=f[a[i]].toString(),m.length<1||f[a[i]]<1||f[a[i]]>31||2==f[a[j]]&&f[a[i]]>d(f[a[h]])||f[a[i]]>n[f[a[j]]]?!1:!0)))},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(a){var b,c=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!$.jgrid.isEmpty(a)){if(b=a.match(c),!b)return!1;if(b[3]){if(b[1]<1||b[1]>12)return!1}else if(b[1]>23)return!1;if(b[2]>59)return!1}return!0},checkValues:function(a,b,c,d,e){var f,g,h,i,j;if("undefined"==typeof d)if("string"==typeof b){for(g=0,j=c.p.colModel.length;j>g;g++)if(c.p.colModel[g].name==b){f=c.p.colModel[g].editrules,b=g;try{h=c.p.colModel[g].formoptions.label}catch(k){}break}}else b>=0&&(f=c.p.colModel[b].editrules);else f=d,h=void 0===e?"_":e;if(f){if(h||(h=c.p.colNames[b]),f.required===!0&&$.jgrid.isEmpty(a))return[!1,h+": "+$.jgrid.edit.msg.required,""];var l=f.required===!1?!1:!0;if(f.number===!0&&(l!==!1||!$.jgrid.isEmpty(a))&&isNaN(a))return[!1,h+": "+$.jgrid.edit.msg.number,""];if("undefined"!=typeof f.minValue&&!isNaN(f.minValue)&&parseFloat(a)<parseFloat(f.minValue))return[!1,h+": "+$.jgrid.edit.msg.minValue+" "+f.minValue,""];if("undefined"!=typeof f.maxValue&&!isNaN(f.maxValue)&&parseFloat(a)>parseFloat(f.maxValue))return[!1,h+": "+$.jgrid.edit.msg.maxValue+" "+f.maxValue,""];var m;if(f.email===!0&&!(l===!1&&$.jgrid.isEmpty(a)||(m=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,m.test(a))))return[!1,h+": "+$.jgrid.edit.msg.email,""];if(f.integer===!0&&(l!==!1||!$.jgrid.isEmpty(a))){if(isNaN(a))return[!1,h+": "+$.jgrid.edit.msg.integer,""];if(a%1!==0||-1!=a.indexOf("."))return[!1,h+": "+$.jgrid.edit.msg.integer,""]}if(f.date===!0&&!(l===!1&&$.jgrid.isEmpty(a)||(i=c.p.colModel[b].formatoptions&&c.p.colModel[b].formatoptions.newformat?c.p.colModel[b].formatoptions.newformat:c.p.colModel[b].datefmt||"Y-m-d",$.jgrid.checkDate(i,a))))return[!1,h+": "+$.jgrid.edit.msg.date+" - "+i,""];if(f.time===!0&&!(l===!1&&$.jgrid.isEmpty(a)||$.jgrid.checkTime(a)))return[!1,h+": "+$.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(f.url===!0&&!(l===!1&&$.jgrid.isEmpty(a)||(m=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,m.test(a))))return[!1,h+": "+$.jgrid.edit.msg.url,""];if(f.custom===!0&&(l!==!1||!$.jgrid.isEmpty(a))){if($.isFunction(f.custom_func)){var n=f.custom_func.call(c,a,h);return $.isArray(n)?n:[!1,$.jgrid.edit.msg.customarray,""]}return[!1,$.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})}(jQuery),function($){$.fn.jqFilter=function(a){if("string"==typeof a){var b=$.fn.jqFilter[a];if(!b)throw"jqFilter - No such method: "+a;var c=$.makeArray(arguments).slice(1);return b.apply(this,c)}var d=$.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],_gridsopt:[],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},$.jgrid.filter,a||{});return this.each(function(){if(!this.filter){this.p=d,(null===this.p.filter||void 0===this.p.filter)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]});var a,b,c=this.p.columns.length,e=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(a=0;a<this.p._gridsopt.length;a++)this.p.ops[a].description=this.p._gridsopt[a];if(this.p.initFilter=$.extend(!0,{},this.p.filter),c){for(a=0;c>a;a++)b=this.p.columns[a],b.stype?b.inputtype=b.stype:b.inputtype||(b.inputtype="text"),b.sorttype?b.searchtype=b.sorttype:b.searchtype||(b.searchtype="string"),void 0===b.hidden&&(b.hidden=!1),b.label||(b.label=b.name),b.index&&(b.name=b.index),b.hasOwnProperty("searchoptions")||(b.searchoptions={}),b.hasOwnProperty("searchrules")||(b.searchrules={});this.p.showQuery&&$(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var f=function(a,b){var c=[!0,""];if($.isFunction(b.searchrules))c=b.searchrules(a,b);else if($.jgrid&&$.jgrid.checkValues)try{c=$.jgrid.checkValues(a,-1,null,b.searchrules,b.label)}catch(e){}c&&c.length&&c[0]===!1&&(d.error=!c[0],d.errmsg=c[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",$.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){$("table.group:first",this).remove();var a=this.createTableForGroup(d.filter,null);$(this).append(a),$.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(a,b){var c,e=this,f=$("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),g="left";"rtl"==this.p.direction&&(g="right",f.attr("dir","rtl")),null===b&&f.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+g+"'></th></tr>");var h=$("<tr></tr>");f.append(h);var i=$("<th colspan='5' align='"+g+"'></th>");if(h.append(i),this.p.ruleButtons===!0){var j=$("<select class='opsel'></select>");i.append(j);var k,l="";for(c=0;c<d.groupOps.length;c++)k=a.groupOp===e.p.groupOps[c].op?" selected='selected'":"",l+="<option value='"+e.p.groupOps[c].op+"'"+k+">"+e.p.groupOps[c].text+"</option>";j.append(l).bind("change",function(){a.groupOp=$(j).val(),e.onchange()})}var m="<span></span>";if(this.p.groupButton&&(m=$("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),m.bind("click",function(){return void 0===a.groups&&(a.groups=[]),a.groups.push({groupOp:d.groupOps[0].op,rules:[],groups:[]}),e.reDraw(),e.onchange(),!1})),i.append(m),this.p.ruleButtons===!0){var n,o=$("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");o.bind("click",function(){for(void 0===a.rules&&(a.rules=[]),c=0;c<e.p.columns.length;c++){var b="undefined"==typeof e.p.columns[c].search?!0:e.p.columns[c].search,d=e.p.columns[c].hidden===!0,f=e.p.columns[c].searchoptions.searchhidden===!0;if(f&&b||b&&!d){n=e.p.columns[c];break}}var g;return g=n.searchoptions.sopt?n.searchoptions.sopt:e.p.sopt?e.p.sopt:"string"===n.searchtype?e.p.stropts:e.p.numopts,a.rules.push({field:n.name,op:g[0],data:""}),e.reDraw(),!1}),i.append(o)}if(null!==b){var p=$("<input type='button' value='-' title='Delete group' class='delete-group'/>");i.append(p),p.bind("click",function(){for(c=0;c<b.groups.length;c++)if(b.groups[c]===a){b.groups.splice(c,1);break}return e.reDraw(),e.onchange(),!1})}if(void 0!==a.groups)for(c=0;c<a.groups.length;c++){var q=$("<tr></tr>");f.append(q);var r=$("<td class='first'></td>");q.append(r);var s=$("<td colspan='4'></td>");s.append(this.createTableForGroup(a.groups[c],a)),q.append(s)}if(void 0===a.groupOp&&(a.groupOp=e.p.groupOps[0].op),void 0!==a.rules)for(c=0;c<a.rules.length;c++)f.append(this.createTableRowForRule(a.rules[c],a));return f},this.createTableRowForRule=function(a,b){var c,f,g,h,i,j=this,k=$("<tr></tr>"),l="";k.append("<td class='first'></td>");var m=$("<td class='columns'></td>");k.append(m);var n,o=$("<select></select>"),p=[];m.append(o),o.bind("change",function(){for(a.field=$(o).val(),g=$(this).parents("tr:first"),c=0;c<j.p.columns.length;c++)if(j.p.columns[c].name===a.field){h=j.p.columns[c];break}if(h){h.searchoptions.id=$.jgrid.randId(),e&&"text"===h.inputtype&&(h.searchoptions.size||(h.searchoptions.size=10));var b=$.jgrid.createEl(h.inputtype,h.searchoptions,"",!0,j.p.ajaxSelectOptions,!0);$(b).addClass("input-elm"),f=h.searchoptions.sopt?h.searchoptions.sopt:j.p.sopt?j.p.sopt:"string"===h.searchtype?j.p.stropts:j.p.numopts;var d="",i=0;for(p=[],$.each(j.p.ops,function(){p.push(this.name)}),c=0;c<f.length;c++)n=$.inArray(f[c],p),-1!==n&&(0===i&&(a.op=j.p.ops[n].name),d+="<option value='"+j.p.ops[n].name+"'>"+j.p.ops[n].description+"</option>",i++);if($(".selectopts",g).empty().append(d),$(".selectopts",g)[0].selectedIndex=0,$.browser.msie&&$.browser.version<9){var k=parseInt($("select.selectopts",g)[0].offsetWidth)+1;$(".selectopts",g).width(k),$(".selectopts",g).css("width","auto")}$(".data",g).empty().append(b),$(".input-elm",g).bind("change",function(b){var c=$(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var c=b.target;a.data="SPAN"===c.nodeName.toUpperCase()&&h.searchoptions&&$.isFunction(h.searchoptions.custom_value)?h.searchoptions.custom_value($(c).children(".customelement:first"),"get"):c.value,j.onchange()},c)}),setTimeout(function(){a.data=$(b).val(),j.onchange()},0)}});var q=0;for(c=0;c<j.p.columns.length;c++){var r="undefined"==typeof j.p.columns[c].search?!0:j.p.columns[c].search,s=j.p.columns[c].hidden===!0,t=j.p.columns[c].searchoptions.searchhidden===!0;(t&&r||r&&!s)&&(i="",a.field===j.p.columns[c].name&&(i=" selected='selected'",q=c),l+="<option value='"+j.p.columns[c].name+"'"+i+">"+j.p.columns[c].label+"</option>")}o.append(l);var u=$("<td class='operators'></td>");k.append(u),h=d.columns[q],h.searchoptions.id=$.jgrid.randId(),e&&"text"===h.inputtype&&(h.searchoptions.size||(h.searchoptions.size=10));var v=$.jgrid.createEl(h.inputtype,h.searchoptions,a.data,!0,j.p.ajaxSelectOptions,!0),w=$("<select class='selectopts'></select>");for(u.append(w),w.bind("change",function(){a.op=$(w).val(),g=$(this).parents("tr:first");var b=$(".input-elm",g)[0];"nu"===a.op||"nn"===a.op?(a.data="",b.value="",b.setAttribute("readonly","true"),b.setAttribute("disabled","true")):(b.removeAttribute("readonly"),b.removeAttribute("disabled")),j.onchange()}),f=h.searchoptions.sopt?h.searchoptions.sopt:j.p.sopt?j.p.sopt:"string"===h.searchtype?d.stropts:j.p.numopts,l="",$.each(j.p.ops,function(){p.push(this.name)}),c=0;c<f.length;c++)n=$.inArray(f[c],p),-1!==n&&(i=a.op===j.p.ops[n].name?" selected='selected'":"",l+="<option value='"+j.p.ops[n].name+"'"+i+">"+j.p.ops[n].description+"</option>");w.append(l);var x=$("<td class='data'></td>");k.append(x),x.append(v),$(v).addClass("input-elm").bind("change",function(){a.data="custom"===h.inputtype?h.searchoptions.custom_value($(this).children(".customelement:first"),"get"):$(this).val(),j.onchange()});var y=$("<td></td>");if(k.append(y),this.p.ruleButtons===!0){var z=$("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");y.append(z),z.bind("click",function(){for(c=0;c<b.rules.length;c++)if(b.rules[c]===a){b.rules.splice(c,1);break}return j.reDraw(),j.onchange(),!1})}return k},this.getStringForGroup=function(a){var b,c="(";if(void 0!==a.groups)for(b=0;b<a.groups.length;b++){c.length>1&&(c+=" "+a.groupOp+" ");try{c+=this.getStringForGroup(a.groups[b])}catch(d){alert(d)}}if(void 0!==a.rules)try{for(b=0;b<a.rules.length;b++)c.length>1&&(c+=" "+a.groupOp+" "),c+=this.getStringForRule(a.rules[b])}catch(e){alert(e)}return c+=")","()"===c?"":c},this.getStringForRule=function(a){var b,c,e,g,h="",i="",j=["int","integer","float","number","currency"];for(b=0;b<this.p.ops.length;b++)if(this.p.ops[b].name===a.op){h=this.p.ops[b].operator,i=this.p.ops[b].name;break}for(b=0;b<this.p.columns.length;b++)if(this.p.columns[b].name===a.field){c=this.p.columns[b];break}return g=a.data,("bw"===i||"bn"===i)&&(g+="%"),("ew"===i||"en"===i)&&(g="%"+g),("cn"===i||"nc"===i)&&(g="%"+g+"%"),("in"===i||"ni"===i)&&(g=" ("+g+")"),d.errorcheck&&f(a.data,c),e=-1!==$.inArray(c.searchtype,j)||"nn"===i||"nu"===i?a.field+" "+h+" "+g:a.field+" "+h+' "'+g+'"'},this.resetFilter=function(){this.p.filter=$.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th.ui-state-error",this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th.ui-state-error",this).html(this.p.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(d.filter)},this.toString=function(){function a(a){if(c.p.errorcheck){var b,d;for(b=0;b<c.p.columns.length;b++)if(c.p.columns[b].name===a.field){d=c.p.columns[b];break}d&&f(a.data,d)}return a.op+"(item."+a.field+",'"+a.data+"')"}function b(c){var d,e="(";if(void 0!==c.groups)for(d=0;d<c.groups.length;d++)e.length>1&&(e+="OR"===c.groupOp?" || ":" && "),e+=b(c.groups[d]);if(void 0!==c.rules)for(d=0;d<c.rules.length;d++)e.length>1&&(e+="OR"===c.groupOp?" || ":" && "),e+=a(c.rules[d]);return e+=")","()"===e?"":e}var c=this;return b(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var a="";return this.each(function(){a=this.toUserFriendlyString()}),a},filterData:function(){var a;return this.each(function(){a=this.p.filter}),a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"==typeof a&&(a=jQuery.jgrid.parse(a)),this.each(function(){this.p.filter=a,this.reDraw(),this.onchange()})}})}(jQuery),function($){"use strict";var a={};$.jgrid.extend({searchGrid:function(a){return a=$.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null},$.jgrid.search,a||{}),this.each(function(){function b(b){e=$(c).triggerHandler("jqGridFilterBeforeShow",[b]),"undefined"==typeof e&&(e=!0),e&&$.isFunction(a.beforeShowSearch)&&(e=a.beforeShowSearch.call(c,b)),e&&($.jgrid.viewModal("#"+$.jgrid.jqID(f.themodal),{gbox:"#gbox_"+$.jgrid.jqID(d),jqm:a.jqModal,modal:a.modal,overlay:a.overlay,toTop:a.toTop}),$(c).triggerHandler("jqGridFilterAfterShow",[b]),$.isFunction(a.afterShowSearch)&&a.afterShowSearch.call(c,b))}var c=this;if(c.grid){var d="fbox_"+c.p.id,e=!0,f={themodal:"searchmod"+d,modalhead:"searchhd"+d,modalcontent:"searchcnt"+d,scrollelm:d},g=c.p.postData[a.sFilter];if("string"==typeof g&&(g=$.jgrid.parse(g)),a.recreateFilter===!0&&$("#"+$.jgrid.jqID(f.themodal)).remove(),void 0!==$("#"+$.jgrid.jqID(f.themodal))[0])b($("#fbox_"+$.jgrid.jqID(+c.p.id)));else{var h=$("<div><div id='"+d+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+$.jgrid.jqID(c.p.id)),i="left",j="";"rtl"==c.p.direction&&(i="right",j=" style='text-align:left'",h.attr("dir","rtl"));var k,l,m=$.extend([],c.p.colModel),n="<a href='javascript:void(0)' id='"+d+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+a.Find+"</a>",o="<a href='javascript:void(0)' id='"+d+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+a.Reset+"</a>",p="",q="",r=!1,s=-1;if(a.showQuery&&(p="<a href='javascript:void(0)' id='"+d+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),a.columns.length?m=a.columns:$.each(m,function(a,b){if(b.label||(b.label=c.p.colNames[a]),!r){var d="undefined"==typeof b.search?!0:b.search,e=b.hidden===!0,f=b.searchoptions&&b.searchoptions.searchhidden===!0;(f&&d||d&&!e)&&(r=!0,k=b.index||b.name,s=a)}}),!g&&k||a.multipleSearch===!1){var t="eq";s>=0&&m[s].searchoptions&&m[s].searchoptions.sopt?t=m[s].searchoptions.sopt[0]:a.sopt&&a.sopt.length&&(t=a.sopt[0]),g={groupOp:"AND",rules:[{field:k,op:t,data:""}]}}r=!1,a.tmplNames&&a.tmplNames.length&&(r=!0,q=a.tmplLabel,q+="<select class='ui-template'>",q+="<option value='default'>Default</option>",$.each(a.tmplNames,function(a,b){q+="<option value='"+a+"'>"+b+"</option>"}),q+="</select>"),l="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+d+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+i+"'>"+o+q+"</td><td class='EditButton' "+j+">"+p+n+"</td></tr></tbody></table>",d=$.jgrid.jqID(d),$("#"+d).jqFilter({columns:m,filter:a.loadDefaults?g:null,showQuery:a.showQuery,errorcheck:a.errorcheck,sopt:a.sopt,groupButton:a.multipleGroup,ruleButtons:a.multipleSearch,afterRedraw:a.afterRedraw,_gridsopt:$.jgrid.search.odata,ajaxSelectOptions:c.p.ajaxSelectOptions,groupOps:a.groupOps,onChange:function(){this.p.showQuery&&$(".query",this).html(this.toUserFriendlyString()),$.isFunction(a.afterChange)&&a.afterChange.call(c,$("#"+d),a)},direction:c.p.direction}),h.append(l),r&&a.tmplFilters&&a.tmplFilters.length&&$(".ui-template",h).bind("change",function(){var b=$(this).val();return"default"==b?$("#"+d).jqFilter("addFilter",g):$("#"+d).jqFilter("addFilter",a.tmplFilters[parseInt(b,10)]),!1}),a.multipleGroup===!0&&(a.multipleSearch=!0),$(c).triggerHandler("jqGridFilterInitialize",[$("#"+d)]),$.isFunction(a.onInitializeSearch)&&a.onInitializeSearch.call(c,$("#"+d)),a.gbox="#gbox_"+d,a.layer?$.jgrid.createModal(f,h,a,"#gview_"+$.jgrid.jqID(c.p.id),$("#gbox_"+$.jgrid.jqID(c.p.id))[0],"#"+$.jgrid.jqID(a.layer),{position:"relative"}):$.jgrid.createModal(f,h,a,"#gview_"+$.jgrid.jqID(c.p.id),$("#gbox_"+$.jgrid.jqID(c.p.id))[0]),(a.searchOnEnter||a.closeOnEscape)&&$("#"+$.jgrid.jqID(f.themodal)).keydown(function(b){var c=$(b.target);return!a.searchOnEnter||13!==b.which||c.hasClass("add-group")||c.hasClass("add-rule")||c.hasClass("delete-group")||c.hasClass("delete-rule")||c.hasClass("fm-button")&&c.is("[id$=_query]")?a.closeOnEscape&&27===b.which?($("#"+$.jgrid.jqID(f.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click(),!1):void 0:($("#"+d+"_search").focus().click(),!1)}),p&&$("#"+d+"_query").bind("click",function(){return $(".queryresult",h).toggle(),!1}),void 0===a.stringResult&&(a.stringResult=a.multipleSearch),$("#"+d+"_search").bind("click",function(){var b,e=$("#"+d),g={},h=e.jqFilter("filterData");if(a.errorcheck&&(e[0].hideError(),a.showQuery||e.jqFilter("toSQLString"),e[0].p.error))return e[0].showError(),!1;if(a.stringResult){try{b=xmlJsonClass.toJson(h,"","",!1)}catch(i){try{b=JSON.stringify(h)}catch(j){}}"string"==typeof b&&(g[a.sFilter]=b,$.each([a.sField,a.sValue,a.sOper],function(){g[this]=""}))}else a.multipleSearch?(g[a.sFilter]=h,$.each([a.sField,a.sValue,a.sOper],function(){g[this]=""})):(g[a.sField]=h.rules[0].field,g[a.sValue]=h.rules[0].data,g[a.sOper]=h.rules[0].op,g[a.sFilter]="");return c.p.search=!0,$.extend(c.p.postData,g),$(c).triggerHandler("jqGridFilterSearch"),$.isFunction(a.onSearch)&&a.onSearch.call(c),$(c).trigger("reloadGrid",[{page:1}]),a.closeAfterSearch&&$.jgrid.hideModal("#"+$.jgrid.jqID(f.themodal),{gb:"#gbox_"+$.jgrid.jqID(c.p.id),jqm:a.jqModal,onClose:a.onClose}),!1}),$("#"+d+"_reset").bind("click",function(){var b={},e=$("#"+d);return c.p.search=!1,a.multipleSearch===!1?b[a.sField]=b[a.sValue]=b[a.sOper]="":b[a.sFilter]="",e[0].resetFilter(),r&&$(".ui-template",h).val("default"),$.extend(c.p.postData,b),$(c).triggerHandler("jqGridFilterReset"),$.isFunction(a.onReset)&&a.onReset.call(c),$(c).trigger("reloadGrid",[{page:1}]),!1}),b($("#"+d)),$(".fm-button:not(.ui-state-disabled)",h).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})}}})},editGridRow:function(b,c){return c=$.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},$.jgrid.edit,c||{}),a[$(this)[0].p.id]=c,this.each(function(){function d(){return $(w+" > tbody > tr > td > .FormElement").each(function(){var a=$(".customelement",this);if(a.length){var b=a[0],c=$(b).attr("name");$.each(n.p.colModel,function(){if(this.name===c&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{if(o[c]=this.editoptions.custom_value.call(n,$("#"+$.jgrid.jqID(c),w),"get"),void 0===o[c])throw"e1"}catch(a){"e1"===a?$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,a.message,jQuery.jgrid.edit.bClose)}return!0}})}else{switch($(this).get(0).type){case"checkbox":if($(this).is(":checked"))o[this.name]=$(this).val();else{var d=$(this).attr("offval");o[this.name]=d}break;case"select-one":o[this.name]=$("option:selected",this).val(),p[this.name]=$("option:selected",this).text();break;case"select-multiple":o[this.name]=$(this).val(),o[this.name]?o[this.name]=o[this.name].join(","):o[this.name]="";var e=[];$("option:selected",this).each(function(a,b){e[a]=$(b).text()}),p[this.name]=e.join(",");break;case"password":case"text":case"textarea":case"button":o[this.name]=$(this).val()}n.p.autoencode&&(o[this.name]=$.jgrid.htmlEncode(o[this.name]))}}),!0}function e(b,c,d,e){var f,g,h,i,j,k,l,m=0,o=[],p=!1,q="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",r="";for(l=1;e>=l;l++)r+=q;if("_empty"!=b&&(p=$(c).jqGrid("getInd",b)),$(c.p.colModel).each(function(l){if(f=this.name,g=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,j=g?"style='display:none'":"","cb"!==f&&"subgrid"!==f&&this.editable===!0&&"rn"!==f){if(p===!1)i="";else if(f==c.p.ExpandColumn&&c.p.treeGrid===!0)i=$("td[role='gridcell']:eq("+l+")",c.rows[p]).text();else{try{i=$.unformat.call(c,$("td[role='gridcell']:eq("+l+")",c.rows[p]),{rowId:b,colModel:this},l)}catch(_){i=this.edittype&&"textarea"==this.edittype?$("td[role='gridcell']:eq("+l+")",c.rows[p]).text():$("td[role='gridcell']:eq("+l+")",c.rows[p]).html()}(!i||"&nbsp;"==i||"&#160;"==i||1==i.length&&160==i.charCodeAt(0))&&(i="")}var q=$.extend({},this.editoptions||{},{id:f,name:f}),s=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),t=parseInt(s.rowpos,10)||m+1,u=parseInt(2*(parseInt(s.colpos,10)||1),10);if("_empty"==b&&q.defaultValue&&(i=$.isFunction(q.defaultValue)?q.defaultValue.call(n):q.defaultValue),this.edittype||(this.edittype="text"),n.p.autoencode&&(i=$.jgrid.htmlDecode(i)),k=$.jgrid.createEl.call(n,this.edittype,q,i,!1,$.extend({},$.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{})),""===i&&"checkbox"==this.edittype&&(i=$(k).attr("offval")),""===i&&"select"==this.edittype&&(i=$("option:eq(0)",k).text()),(a[n.p.id].checkOnSubmit||a[n.p.id].checkOnUpdate)&&(a[n.p.id]._savedData[f]=i),$(k).addClass("FormElement"),("text"==this.edittype||"textarea"==this.edittype)&&$(k).addClass("ui-widget-content ui-corner-all"),h=$(d).find("tr[rowpos="+t+"]"),s.rowabove){var v=$("<tr><td class='contentinfo' colspan='"+2*e+"'>"+s.rowcontent+"</td></tr>");$(d).append(v),v[0].rp=t}0===h.length&&(h=$("<tr "+j+" rowpos='"+t+"'></tr>").addClass("FormData").attr("id","tr_"+f),$(h).append(r),$(d).append(h),h[0].rp=t),$("td:eq("+(u-2)+")",h[0]).html("undefined"==typeof s.label?c.p.colNames[l]:s.label),$("td:eq("+(u-1)+")",h[0]).append(s.elmprefix).append(k).append(s.elmsuffix),o[m]=l,m++}}),m>0){var s=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+c.p.id+"_id' value='"+b+"'/></td></tr>");s[0].rp=m+999,$(d).append(s),(a[n.p.id].checkOnSubmit||a[n.p.id].checkOnUpdate)&&(a[n.p.id]._savedData[c.p.id+"_id"]=b)}return o}function f(b,c,d){var e,f,g,h,i,j,k=0;(a[n.p.id].checkOnSubmit||a[n.p.id].checkOnUpdate)&&(a[n.p.id]._savedData={},a[n.p.id]._savedData[c.p.id+"_id"]=b);var l=c.p.colModel;if("_empty"==b)return $(l).each(function(){e=this.name,h=$.extend({},this.editoptions||{}),g=$("#"+$.jgrid.jqID(e),"#"+d),g&&g.length&&null!==g[0]&&(i="",h.defaultValue?(i=$.isFunction(h.defaultValue)?h.defaultValue.call(n):h.defaultValue,"checkbox"==g[0].type?(j=i.toLowerCase(),j.search(/(false|0|no|off|undefined)/i)<0&&""!==j?(g[0].checked=!0,g[0].defaultChecked=!0,g[0].value=i):(g[0].checked=!1,g[0].defaultChecked=!1)):g.val(i)):"checkbox"==g[0].type?(g[0].checked=!1,g[0].defaultChecked=!1,i=$(g).attr("offval")):g[0].type&&"select"==g[0].type.substr(0,6)?g[0].selectedIndex=0:g.val(i),(a[n.p.id].checkOnSubmit===!0||a[n.p.id].checkOnUpdate)&&(a[n.p.id]._savedData[e]=i))}),void $("#id_g","#"+d).val(b);var m=$(c).jqGrid("getInd",b,!0);m&&($('td[role="gridcell"]',m).each(function(g){if(e=l[g].name,"cb"!==e&&"subgrid"!==e&&"rn"!==e&&l[g].editable===!0){if(e==c.p.ExpandColumn&&c.p.treeGrid===!0)f=$(this).text();else try{f=$.unformat.call(c,$(this),{rowId:b,colModel:l[g]},g)}catch(_){f="textarea"==l[g].edittype?$(this).text():$(this).html()}switch(n.p.autoencode&&(f=$.jgrid.htmlDecode(f)),(a[n.p.id].checkOnSubmit===!0||a[n.p.id].checkOnUpdate)&&(a[n.p.id]._savedData[e]=f),e=$.jgrid.jqID(e),l[g].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"==f||"&#160;"==f||1==f.length&&160==f.charCodeAt(0))&&(f=""),$("#"+e,"#"+d).val(f);break;case"select":var h=f.split(",");h=$.map(h,function(a){return $.trim(a)}),$("#"+e+" option","#"+d).each(function(){l[g].editoptions.multiple||$.trim(f)!=$.trim($(this).text())&&h[0]!=$.trim($(this).text())&&h[0]!=$.trim($(this).val())?l[g].editoptions.multiple&&($.inArray($.trim($(this).text()),h)>-1||$.inArray($.trim($(this).val()),h)>-1)?this.selected=!0:this.selected=!1:this.selected=!0});break;case"checkbox":if(f+="",l[g].editoptions&&l[g].editoptions.value){var i=l[g].editoptions.value.split(":");i[0]==f?($("#"+e,"#"+d)[n.p.useProp?"prop":"attr"]("checked",!0),$("#"+e,"#"+d)[n.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+e,"#"+d)[n.p.useProp?"prop":"attr"]("checked",!1),$("#"+e,"#"+d)[n.p.useProp?"prop":"attr"]("defaultChecked",!1))}else f=f.toLowerCase(),f.search(/(false|0|no|off|undefined)/i)<0&&""!==f?($("#"+e,"#"+d)[n.p.useProp?"prop":"attr"]("checked",!0),$("#"+e,"#"+d)[n.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+e,"#"+d)[n.p.useProp?"prop":"attr"]("checked",!1),$("#"+e,"#"+d)[n.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case"custom":try{if(!l[g].editoptions||!$.isFunction(l[g].editoptions.custom_value))throw"e1";l[g].editoptions.custom_value.call(n,$("#"+e,"#"+d),"set",f)}catch(j){"e1"==j?$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,j.message,jQuery.jgrid.edit.bClose);
}}k++}}),k>0&&$("#id_g",w).val(b))}function g(){$.each(n.p.colModel,function(a,b){b.editoptions&&b.editoptions.NullIfEmpty===!0&&o.hasOwnProperty(b.name)&&""===o[b.name]&&(o[b.name]="null")})}function h(){var b,d,e,h,i,j,k=[!0,"",""],l={},m=n.p.prmNames,q=$(n).triggerHandler("jqGridAddEditBeforeCheckValues",[$("#"+u),s]);q&&"object"==typeof q&&(o=q),$.isFunction(a[n.p.id].beforeCheckValues)&&(q=a[n.p.id].beforeCheckValues.call(n,o,$("#"+u),"_empty"==o[n.p.id+"_id"]?m.addoper:m.editoper),q&&"object"==typeof q&&(o=q));for(h in o)if(o.hasOwnProperty(h)&&(k=$.jgrid.checkValues.call(n,o[h],h,n),k[0]===!1))break;if(g(),k[0]&&(l=$(n).triggerHandler("jqGridAddEditClickSubmit",[a[n.p.id],o,s]),void 0===l&&$.isFunction(a[n.p.id].onclickSubmit)&&(l=a[n.p.id].onclickSubmit.call(n,a[n.p.id],o)||{}),k=$(n).triggerHandler("jqGridAddEditBeforeSubmit",[o,$("#"+u),s]),void 0===k&&(k=[!0,"",""]),k[0]&&$.isFunction(a[n.p.id].beforeSubmit)&&(k=a[n.p.id].beforeSubmit.call(n,o,$("#"+u)))),k[0]&&!a[n.p.id].processing){if(a[n.p.id].processing=!0,$("#sData",w+"_2").addClass("ui-state-active"),e=m.oper,d=m.id,o[e]="_empty"==$.trim(o[n.p.id+"_id"])?m.addoper:m.editoper,o[e]!=m.addoper?o[d]=o[n.p.id+"_id"]:void 0===o[d]&&(o[d]=o[n.p.id+"_id"]),delete o[n.p.id+"_id"],o=$.extend(o,a[n.p.id].editData,l),n.p.treeGrid===!0){if(o[e]==m.addoper){i=$(n).jqGrid("getGridParam","selrow");var r="adjacency"==n.p.treeGridModel?n.p.treeReader.parent_id_field:"parent_id";o[r]=i}for(j in n.p.treeReader)if(n.p.treeReader.hasOwnProperty(j)){var v=n.p.treeReader[j];if(o.hasOwnProperty(v)){if(o[e]==m.addoper&&"parent_id_field"===j)continue;delete o[v]}}}o[d]=$.jgrid.stripPref(n.p.idPrefix,o[d]);var y=$.extend({url:a[n.p.id].url?a[n.p.id].url:$(n).jqGrid("getGridParam","editurl"),type:a[n.p.id].mtype,data:$.isFunction(a[n.p.id].serializeEditData)?a[n.p.id].serializeEditData.call(n,o):o,complete:function(g,h){if(o[d]=n.p.idPrefix+o[d],"success"!=h?(k[0]=!1,k[1]=$(n).triggerHandler("jqGridAddEditErrorTextFormat",[g,s]),$.isFunction(a[n.p.id].errorTextFormat)?k[1]=a[n.p.id].errorTextFormat.call(n,g):k[1]=h+" Status: '"+g.statusText+"'. Error code: "+g.status):(k=$(n).triggerHandler("jqGridAddEditAfterSubmit",[g,o,s]),void 0===k&&(k=[!0,"",""]),k[0]&&$.isFunction(a[n.p.id].afterSubmit)&&(k=a[n.p.id].afterSubmit.call(n,g,o))),k[0]===!1)$("#FormError>td",w).html(k[1]),$("#FormError",w).show();else if($.each(n.p.colModel,function(){if(p[this.name]&&this.formatter&&"select"==this.formatter)try{delete p[this.name]}catch(a){}}),o=$.extend(o,p),n.p.autoencode&&$.each(o,function(a,b){o[a]=$.jgrid.htmlDecode(b)}),o[e]==m.addoper?(k[2]||(k[2]=$.jgrid.randId()),o[d]=k[2],a[n.p.id].closeAfterAdd?(a[n.p.id].reloadAfterSubmit?$(n).trigger("reloadGrid"):n.p.treeGrid===!0?$(n).jqGrid("addChildNode",k[2],i,o):($(n).jqGrid("addRowData",k[2],o,c.addedrow),$(n).jqGrid("setSelection",k[2])),$.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose})):a[n.p.id].clearAfterAdd?(a[n.p.id].reloadAfterSubmit?$(n).trigger("reloadGrid"):n.p.treeGrid===!0?$(n).jqGrid("addChildNode",k[2],i,o):$(n).jqGrid("addRowData",k[2],o,c.addedrow),f("_empty",n,u)):a[n.p.id].reloadAfterSubmit?$(n).trigger("reloadGrid"):n.p.treeGrid===!0?$(n).jqGrid("addChildNode",k[2],i,o):$(n).jqGrid("addRowData",k[2],o,c.addedrow)):(a[n.p.id].reloadAfterSubmit?($(n).trigger("reloadGrid"),a[n.p.id].closeAfterEdit||setTimeout(function(){$(n).jqGrid("setSelection",o[d])},1e3)):n.p.treeGrid===!0?$(n).jqGrid("setTreeRow",o[d],o):$(n).jqGrid("setRowData",o[d],o),a[n.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose})),$.isFunction(a[n.p.id].afterComplete)&&(b=g,setTimeout(function(){$(n).triggerHandler("jqGridAddEditAfterComplete",[b,o,$("#"+u),s]),a[n.p.id].afterComplete.call(n,b,o,$("#"+u)),b=null},500)),(a[n.p.id].checkOnSubmit||a[n.p.id].checkOnUpdate)&&($("#"+u).data("disabled",!1),"_empty"!=a[n.p.id]._savedData[n.p.id+"_id"]))for(var j in a[n.p.id]._savedData)o[j]&&(a[n.p.id]._savedData[j]=o[j]);a[n.p.id].processing=!1,$("#sData",w+"_2").removeClass("ui-state-active");try{$(":input:visible","#"+u)[0].focus()}catch(l){}}},$.jgrid.ajaxOptions,a[n.p.id].ajaxEditOptions);if(y.url||a[n.p.id].useDataProxy||($.isFunction(n.p.dataProxy)?a[n.p.id].useDataProxy=!0:(k[0]=!1,k[1]+=" "+$.jgrid.errors.nourl)),k[0])if(a[n.p.id].useDataProxy){var z=n.p.dataProxy.call(n,y,"set_"+n.p.id);"undefined"==typeof z&&(z=[!0,""]),z[0]===!1?(k[0]=!1,k[1]=z[1]||"Error deleting the selected row!"):(y.data.oper==m.addoper&&a[n.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose}),y.data.oper==m.editoper&&a[n.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose}))}else $.ajax(y)}k[0]===!1&&($("#FormError>td",w).html(k[1]),$("#FormError",w).show())}function i(a,b){var c,d=!1;for(c in a)if(a[c]!=b[c]){d=!0;break}return d}function j(){var b=!0;return $("#FormError",w).hide(),a[n.p.id].checkOnUpdate&&(o={},p={},d(),q=$.extend({},o,p),r=i(q,a[n.p.id]._savedData),r&&($("#"+u).data("disabled",!0),$(".confirm","#"+x.themodal).show(),b=!1)),b}function k(){if("_empty"!==b&&"undefined"!=typeof n.p.savedRow&&n.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow))for(var a=0;a<n.p.savedRow.length;a++)if(n.p.savedRow[a].id==b){$(n).jqGrid("restoreRow",b);break}}function l(a,b){0===a?$("#pData",w+"_2").addClass("ui-state-disabled"):$("#pData",w+"_2").removeClass("ui-state-disabled"),a==b?$("#nData",w+"_2").addClass("ui-state-disabled"):$("#nData",w+"_2").removeClass("ui-state-disabled")}function m(){var a=$(n).jqGrid("getDataIDs"),b=$("#id_g",w).val(),c=$.inArray(b,a);return[c,a]}var n=this;if(n.grid&&b){var o,p,q,r,s,t=n.p.id,u="FrmGrid_"+t,v="TblGrid_"+t,w="#"+$.jgrid.jqID(v),x={themodal:"editmod"+t,modalhead:"edithd"+t,modalcontent:"editcnt"+t,scrollelm:u},y=$.isFunction(a[n.p.id].beforeShowForm)?a[n.p.id].beforeShowForm:!1,z=$.isFunction(a[n.p.id].afterShowForm)?a[n.p.id].afterShowForm:!1,A=$.isFunction(a[n.p.id].beforeInitData)?a[n.p.id].beforeInitData:!1,B=$.isFunction(a[n.p.id].onInitializeForm)?a[n.p.id].onInitializeForm:!1,C=!0,D=1,E=0;u=$.jgrid.jqID(u),"new"===b?(b="_empty",s="add",c.caption=a[n.p.id].addCaption):(c.caption=a[n.p.id].editCaption,s="edit"),c.recreateForm===!0&&void 0!==$("#"+$.jgrid.jqID(x.themodal))[0]&&$("#"+$.jgrid.jqID(x.themodal)).remove();var F=!0;if(c.checkOnUpdate&&c.jqModal&&!c.modal&&(F=!1),void 0!==$("#"+$.jgrid.jqID(x.themodal))[0]){if(C=$(n).triggerHandler("jqGridAddEditBeforeInitData",[$("#"+$.jgrid.jqID(u)),s]),"undefined"==typeof C&&(C=!0),C&&A&&(C=A.call(n,$("#"+u))),C===!1)return;k(),$(".ui-jqdialog-title","#"+$.jgrid.jqID(x.modalhead)).html(c.caption),$("#FormError",w).hide(),a[n.p.id].topinfo?($(".topinfo",w).html(a[n.p.id].topinfo),$(".tinfo",w).show()):$(".tinfo",w).hide(),a[n.p.id].bottominfo?($(".bottominfo",w+"_2").html(a[n.p.id].bottominfo),$(".binfo",w+"_2").show()):$(".binfo",w+"_2").hide(),f(b,n,u),"_empty"!=b&&a[n.p.id].viewPagerButtons?$("#pData, #nData",w+"_2").show():$("#pData, #nData",w+"_2").hide(),a[n.p.id].processing===!0&&(a[n.p.id].processing=!1,$("#sData",w+"_2").removeClass("ui-state-active")),$("#"+u).data("disabled")===!0&&($(".confirm","#"+$.jgrid.jqID(x.themodal)).hide(),$("#"+u).data("disabled",!1)),$(n).triggerHandler("jqGridAddEditBeforeShowForm",[$("#"+u),s]),y&&y.call(n,$("#"+u)),$("#"+$.jgrid.jqID(x.themodal)).data("onClose",a[n.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(x.themodal),{gbox:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,jqM:!1,overlay:c.overlay,modal:c.modal}),F||$(".jqmOverlay").click(function(){return j()?($.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose}),!1):!1}),$(n).triggerHandler("jqGridAddEditAfterShowForm",[$("#"+u),s]),z&&z.call(n,$("#"+u))}else{var G=isNaN(c.dataheight)?c.dataheight:c.dataheight+"px",H=$("<form name='FormPost' id='"+u+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+G+";'></form>").data("disabled",!1),I=$("<table id='"+v+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(C=$(n).triggerHandler("jqGridAddEditBeforeInitData",[$("#"+u),s]),"undefined"==typeof C&&(C=!0),C&&A&&(C=A.call(n,$("#"+u))),C===!1)return;k(),$(n.p.colModel).each(function(){var a=this.formoptions;D=Math.max(D,a?a.colpos||0:0),E=Math.max(E,a?a.rowpos||0:0)}),$(H).append(I);var J=$("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*D+"'></td></tr>");J[0].rp=0,$(I).append(J),J=$("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*D+"'>"+a[n.p.id].topinfo+"</td></tr>"),J[0].rp=0,$(I).append(J);var K="rtl"==n.p.direction?!0:!1,L=K?"nData":"pData",M=K?"pData":"nData";e(b,n,I,D);var N="<a href='javascript:void(0)' id='"+L+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",O="<a href='javascript:void(0)' id='"+M+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",P="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+c.bSubmit+"</a>",Q="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+c.bCancel+"</a>",R="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+v+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(K?O+N:N+O)+"</td><td class='EditButton'>"+P+Q+"</td></tr>";if(R+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+a[n.p.id].bottominfo+"</td></tr>",R+="</tbody></table>",E>0){var S=[];$.each($(I)[0].rows,function(a,b){S[a]=b}),S.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),$.each(S,function(a,b){$("tbody",I).append(b)})}c.gbox="#gbox_"+$.jgrid.jqID(t);var T=!1;c.closeOnEscape===!0&&(c.closeOnEscape=!1,T=!0);var U=$("<span></span>").append(H).append(R);if($.jgrid.createModal(x,U,c,"#gview_"+$.jgrid.jqID(n.p.id),$("#gbox_"+$.jgrid.jqID(n.p.id))[0]),K&&($("#pData, #nData",w+"_2").css("float","right"),$(".EditButton",w+"_2").css("text-align","left")),a[n.p.id].topinfo&&$(".tinfo",w).show(),a[n.p.id].bottominfo&&$(".binfo",w+"_2").show(),U=null,R=null,$("#"+$.jgrid.jqID(x.themodal)).keydown(function(b){var d=b.target;if($("#"+u).data("disabled")===!0)return!1;if(a[n.p.id].savekey[0]===!0&&b.which==a[n.p.id].savekey[1]&&"TEXTAREA"!=d.tagName)return $("#sData",w+"_2").trigger("click"),!1;if(27===b.which)return j()?(T&&$.jgrid.hideModal(this,{gb:c.gbox,jqm:c.jqModal,onClose:a[n.p.id].onClose}),!1):!1;if(a[n.p.id].navkeys[0]===!0){if("_empty"==$("#id_g",w).val())return!0;if(b.which==a[n.p.id].navkeys[1])return $("#pData",w+"_2").trigger("click"),!1;if(b.which==a[n.p.id].navkeys[2])return $("#nData",w+"_2").trigger("click"),!1}}),c.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(x.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(x.themodal)).unbind("click").click(function(){return j()?($.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose}),!1):!1})),c.saveicon=$.extend([!0,"left","ui-icon-disk"],c.saveicon),c.closeicon=$.extend([!0,"left","ui-icon-close"],c.closeicon),c.saveicon[0]===!0&&$("#sData",w+"_2").addClass("right"==c.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.saveicon[2]+"'></span>"),c.closeicon[0]===!0&&$("#cData",w+"_2").addClass("right"==c.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.closeicon[2]+"'></span>"),a[n.p.id].checkOnSubmit||a[n.p.id].checkOnUpdate){P="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+c.bYes+"</a>",O="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+c.bNo+"</a>",Q="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+c.bExit+"</a>";var V,W=c.zIndex||999;W++,V=$.browser.msie&&6==$.browser.version?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",$("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+W+";display:none;'>&#160;"+V+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(W+1)+"'>"+c.saveData+"<br/><br/>"+P+O+Q+"</div>").insertAfter("#"+u),$("#sNew","#"+$.jgrid.jqID(x.themodal)).click(function(){return h(),$("#"+u).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(x.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(x.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(x.themodal)).hide(),$("#"+u).data("disabled",!1),setTimeout(function(){$(":input","#"+u)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(x.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(x.themodal)).hide(),$("#"+u).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose}),!1})}$(n).triggerHandler("jqGridAddEditInitializeForm",[$("#"+u),s]),B&&B.call(n,$("#"+u)),"_empty"!=b&&a[n.p.id].viewPagerButtons?$("#pData,#nData",w+"_2").show():$("#pData,#nData",w+"_2").hide(),$(n).triggerHandler("jqGridAddEditBeforeShowForm",[$("#"+u),s]),y&&y.call(n,$("#"+u)),$("#"+$.jgrid.jqID(x.themodal)).data("onClose",a[n.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(x.themodal),{gbox:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,overlay:c.overlay,modal:c.modal}),F||$(".jqmOverlay").click(function(){return j()?($.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose}),!1):!1}),$(n).triggerHandler("jqGridAddEditAfterShowForm",[$("#"+u),s]),z&&z.call(n,$("#"+u)),$(".fm-button","#"+$.jgrid.jqID(x.themodal)).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),$("#sData",w+"_2").click(function(){return o={},p={},$("#FormError",w).hide(),d(),"_empty"==o[n.p.id+"_id"]?h():c.checkOnSubmit===!0?(q=$.extend({},o,p),r=i(q,a[n.p.id]._savedData),r?($("#"+u).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(x.themodal)).show()):h()):h(),!1}),$("#cData",w+"_2").click(function(){return j()?($.jgrid.hideModal("#"+$.jgrid.jqID(x.themodal),{gb:"#gbox_"+$.jgrid.jqID(t),jqm:c.jqModal,onClose:a[n.p.id].onClose}),!1):!1}),$("#nData",w+"_2").click(function(){if(!j())return!1;$("#FormError",w).hide();var a=m();if(a[0]=parseInt(a[0],10),-1!=a[0]&&a[1][a[0]+1]){$(n).triggerHandler("jqGridAddEditClickPgButtons",["next",$("#"+u),a[1][a[0]]]);var b=!0;if($.isFunction(c.onclickPgButtons)&&(b=c.onclickPgButtons.call(n,"next",$("#"+u),a[1][a[0]]),void 0!==b&&b===!1))return!1;if($("#"+$.jgrid.jqID(a[1][a[0]+1])).hasClass("ui-state-disabled"))return!1;f(a[1][a[0]+1],n,u),$(n).jqGrid("setSelection",a[1][a[0]+1]),$(n).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$("#"+u),a[1][a[0]]]),$.isFunction(c.afterclickPgButtons)&&c.afterclickPgButtons.call(n,"next",$("#"+u),a[1][a[0]+1]),l(a[0]+1,a[1].length-1)}return!1}),$("#pData",w+"_2").click(function(){if(!j())return!1;$("#FormError",w).hide();var a=m();if(-1!=a[0]&&a[1][a[0]-1]){$(n).triggerHandler("jqGridAddEditClickPgButtons",["prev",$("#"+u),a[1][a[0]]]);var b=!0;if($.isFunction(c.onclickPgButtons)&&(b=c.onclickPgButtons.call(n,"prev",$("#"+u),a[1][a[0]]),void 0!==b&&b===!1))return!1;if($("#"+$.jgrid.jqID(a[1][a[0]-1])).hasClass("ui-state-disabled"))return!1;f(a[1][a[0]-1],n,u),$(n).jqGrid("setSelection",a[1][a[0]-1]),$(n).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$("#"+u),a[1][a[0]]]),$.isFunction(c.afterclickPgButtons)&&c.afterclickPgButtons.call(n,"prev",$("#"+u),a[1][a[0]-1]),l(a[0]-1,a[1].length-1)}return!1})}var X=m();l(X[0],X[1].length-1)}})},viewGridRow:function(b,c){return c=$.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0},$.jgrid.view,c||{}),a[$(this)[0].p.id]=c,this.each(function(){function d(){(a[i.p.id].closeOnEscape===!0||a[i.p.id].navkeys[0]===!0)&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(o.modalhead)).focus()},0)}function e(a,b,d,e){for(var f,g,h,i,j,k,l,m,n=0,o=[],p=!1,q="<td class='CaptionTD form-view-label ui-widget-content' width='"+c.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",r="",s="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",t=["integer","number","currency"],u=0,v=0,w=1;e>=w;w++)r+=1==w?q:s;if($(b.p.colModel).each(function(){g=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,g||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,t)?u=Math.max(u,parseInt(this.width,10)):v=Math.max(v,parseInt(this.width,10)))}),k=0!==u?u:0!==v?v:0,p=$(b).jqGrid("getInd",a),$(b.p.colModel).each(function(a){if(f=this.name,l=!1,g=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,j=g?"style='display:none'":"",m="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==f&&"subgrid"!==f&&"rn"!==f&&m){i=p===!1?"":f==b.p.ExpandColumn&&b.p.treeGrid===!0?$("td:eq("+a+")",b.rows[p]).text():$("td:eq("+a+")",b.rows[p]).html(),l="right"===this.align&&0!==k?!0:!1;var c=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),q=parseInt(c.rowpos,10)||n+1,s=parseInt(2*(parseInt(c.colpos,10)||1),10);if(c.rowabove){var t=$("<tr><td class='contentinfo' colspan='"+2*e+"'>"+c.rowcontent+"</td></tr>");$(d).append(t),t[0].rp=q}h=$(d).find("tr[rowpos="+q+"]"),0===h.length&&(h=$("<tr "+j+" rowpos='"+q+"'></tr>").addClass("FormData").attr("id","trv_"+f),$(h).append(r),$(d).append(h),h[0].rp=q),$("td:eq("+(s-2)+")",h[0]).html("<b>"+("undefined"==typeof c.label?b.p.colNames[a]:c.label)+"</b>"),$("td:eq("+(s-1)+")",h[0]).append("<span>"+i+"</span>").attr("id","v_"+f),l&&$("td:eq("+(s-1)+") span",h[0]).css({"text-align":"right",width:k+"px"}),o[n]=a,n++}}),n>0){var x=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+a+"'/></td></tr>");x[0].rp=n+99,$(d).append(x)}return o}function f(a,b){var c,d,e,f,g,h=0;g=$(b).jqGrid("getInd",a,!0),g&&($("td",g).each(function(a){c=b.p.colModel[a].name,d=b.p.colModel[a].editrules&&b.p.colModel[a].editrules.edithidden===!0?!1:b.p.colModel[a].hidden===!0?!0:!1,"cb"!==c&&"subgrid"!==c&&"rn"!==c&&(e=c==b.p.ExpandColumn&&b.p.treeGrid===!0?$(this).text():$(this).html(),f=$.extend({},b.p.colModel[a].editoptions||{}),c=$.jgrid.jqID("v_"+c),$("#"+c+" span","#"+l).html(e),d&&$("#"+c,"#"+l).parents("tr:first").hide(),h++)}),h>0&&$("#id_g","#"+l).val(a))}function g(a,b){0===a?$("#pData","#"+l+"_2").addClass("ui-state-disabled"):$("#pData","#"+l+"_2").removeClass("ui-state-disabled"),a==b?$("#nData","#"+l+"_2").addClass("ui-state-disabled"):$("#nData","#"+l+"_2").removeClass("ui-state-disabled")}function h(){var a=$(i).jqGrid("getDataIDs"),b=$("#id_g","#"+l).val(),c=$.inArray(b,a);return[c,a]}var i=this;if(i.grid&&b){var j=i.p.id,k="ViewGrid_"+$.jgrid.jqID(j),l="ViewTbl_"+$.jgrid.jqID(j),m="ViewGrid_"+j,n="ViewTbl_"+j,o={themodal:"viewmod"+j,modalhead:"viewhd"+j,modalcontent:"viewcnt"+j,scrollelm:k},p=$.isFunction(a[i.p.id].beforeInitData)?a[i.p.id].beforeInitData:!1,q=!0,r=1,s=0;if(void 0!==$("#"+$.jgrid.jqID(o.themodal))[0]){if(p&&(q=p.call(i,$("#"+k)),"undefined"==typeof q&&(q=!0)),q===!1)return;$(".ui-jqdialog-title","#"+$.jgrid.jqID(o.modalhead)).html(c.caption),$("#FormError","#"+l).hide(),f(b,i),$.isFunction(a[i.p.id].beforeShowForm)&&a[i.p.id].beforeShowForm.call(i,$("#"+k)),$.jgrid.viewModal("#"+$.jgrid.jqID(o.themodal),{gbox:"#gbox_"+$.jgrid.jqID(j),jqm:c.jqModal,jqM:!1,overlay:c.overlay,modal:c.modal}),d()}else{var t=isNaN(c.dataheight)?c.dataheight:c.dataheight+"px",u=$("<form name='FormPost' id='"+m+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+t+";'></form>"),v=$("<table id='"+n+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(p&&(q=p.call(i,$("#"+k)),"undefined"==typeof q&&(q=!0)),q===!1)return;$(i.p.colModel).each(function(){var a=this.formoptions;r=Math.max(r,a?a.colpos||0:0),s=Math.max(s,a?a.rowpos||0:0)}),$(u).append(v),e(b,i,v,r);var w="rtl"==i.p.direction?!0:!1,x=w?"nData":"pData",y=w?"pData":"nData",z="<a href='javascript:void(0)' id='"+x+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",A="<a href='javascript:void(0)' id='"+y+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",B="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+c.bClose+"</a>";if(s>0){var C=[];$.each($(v)[0].rows,function(a,b){C[a]=b}),C.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),$.each(C,function(a,b){$("tbody",v).append(b)})}c.gbox="#gbox_"+$.jgrid.jqID(j);var D=$("<span></span>").append(u).append("<table border='0' class='EditTable' id='"+l+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+c.labelswidth+"'>"+(w?A+z:z+A)+"</td><td class='EditButton'>"+B+"</td></tr></tbody></table>");$.jgrid.createModal(o,D,c,"#gview_"+$.jgrid.jqID(i.p.id),$("#gview_"+$.jgrid.jqID(i.p.id))[0]),w&&($("#pData, #nData","#"+l+"_2").css("float","right"),$(".EditButton","#"+l+"_2").css("text-align","left")),c.viewPagerButtons||$("#pData, #nData","#"+l+"_2").hide(),D=null,$("#"+o.themodal).keydown(function(b){if(27===b.which)return a[i.p.id].closeOnEscape&&$.jgrid.hideModal(this,{gb:c.gbox,jqm:c.jqModal,onClose:c.onClose}),!1;if(c.navkeys[0]===!0){if(b.which===c.navkeys[1])return $("#pData","#"+l+"_2").trigger("click"),!1;if(b.which===c.navkeys[2])return $("#nData","#"+l+"_2").trigger("click"),!1}}),c.closeicon=$.extend([!0,"left","ui-icon-close"],c.closeicon),c.closeicon[0]===!0&&$("#cData","#"+l+"_2").addClass("right"==c.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.closeicon[2]+"'></span>"),$.isFunction(c.beforeShowForm)&&c.beforeShowForm.call(i,$("#"+k)),$.jgrid.viewModal("#"+$.jgrid.jqID(o.themodal),{gbox:"#gbox_"+$.jgrid.jqID(j),jqm:c.jqModal,modal:c.modal}),$(".fm-button:not(.ui-state-disabled)","#"+l+"_2").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),d(),$("#cData","#"+l+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(o.themodal),{gb:"#gbox_"+$.jgrid.jqID(j),jqm:c.jqModal,onClose:c.onClose}),!1}),$("#nData","#"+l+"_2").click(function(){$("#FormError","#"+l).hide();var a=h();return a[0]=parseInt(a[0],10),-1!=a[0]&&a[1][a[0]+1]&&($.isFunction(c.onclickPgButtons)&&c.onclickPgButtons.call(i,"next",$("#"+k),a[1][a[0]]),f(a[1][a[0]+1],i),$(i).jqGrid("setSelection",a[1][a[0]+1]),$.isFunction(c.afterclickPgButtons)&&c.afterclickPgButtons.call(i,"next",$("#"+k),a[1][a[0]+1]),g(a[0]+1,a[1].length-1)),d(),!1}),$("#pData","#"+l+"_2").click(function(){$("#FormError","#"+l).hide();var a=h();return-1!=a[0]&&a[1][a[0]-1]&&($.isFunction(c.onclickPgButtons)&&c.onclickPgButtons.call(i,"prev",$("#"+k),a[1][a[0]]),f(a[1][a[0]-1],i),$(i).jqGrid("setSelection",a[1][a[0]-1]),$.isFunction(c.afterclickPgButtons)&&c.afterclickPgButtons.call(i,"prev",$("#"+k),a[1][a[0]-1]),g(a[0]-1,a[1].length-1)),d(),!1})}var E=h();g(E[0],E[1].length-1)}})},delGridRow:function(b,c){return c=$.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},$.jgrid.del,c||{}),a[$(this)[0].p.id]=c,this.each(function(){var d=this;if(d.grid&&b){var e,f,g,h,i=$.isFunction(a[d.p.id].beforeShowForm),j=$.isFunction(a[d.p.id].afterShowForm),k=$.isFunction(a[d.p.id].beforeInitData)?a[d.p.id].beforeInitData:!1,l=d.p.id,m={},n=!0,o="DelTbl_"+$.jgrid.jqID(l),p="DelTbl_"+l,q={themodal:"delmod"+l,modalhead:"delhd"+l,modalcontent:"delcnt"+l,scrollelm:o};if(jQuery.isArray(b)&&(b=b.join()),void 0!==$("#"+$.jgrid.jqID(q.themodal))[0]){if(k&&(n=k.call(d,$("#"+o)),"undefined"==typeof n&&(n=!0)),n===!1)return;$("#DelData>td","#"+o).text(b),$("#DelError","#"+o).hide(),a[d.p.id].processing===!0&&(a[d.p.id].processing=!1,$("#dData","#"+o).removeClass("ui-state-active")),i&&a[d.p.id].beforeShowForm.call(d,$("#"+o)),$.jgrid.viewModal("#"+$.jgrid.jqID(q.themodal),{gbox:"#gbox_"+$.jgrid.jqID(l),jqm:a[d.p.id].jqModal,jqM:!1,overlay:a[d.p.id].overlay,modal:a[d.p.id].modal}),j&&a[d.p.id].afterShowForm.call(d,$("#"+o))}else{var r=isNaN(a[d.p.id].dataheight)?a[d.p.id].dataheight:a[d.p.id].dataheight+"px",s="<div id='"+p+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+r+";'>";s+="<table class='DelTable'><tbody>",s+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",s+="<tr id='DelData' style='display:none'><td >"+b+"</td></tr>",s+='<tr><td class="delmsg" style="white-space:pre;">'+a[d.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",s+="</tbody></table></div>";var t="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+c.bSubmit+"</a>",u="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+c.bCancel+"</a>";if(s+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+o+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+t+"&#160;"+u+"</td></tr></tbody></table>",c.gbox="#gbox_"+$.jgrid.jqID(l),$.jgrid.createModal(q,s,c,"#gview_"+$.jgrid.jqID(d.p.id),$("#gview_"+$.jgrid.jqID(d.p.id))[0]),k&&(n=k.call(d,$("#"+o)),"undefined"==typeof n&&(n=!0)),n===!1)return;$(".fm-button","#"+o+"_2").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),c.delicon=$.extend([!0,"left","ui-icon-scissors"],a[d.p.id].delicon),c.cancelicon=$.extend([!0,"left","ui-icon-cancel"],a[d.p.id].cancelicon),c.delicon[0]===!0&&$("#dData","#"+o+"_2").addClass("right"==c.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.delicon[2]+"'></span>"),c.cancelicon[0]===!0&&$("#eData","#"+o+"_2").addClass("right"==c.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+c.cancelicon[2]+"'></span>"),$("#dData","#"+o+"_2").click(function(){var b=[!0,""];m={};var i=$("#DelData>td","#"+o).text();if($.isFunction(a[d.p.id].onclickSubmit)&&(m=a[d.p.id].onclickSubmit.call(d,a[d.p.id],i)||{}),$.isFunction(a[d.p.id].beforeSubmit)&&(b=a[d.p.id].beforeSubmit.call(d,i)),b[0]&&!a[d.p.id].processing){if(a[d.p.id].processing=!0,g=d.p.prmNames,e=$.extend({},a[d.p.id].delData,m),h=g.oper,e[h]=g.deloper,f=g.id,i=String(i).split(","),!i.length)return!1;for(var j in i)i.hasOwnProperty(j)&&(i[j]=$.jgrid.stripPref(d.p.idPrefix,i[j]));e[f]=i.join(),$(this).addClass("ui-state-active");var k=$.extend({url:a[d.p.id].url?a[d.p.id].url:$(d).jqGrid("getGridParam","editurl"),type:a[d.p.id].mtype,data:$.isFunction(a[d.p.id].serializeDelData)?a[d.p.id].serializeDelData.call(d,e):e,complete:function(f,g){if("success"!=g?(b[0]=!1,$.isFunction(a[d.p.id].errorTextFormat)?b[1]=a[d.p.id].errorTextFormat.call(d,f):b[1]=g+" Status: '"+f.statusText+"'. Error code: "+f.status):$.isFunction(a[d.p.id].afterSubmit)&&(b=a[d.p.id].afterSubmit.call(d,f,e)),b[0]===!1)$("#DelError>td","#"+o).html(b[1]),$("#DelError","#"+o).show();else{if(a[d.p.id].reloadAfterSubmit&&"local"!=d.p.datatype)$(d).trigger("reloadGrid");else{if(d.p.treeGrid===!0)try{$(d).jqGrid("delTreeNode",d.p.idPrefix+i[0])}catch(h){}else for(var j=0;j<i.length;j++)$(d).jqGrid("delRowData",d.p.idPrefix+i[j]);d.p.selrow=null,d.p.selarrrow=[]}$.isFunction(a[d.p.id].afterComplete)&&setTimeout(function(){a[d.p.id].afterComplete.call(d,f,i)},500)}a[d.p.id].processing=!1,$("#dData","#"+o+"_2").removeClass("ui-state-active"),b[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(q.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:c.jqModal,onClose:a[d.p.id].onClose})}},$.jgrid.ajaxOptions,a[d.p.id].ajaxDelOptions);if(k.url||a[d.p.id].useDataProxy||($.isFunction(d.p.dataProxy)?a[d.p.id].useDataProxy=!0:(b[0]=!1,b[1]+=" "+$.jgrid.errors.nourl)),b[0])if(a[d.p.id].useDataProxy){var n=d.p.dataProxy.call(d,k,"del_"+d.p.id);"undefined"==typeof n&&(n=[!0,""]),n[0]===!1?(b[0]=!1,b[1]=n[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(q.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:c.jqModal,onClose:a[d.p.id].onClose})}else $.ajax(k)}return b[0]===!1&&($("#DelError>td","#"+o).html(b[1]),$("#DelError","#"+o).show()),!1}),$("#eData","#"+o+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(q.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:a[d.p.id].jqModal,onClose:a[d.p.id].onClose}),!1}),i&&a[d.p.id].beforeShowForm.call(d,$("#"+o)),$.jgrid.viewModal("#"+$.jgrid.jqID(q.themodal),{gbox:"#gbox_"+$.jgrid.jqID(l),jqm:a[d.p.id].jqModal,overlay:a[d.p.id].overlay,modal:a[d.p.id].modal}),j&&a[d.p.id].afterShowForm.call(d,$("#"+o))}a[d.p.id].closeOnEscape===!0&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(q.modalhead)).focus()},0)}})},navGrid:function(a,b,c,d,e,f,g){return b=$.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},$.jgrid.nav,b||{}),this.each(function(){if(!this.nav){var h,i,j={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},k=this;if(k.grid&&"string"==typeof a){void 0===$("#"+j.themodal)[0]&&(b.alerttop||b.alertleft||("undefined"!=typeof window.innerWidth?(b.alertleft=window.innerWidth,b.alerttop=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(b.alertleft=document.documentElement.clientWidth,b.alerttop=document.documentElement.clientHeight):(b.alertleft=1024,b.alerttop=768),b.alertleft=b.alertleft/2-parseInt(b.alertwidth,10)/2,b.alerttop=b.alerttop/2-25),$.jgrid.createModal(j,"<div>"+b.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID(k.p.id),jqModal:!0,drag:!0,resize:!0,caption:b.alertcap,top:b.alerttop,left:b.alertleft,width:b.alertwidth,height:b.alertheight,closeOnEscape:b.closeOnEscape,zIndex:b.alertzIndex},"#gview_"+$.jgrid.jqID(k.p.id),$("#gbox_"+$.jgrid.jqID(k.p.id))[0],!0));var l=1;b.cloneToTop&&k.p.toppager&&(l=2);for(var m=0;l>m;m++){var n,o,p,q=$("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),r="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";0===m?(o=a,p=k.p.id,o==k.p.toppager&&(p+="_top",
l=1)):(o=k.p.toppager,p=k.p.id+"_top"),"rtl"==k.p.direction&&$(q).attr("dir","rtl").css("float","right"),b.add&&(d=d||{},n=$("<td class='ui-pg-button ui-corner-all'></td>"),$(n).append("<div class='ui-pg-div'><span class='ui-icon "+b.addicon+"'></span>"+b.addtext+"</div>"),$("tr",q).append(n),$(n,q).attr({title:b.addtitle||"",id:d.id||"add_"+p}).click(function(){return $(this).hasClass("ui-state-disabled")||($.isFunction(b.addfunc)?b.addfunc.call(k):$(k).jqGrid("editGridRow","new",d)),!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n=null),b.edit&&(n=$("<td class='ui-pg-button ui-corner-all'></td>"),c=c||{},$(n).append("<div class='ui-pg-div'><span class='ui-icon "+b.editicon+"'></span>"+b.edittext+"</div>"),$("tr",q).append(n),$(n,q).attr({title:b.edittitle||"",id:c.id||"edit_"+p}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var a=k.p.selrow;a?$.isFunction(b.editfunc)?b.editfunc.call(k,a):$(k).jqGrid("editGridRow",a,c):($.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+$.jgrid.jqID(k.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n=null),b.view&&(n=$("<td class='ui-pg-button ui-corner-all'></td>"),g=g||{},$(n).append("<div class='ui-pg-div'><span class='ui-icon "+b.viewicon+"'></span>"+b.viewtext+"</div>"),$("tr",q).append(n),$(n,q).attr({title:b.viewtitle||"",id:g.id||"view_"+p}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var a=k.p.selrow;a?$.isFunction(b.viewfunc)?b.viewfunc.call(k,a):$(k).jqGrid("viewGridRow",a,g):($.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+$.jgrid.jqID(k.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n=null),b.del&&(n=$("<td class='ui-pg-button ui-corner-all'></td>"),e=e||{},$(n).append("<div class='ui-pg-div'><span class='ui-icon "+b.delicon+"'></span>"+b.deltext+"</div>"),$("tr",q).append(n),$(n,q).attr({title:b.deltitle||"",id:e.id||"del_"+p}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var a;k.p.multiselect?(a=k.p.selarrrow,0===a.length&&(a=null)):a=k.p.selrow,a?$.isFunction(b.delfunc)?b.delfunc.call(k,a):$(k).jqGrid("delGridRow",a,e):($.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+$.jgrid.jqID(k.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n=null),(b.add||b.edit||b.del||b.view)&&$("tr",q).append(r),b.search&&(n=$("<td class='ui-pg-button ui-corner-all'></td>"),f=f||{},$(n).append("<div class='ui-pg-div'><span class='ui-icon "+b.searchicon+"'></span>"+b.searchtext+"</div>"),$("tr",q).append(n),$(n,q).attr({title:b.searchtitle||"",id:f.id||"search_"+p}).click(function(){return $(this).hasClass("ui-state-disabled")||($.isFunction(b.searchfunc)?b.searchfunc.call(k,f):$(k).jqGrid("searchGrid",f)),!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),f.showOnLoad&&f.showOnLoad===!0&&$(n,q).click(),n=null),b.refresh&&(n=$("<td class='ui-pg-button ui-corner-all'></td>"),$(n).append("<div class='ui-pg-div'><span class='ui-icon "+b.refreshicon+"'></span>"+b.refreshtext+"</div>"),$("tr",q).append(n),$(n,q).attr({title:b.refreshtitle||"",id:"refresh_"+p}).click(function(){if(!$(this).hasClass("ui-state-disabled")){$.isFunction(b.beforeRefresh)&&b.beforeRefresh.call(k),k.p.search=!1;try{var a=k.p.id;k.p.postData.filters="",$("#fbox_"+$.jgrid.jqID(a)).jqFilter("resetFilter"),$.isFunction(k.clearToolbar)&&k.clearToolbar.call(k,!1)}catch(c){}switch(b.refreshstate){case"firstpage":$(k).trigger("reloadGrid",[{page:1}]);break;case"current":$(k).trigger("reloadGrid",[{current:!0}])}$.isFunction(b.afterRefresh)&&b.afterRefresh.call(k)}return!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n=null),i=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+i+";visibility:hidden;' ></div>"),h=$(q).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),$(o+"_"+b.position,o).append(q),k.p._nvtd&&(h>k.p._nvtd[0]&&($(o+"_"+b.position,o).width(h),k.p._nvtd[0]=h),k.p._nvtd[1]=h),i=null,h=null,q=null,this.nav=!0}}}})},navButtonAdd:function(a,b){return b=$.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},b||{}),this.each(function(){if(this.grid){"string"==typeof a&&0!==a.indexOf("#")&&(a="#"+$.jgrid.jqID(a));var c=$(".navtable",a)[0],d=this;if(c){if(b.id&&void 0!==$("#"+$.jgrid.jqID(b.id),c)[0])return;var e=$("<td></td>");"NONE"==b.buttonicon.toString().toUpperCase()?$(e).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+b.caption+"</div>"):$(e).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+b.buttonicon+"'></span>"+b.caption+"</div>"),b.id&&$(e).attr("id",b.id),"first"==b.position?0===c.rows[0].cells.length?$("tr",c).append(e):$("tr td:eq(0)",c).before(e):$("tr",c).append(e),$(e,c).attr("title",b.title||"").click(function(a){return $(this).hasClass("ui-state-disabled")||$.isFunction(b.onClickButton)&&b.onClickButton.call(d,a),!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(a,b){return b=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},b||{}),this.each(function(){if(this.grid){"string"==typeof a&&0!==a.indexOf("#")&&(a="#"+$.jgrid.jqID(a));var c=$(".navtable",a)[0];if(c){var d="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+b.sepclass+"'></span>"+b.sepcontent+"</td>";"first"===b.position?0===c.rows[0].cells.length?$("tr",c).append(d):$("tr td:eq(0)",c).before(d):$("tr",c).append(d)}}})},GridToForm:function(a,b){return this.each(function(){var c=this;if(c.grid){var d=$(c).jqGrid("getRowData",a);if(d)for(var e in d)$("[name="+$.jgrid.jqID(e)+"]",b).is("input:radio")||$("[name="+$.jgrid.jqID(e)+"]",b).is("input:checkbox")?$("[name="+$.jgrid.jqID(e)+"]",b).each(function(){$(this).val()==d[e]?$(this)[c.p.useProp?"prop":"attr"]("checked",!0):$(this)[c.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(e)+"]",b).val(d[e])}})},FormToGrid:function(a,b,c,d){return this.each(function(){var e=this;if(e.grid){c||(c="set"),d||(d="first");var f=$(b).serializeArray(),g={};$.each(f,function(a,b){g[b.name]=b.value}),"add"==c?$(e).jqGrid("addRowData",a,g,d):"set"==c&&$(e).jqGrid("setRowData",a,g)}})}})}(jQuery),function($){"use strict";$.jgrid.inlineEdit=$.jgrid.inlineEdit||{},$.jgrid.extend({editRow:function(a,b,c,d,e,f,g,h,i){var j={},k=$.makeArray(arguments).slice(1);return"object"===$.type(k[0])?j=k[0]:("undefined"!=typeof b&&(j.keys=b),$.isFunction(c)&&(j.oneditfunc=c),$.isFunction(d)&&(j.successfunc=d),"undefined"!=typeof e&&(j.url=e),"undefined"!=typeof f&&(j.extraparam=f),$.isFunction(g)&&(j.aftersavefunc=g),$.isFunction(h)&&(j.errorfunc=h),$.isFunction(i)&&(j.afterrestorefunc=i)),j=$.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},$.jgrid.inlineEdit,j),this.each(function(){var b,c,d,e,f,g=this,h=0,i=null,k={};g.grid&&(e=$(g).jqGrid("getInd",a,!0),e!==!1&&(d=$(e).attr("editable")||"0","0"!=d||$(e).hasClass("not-editable-row")||(f=g.p.colModel,$('td[role="gridcell"]',e).each(function(d){b=f[d].name;var e=g.p.treeGrid===!0&&b==g.p.ExpandColumn;if(e)c=$("span:first",this).html();else try{c=$.unformat.call(g,this,{rowId:a,colModel:f[d]},d)}catch(_){c=f[d].edittype&&"textarea"==f[d].edittype?$(this).text():$(this).html()}if("cb"!=b&&"subgrid"!=b&&"rn"!=b&&(g.p.autoencode&&(c=$.jgrid.htmlDecode(c)),k[b]=c,f[d].editable===!0)){null===i&&(i=d),e?$("span:first",this).html(""):$(this).html("");var j=$.extend({},f[d].editoptions||{},{id:a+"_"+b,name:b});f[d].edittype||(f[d].edittype="text"),("&nbsp;"==c||"&#160;"==c||1==c.length&&160==c.charCodeAt(0))&&(c="");var l=$.jgrid.createEl.call(g,f[d].edittype,j,c,!0,$.extend({},$.jgrid.ajaxOptions,g.p.ajaxSelectOptions||{}));$(l).addClass("editable"),e?$("span:first",this).append(l):$(this).append(l),"select"==f[d].edittype&&"undefined"!=typeof f[d].editoptions&&f[d].editoptions.multiple===!0&&"undefined"==typeof f[d].editoptions.dataUrl&&$.browser.msie&&$(l).width($(l).width()),h++}}),h>0&&(k.id=a,g.p.savedRow.push(k),$(e).attr("editable","1"),$("td:eq("+i+") input",e).focus(),j.keys===!0&&$(e).bind("keydown",function(b){if(27===b.keyCode){if($(g).jqGrid("restoreRow",a,j.afterrestorefunc),g.p._inlinenav)try{$(g).jqGrid("showAddEditButtons")}catch(c){}return!1}if(13===b.keyCode){var d=b.target;if("TEXTAREA"==d.tagName)return!0;if($(g).jqGrid("saveRow",a,j)&&g.p._inlinenav)try{$(g).jqGrid("showAddEditButtons")}catch(e){}return!1}}),$(g).triggerHandler("jqGridInlineEditRow",[a,j]),$.isFunction(j.oneditfunc)&&j.oneditfunc.call(g,a)))))})},saveRow:function(a,b,c,d,e,f,g){var h=$.makeArray(arguments).slice(1),i={};"object"===$.type(h[0])?i=h[0]:($.isFunction(b)&&(i.successfunc=b),"undefined"!=typeof c&&(i.url=c),"undefined"!=typeof d&&(i.extraparam=d),$.isFunction(e)&&(i.aftersavefunc=e),$.isFunction(f)&&(i.errorfunc=f),$.isFunction(g)&&(i.afterrestorefunc=g)),i=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},$.jgrid.inlineEdit,i);var j,k,l,m,n,o=!1,p=this[0],q={},r={},s={};if(!p.grid)return o;if(n=$(p).jqGrid("getInd",a,!0),n===!1)return o;if(k=$(n).attr("editable"),i.url=i.url?i.url:p.p.editurl,"1"===k){var t;if($('td[role="gridcell"]',n).each(function(a){if(t=p.p.colModel[a],j=t.name,"cb"!=j&&"subgrid"!=j&&t.editable===!0&&"rn"!=j&&!$(this).hasClass("not-editable-cell")){switch(t.edittype){case"checkbox":var b=["Yes","No"];t.editoptions&&(b=t.editoptions.value.split(":")),q[j]=$("input",this).is(":checked")?b[0]:b[1];break;case"text":case"password":case"textarea":case"button":q[j]=$("input, textarea",this).val();break;case"select":if(t.editoptions.multiple){var c=$("select",this),d=[];q[j]=$(c).val(),q[j]?q[j]=q[j].join(","):q[j]="",$("select option:selected",this).each(function(a,b){d[a]=$(b).text()}),r[j]=d.join(",")}else q[j]=$("select option:selected",this).val(),r[j]=$("select option:selected",this).text();t.formatter&&"select"==t.formatter&&(r={});break;case"custom":try{if(!t.editoptions||!$.isFunction(t.editoptions.custom_value))throw"e1";if(q[j]=t.editoptions.custom_value.call(p,$(".customelement",this),"get"),void 0===q[j])throw"e2"}catch(e){"e1"==e&&$.jgrid.info_dialog($.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.nodefined,$.jgrid.edit.bClose),"e2"==e?$.jgrid.info_dialog($.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.novalue,$.jgrid.edit.bClose):$.jgrid.info_dialog($.jgrid.errors.errcap,e.message,$.jgrid.edit.bClose)}}if(m=$.jgrid.checkValues(q[j],a,p),m[0]===!1)return m[1]=q[j]+" "+m[1],!1;p.p.autoencode&&(q[j]=$.jgrid.htmlEncode(q[j])),"clientArray"!==i.url&&t.editoptions&&t.editoptions.NullIfEmpty===!0&&""===q[j]&&(s[j]="null")}}),m[0]===!1){try{var u=$.jgrid.findPos($("#"+$.jgrid.jqID(a),p.grid.bDiv)[0]);$.jgrid.info_dialog($.jgrid.errors.errcap,m[1],$.jgrid.edit.bClose,{left:u[0],top:u[1]})}catch(v){alert(m[1])}return o}var w,x,y;if(x=p.p.prmNames,y=x.oper,w=x.id,q&&(q[y]=x.editoper,q[w]=a,"undefined"==typeof p.p.inlineData&&(p.p.inlineData={}),q=$.extend({},q,p.p.inlineData,i.extraparam)),"clientArray"==i.url){q=$.extend({},q,r),p.p.autoencode&&$.each(q,function(a,b){q[a]=$.jgrid.htmlDecode(b)});var z=$(p).jqGrid("setRowData",a,q);$(n).attr("editable","0");for(var A=0;A<p.p.savedRow.length;A++)if(p.p.savedRow[A].id==a){l=A;break}l>=0&&p.p.savedRow.splice(l,1),$(p).triggerHandler("jqGridInlineAfterSaveRow",[a,z,q,i]),$.isFunction(i.aftersavefunc)&&i.aftersavefunc.call(p,a,z,i),o=!0,$(n).unbind("keydown")}else $("#lui_"+$.jgrid.jqID(p.p.id)).show(),s=$.extend({},q,s),s[w]=$.jgrid.stripPref(p.p.idPrefix,s[w]),$.ajax($.extend({url:i.url,data:$.isFunction(p.p.serializeRowData)?p.p.serializeRowData.call(p,s):s,type:i.mtype,async:!1,complete:function(b,c){if($("#lui_"+$.jgrid.jqID(p.p.id)).hide(),"success"===c){var d,e=!0;if(d=$(p).triggerHandler("jqGridInlineSuccessSaveRow",[b,a,i]),$.isArray(d)||(d=[!0,q]),d[0]&&$.isFunction(i.successfunc)&&(d=i.successfunc.call(p,b)),$.isArray(d)?(e=d[0],q=d[1]?d[1]:q):e=d,e===!0){p.p.autoencode&&$.each(q,function(a,b){q[a]=$.jgrid.htmlDecode(b)}),q=$.extend({},q,r),$(p).jqGrid("setRowData",a,q),$(n).attr("editable","0");for(var f=0;f<p.p.savedRow.length;f++)if(p.p.savedRow[f].id==a){l=f;break}l>=0&&p.p.savedRow.splice(l,1),$(p).triggerHandler("jqGridInlineAfterSaveRow",[a,b,q,i]),$.isFunction(i.aftersavefunc)&&i.aftersavefunc.call(p,a,b),o=!0,$(n).unbind("keydown")}else $(p).triggerHandler("jqGridInlineErrorSaveRow",[a,b,c,null,i]),$.isFunction(i.errorfunc)&&i.errorfunc.call(p,a,b,c,null),i.restoreAfterError===!0&&$(p).jqGrid("restoreRow",a,i.afterrestorefunc)}},error:function(b,c,d){if($("#lui_"+$.jgrid.jqID(p.p.id)).hide(),$(p).triggerHandler("jqGridInlineErrorSaveRow",[a,b,c,d,i]),$.isFunction(i.errorfunc))i.errorfunc.call(p,a,b,c,d);else{var e=b.responseText||b.statusText;try{$.jgrid.info_dialog($.jgrid.errors.errcap,'<div class="ui-state-error">'+e+"</div>",$.jgrid.edit.bClose,{buttonalign:"right"})}catch(f){alert(e)}}i.restoreAfterError===!0&&$(p).jqGrid("restoreRow",a,i.afterrestorefunc)}},$.jgrid.ajaxOptions,p.p.ajaxRowOptions||{}))}return o},restoreRow:function(a,b){var c=$.makeArray(arguments).slice(1),d={};return"object"===$.type(c[0])?d=c[0]:$.isFunction(b)&&(d.afterrestorefunc=b),d=$.extend(!0,$.jgrid.inlineEdit,d),this.each(function(){var b,c,e=this,f={};if(e.grid&&(c=$(e).jqGrid("getInd",a,!0),c!==!1)){for(var g=0;g<e.p.savedRow.length;g++)if(e.p.savedRow[g].id==a){b=g;break}if(b>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+$.jgrid.jqID(c.id)).datepicker("hide")}catch(h){}$.each(e.p.colModel,function(){this.editable===!0&&this.name in e.p.savedRow[b]&&(f[this.name]=e.p.savedRow[b][this.name])}),$(e).jqGrid("setRowData",a,f),$(c).attr("editable","0").unbind("keydown"),e.p.savedRow.splice(b,1),$("#"+$.jgrid.jqID(a),"#"+$.jgrid.jqID(e.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){$(e).jqGrid("delRowData",a)},0)}$(e).triggerHandler("jqGridInlineAfterRestoreRow",[a]),$.isFunction(d.afterrestorefunc)&&d.afterrestorefunc.call(e,a)}})},addRow:function(a){return a=$.extend(!0,{rowID:"new_row",initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},a||{}),this.each(function(){if(this.grid){var b=this;if(a.useDefValues===!0&&$(b.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var c=this.editoptions.defaultValue,d=$.isFunction(c)?c.call(b):c;a.initdata[this.name]=d}}),$(b).jqGrid("addRowData",a.rowID,a.initdata,a.position),a.rowID=b.p.idPrefix+a.rowID,$("#"+$.jgrid.jqID(a.rowID),"#"+$.jgrid.jqID(b.p.id)).addClass("jqgrid-new-row"),a.useFormatter)$("#"+$.jgrid.jqID(a.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID(b.p.id)).click();else{var c=b.p.prmNames,d=c.oper;a.addRowParams.extraparam[d]=c.addoper,$(b).jqGrid("editRow",a.rowID,a.addRowParams),$(b).jqGrid("setSelection",a.rowID)}}})},inlineNav:function(a,b){return b=$.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{useFormatter:!1,rowID:"new_row"},editParams:{},restoreAfterSelect:!0},$.jgrid.nav,b||{}),this.each(function(){if(this.grid){var c,d=this,e=$.jgrid.jqID(d.p.id);if(d.p._inlinenav=!0,b.addParams.useFormatter===!0){var f,g=d.p.colModel;for(f=0;f<g.length;f++)if(g[f].formatter&&"actions"===g[f].formatter){if(g[f].formatoptions){var h={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},i=$.extend(h,g[f].formatoptions);b.addParams.addRowParams={keys:i.keys,oneditfunc:i.onEdit,successfunc:i.onSuccess,url:i.url,extraparam:i.extraparam,aftersavefunc:i.afterSavef,errorfunc:i.onError,afterrestorefunc:i.afterRestore}}break}}b.add&&$(d).jqGrid("navButtonAdd",a,{caption:b.addtext,title:b.addtitle,buttonicon:b.addicon,id:d.p.id+"_iladd",onClickButton:function(){$(d).jqGrid("addRow",b.addParams),b.addParams.useFormatter||($("#"+e+"_ilsave").removeClass("ui-state-disabled"),$("#"+e+"_ilcancel").removeClass("ui-state-disabled"),$("#"+e+"_iladd").addClass("ui-state-disabled"),$("#"+e+"_iledit").addClass("ui-state-disabled"))}}),b.edit&&$(d).jqGrid("navButtonAdd",a,{caption:b.edittext,title:b.edittitle,buttonicon:b.editicon,id:d.p.id+"_iledit",onClickButton:function(){var a=$(d).jqGrid("getGridParam","selrow");a?($(d).jqGrid("editRow",a,b.editParams),$("#"+e+"_ilsave").removeClass("ui-state-disabled"),$("#"+e+"_ilcancel").removeClass("ui-state-disabled"),$("#"+e+"_iladd").addClass("ui-state-disabled"),$("#"+e+"_iledit").addClass("ui-state-disabled")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus())}}),b.save&&($(d).jqGrid("navButtonAdd",a,{caption:b.savetext||"",title:b.savetitle||"Save row",buttonicon:b.saveicon,id:d.p.id+"_ilsave",onClickButton:function(){var a=d.p.savedRow[0].id;if(a){var c=d.p.prmNames,f=c.oper;b.editParams.extraparam||(b.editParams.extraparam={}),$("#"+$.jgrid.jqID(a),"#"+e).hasClass("jqgrid-new-row")?b.editParams.extraparam[f]=c.addoper:b.editParams.extraparam[f]=c.editoper,$(d).jqGrid("saveRow",a,b.editParams)&&$(d).jqGrid("showAddEditButtons")}else $.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus()}}),$("#"+e+"_ilsave").addClass("ui-state-disabled")),b.cancel&&($(d).jqGrid("navButtonAdd",a,{caption:b.canceltext||"",title:b.canceltitle||"Cancel row editing",buttonicon:b.cancelicon,id:d.p.id+"_ilcancel",onClickButton:function(){var a=d.p.savedRow[0].id;a?($(d).jqGrid("restoreRow",a,b.editParams),$(d).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+e,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+e+"_ilcancel").addClass("ui-state-disabled")),b.restoreAfterSelect===!0&&(c=$.isFunction(d.p.beforeSelectRow)?d.p.beforeSelectRow:!1,d.p.beforeSelectRow=function(a,e){var f=!0;return d.p.savedRow.length>0&&d.p._inlinenav===!0&&a!==d.p.selrow&&null!==d.p.selrow&&(d.p.selrow==b.addParams.rowID?$(d).jqGrid("delRowData",d.p.selrow):$(d).jqGrid("restoreRow",d.p.selrow,b.editParams),$(d).jqGrid("showAddEditButtons")),c&&(f=c.call(d,a,e)),f})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var a=$.jgrid.jqID(this.p.id);$("#"+a+"_ilsave").addClass("ui-state-disabled"),$("#"+a+"_ilcancel").addClass("ui-state-disabled"),$("#"+a+"_iladd").removeClass("ui-state-disabled"),$("#"+a+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function($){"use strict";$.jgrid.extend({setSubGrid:function(){return this.each(function(){var a,b=this,c={plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0};if(b.p.subGridOptions=$.extend(c,b.p.subGridOptions||{}),b.p.colNames.unshift(""),b.p.colModel.unshift({name:"subgrid",width:$.browser.safari||$.browser.webkit?b.p.subGridWidth+b.p.cellLayout:b.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),a=b.p.subGridModel,a[0]){a[0].align=$.extend([],a[0].align||[]);for(var d=0;d<a[0].name.length;d++)a[0].align[d]=a[0].align[d]||"left"}})},addSubGridCell:function(a,b){var c,d,e="";return this.each(function(){e=this.formatCol(a,b),d=this.p.id,c=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+d+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+e+"><a href='javascript:void(0);'><span class='ui-icon "+c+"'></span></a></td>"},addSubGrid:function(a,b){return this.each(function(){var c=this;if(c.grid){var d,e,f,g,h,i=function(a,b,d){var e=$("<td align='"+c.p.subGridModel[0].align[d]+"'></td>").html(b);$(a).append(e)},j=function(a,b){var d,e,f,g=$("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),h=$("<tr></tr>");for(e=0;e<c.p.subGridModel[0].name.length;e++)d=$("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+c.p.direction+"'></th>"),$(d).html(c.p.subGridModel[0].name[e]),$(d).width(c.p.subGridModel[0].width[e]),$(h).append(d);$(g).append(h),a&&(f=c.p.xmlReader.subgrid,$(f.root+" "+f.row,a).each(function(){if(h=$("<tr class='ui-widget-content ui-subtblcell'></tr>"),f.repeatitems===!0)$(f.cell,this).each(function(a){i(h,$(this).text()||"&#160;",a)});else{var a=c.p.subGridModel[0].mapping||c.p.subGridModel[0].name;if(a)for(e=0;e<a.length;e++)i(h,$(a[e],this).text()||"&#160;",e)}$(g).append(h)}));var j=$("table:first",c.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(j+b)).append(g),c.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(c.p.id)).hide(),!1},k=function(a,b){var d,e,f,g,h,j,k=$("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=$("<tr></tr>");for(f=0;f<c.p.subGridModel[0].name.length;f++)d=$("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+c.p.direction+"'></th>"),$(d).html(c.p.subGridModel[0].name[f]),$(d).width(c.p.subGridModel[0].width[f]),$(l).append(d);if($(k).append(l),a&&(h=c.p.jsonReader.subgrid,e=$.jgrid.getAccessor(a,h.root),"undefined"!=typeof e))for(f=0;f<e.length;f++){if(g=e[f],l=$("<tr class='ui-widget-content ui-subtblcell'></tr>"),h.repeatitems===!0)for(h.cell&&(g=g[h.cell]),j=0;j<g.length;j++)i(l,g[j]||"&#160;",j);else{var m=c.p.subGridModel[0].mapping||c.p.subGridModel[0].name;if(m.length)for(j=0;j<m.length;j++)i(l,g[m[j]]||"&#160;",j)}$(k).append(l)}var n=$("table:first",c.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(n+b)).append(k),c.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(c.p.id)).hide(),!1},l=function(a){var b,d,e,f;if(b=$(a).attr("id"),d={nd_:(new Date).getTime()},d[c.p.prmNames.subgridid]=b,!c.p.subGridModel[0])return!1;if(c.p.subGridModel[0].params)for(f=0;f<c.p.subGridModel[0].params.length;f++)for(e=0;e<c.p.colModel.length;e++)c.p.colModel[e].name===c.p.subGridModel[0].params[f]&&(d[c.p.colModel[e].name]=$("td:eq("+e+")",a).text().replace(/\&#160\;/gi,""));if(!c.grid.hDiv.loading)switch(c.grid.hDiv.loading=!0,$("#load_"+$.jgrid.jqID(c.p.id)).show(),c.p.subgridtype||(c.p.subgridtype=c.p.datatype),$.isFunction(c.p.subgridtype)?c.p.subgridtype.call(c,d):c.p.subgridtype=c.p.subgridtype.toLowerCase(),c.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:c.p.mtype,url:c.p.subGridUrl,dataType:c.p.subgridtype,data:$.isFunction(c.p.serializeSubGridData)?c.p.serializeSubGridData.call(c,d):d,complete:function(a){"xml"===c.p.subgridtype?j(a.responseXML,b):k($.jgrid.parse(a.responseText),b),a=null}},$.jgrid.ajaxOptions,c.p.ajaxSubgridOptions||{}))}return!1},m=0;$.each(c.p.colModel,function(){(this.hidden===!0||"rn"===this.name||"cb"===this.name)&&m++});var n=c.rows.length,o=1;for(void 0!==b&&b>0&&(o=b,n=b+1);n>o;)$(c.rows[o]).hasClass("jqgrow")&&$(c.rows[o].cells[a]).bind("click",function(){var b=$(this).parent("tr")[0];if(h=b.nextSibling,$(this).hasClass("sgcollapsed")){if(e=c.p.id,d=b.id,c.p.subGridOptions.reloadOnExpand===!0||c.p.subGridOptions.reloadOnExpand===!1&&!$(h).hasClass("ui-subgrid")){if(f=a>=1?"<td colspan='"+a+"'>&#160;</td>":"",g=$(c).triggerHandler("jqGridSubGridBeforeExpand",[e+"_"+d,d]),g=g===!1||"stop"===g?!1:!0,g&&$.isFunction(c.p.subGridBeforeExpand)&&(g=c.p.subGridBeforeExpand.call(c,e+"_"+d,d)),g===!1)return!1;$(b).after("<tr role='row' class='ui-subgrid'>"+f+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+c.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(c.p.colNames.length-1-m,10)+"' class='ui-widget-content subgrid-data'><div id="+e+"_"+d+" class='tablediv'></div></td></tr>"),$(c).triggerHandler("jqGridSubGridRowExpanded",[e+"_"+d,d]),$.isFunction(c.p.subGridRowExpanded)?c.p.subGridRowExpanded.call(c,e+"_"+d,d):l(b)}else $(h).show();$(this).html("<a href='javascript:void(0);'><span class='ui-icon "+c.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),c.p.subGridOptions.selectOnExpand&&$(c).jqGrid("setSelection",d)}else if($(this).hasClass("sgexpanded")){if(g=$(c).triggerHandler("jqGridSubGridRowColapsed",[e+"_"+d,d]),g=g===!1||"stop"===g?!1:!0,g&&$.isFunction(c.p.subGridRowColapsed)&&(d=b.id,g=c.p.subGridRowColapsed.call(c,e+"_"+d,d)),g===!1)return!1;c.p.subGridOptions.reloadOnExpand===!0?$(h).remove(".ui-subgrid"):$(h).hasClass("ui-subgrid")&&$(h).hide(),$(this).html("<a href='javascript:void(0);'><span class='ui-icon "+c.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1}),o++;c.p.subGridOptions.expandOnLoad===!0&&$(c.rows).filter(".jqgrow").each(function(a,b){$(b.cells[0]).click()}),c.subGridXml=function(a,b){j(a,b)},c.subGridJson=function(a,b){k(a,b)}}})},expandSubGridRow:function(a){return this.each(function(){var b=this;if((b.grid||a)&&b.p.subGrid===!0){var c=$(this).jqGrid("getInd",a,!0);if(c){var d=$("td.sgcollapsed",c)[0];d&&$(d).trigger("click")}}})},collapseSubGridRow:function(a){return this.each(function(){var b=this;if((b.grid||a)&&b.p.subGrid===!0){var c=$(this).jqGrid("getInd",a,!0);if(c){var d=$("td.sgexpanded",c)[0];d&&$(d).trigger("click")}}})},toggleSubGridRow:function(a){return this.each(function(){var b=this;if((b.grid||a)&&b.p.subGrid===!0){var c=$(this).jqGrid("getInd",a,!0);if(c){var d=$("td.sgcollapsed",c)[0];d?$(d).trigger("click"):(d=$("td.sgexpanded",c)[0],d&&$(d).trigger("click"))}}})}})}(jQuery),function($){"use strict";$.extend($.jgrid,{template:function(a){var b=$.makeArray(arguments).slice(1),c=1;return void 0===a&&(a=""),a.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(a,d){if(!isNaN(parseInt(d,10)))return c++,b[parseInt(d,10)];for(var e=b[c],f=e.length;f--;)if(d===e[f].nm)return e[f].v;c++})}}),$.jgrid.extend({groupingSetup:function(){return this.each(function(){var a=this,b=a.p.groupingView;if(null===b||"object"!=typeof b&&!$.isFunction(b))a.p.grouping=!1;else if(b.groupField.length){"undefined"==typeof b.visibiltyOnNextGrouping&&(b.visibiltyOnNextGrouping=[]),b.lastvalues=[],b.groups=[],b.counters=[];for(var c=0;c<b.groupField.length;c++)b.groupOrder[c]||(b.groupOrder[c]="asc"),b.groupText[c]||(b.groupText[c]="{0}"),"boolean"!=typeof b.groupColumnShow[c]&&(b.groupColumnShow[c]=!0),"boolean"!=typeof b.groupSummary[c]&&(b.groupSummary[c]=!1),b.groupColumnShow[c]===!0?(b.visibiltyOnNextGrouping[c]=!0,$(a).jqGrid("showCol",b.groupField[c])):(b.visibiltyOnNextGrouping[c]=$("#"+$.jgrid.jqID(a.p.id+"_"+b.groupField[c])).is(":visible"),$(a).jqGrid("hideCol",b.groupField[c]));b.summary=[];for(var d=a.p.colModel,e=0,f=d.length;f>e;e++)d[e].summaryType&&b.summary.push({nm:d[e].name,st:d[e].summaryType,v:"",sr:d[e].summaryRound,srt:d[e].summaryRoundType||"round"})}else a.p.grouping=!1})},groupingPrepare:function(a,b,c,d){return this.each(function(){for(var e,f,g=this.p.groupingView,h=this,i=g.groupField.length,j=0,k=0;i>k;k++)e=g.groupField[k],f=c[e],void 0!==f&&(0===d?(g.groups.push({idx:k,dataIndex:e,value:f,startRow:d,cnt:1,summary:[]}),g.lastvalues[k]=f,g.counters[k]={cnt:1,pos:g.groups.length-1,summary:$.extend(!0,[],g.summary)},$.each(g.counters[k].summary,function(){$.isFunction(this.st)?this.v=this.st.call(h,this.v,this.nm,c):this.v=$(h).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,c)}),g.groups[g.counters[k].pos].summary=g.counters[k].summary):"object"!=typeof f&&g.lastvalues[k]!==f?(g.groups.push({idx:k,dataIndex:e,value:f,startRow:d,cnt:1,summary:[]}),g.lastvalues[k]=f,j=1,g.counters[k]={cnt:1,pos:g.groups.length-1,summary:$.extend(!0,[],g.summary)},$.each(g.counters[k].summary,function(){$.isFunction(this.st)?this.v=this.st.call(h,this.v,this.nm,c):this.v=$(h).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,c)}),g.groups[g.counters[k].pos].summary=g.counters[k].summary):1===j?(g.groups.push({idx:k,dataIndex:e,value:f,startRow:d,cnt:1,summary:[]}),g.lastvalues[k]=f,g.counters[k]={cnt:1,pos:g.groups.length-1,summary:$.extend(!0,[],g.summary)},$.each(g.counters[k].summary,function(){$.isFunction(this.st)?this.v=this.st.call(h,this.v,this.nm,c):this.v=$(h).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,c)}),g.groups[g.counters[k].pos].summary=g.counters[k].summary):(g.counters[k].cnt+=1,g.groups[g.counters[k].pos].cnt=g.counters[k].cnt,$.each(g.counters[k].summary,function(){$.isFunction(this.st)?this.v=this.st.call(h,this.v,this.nm,c):this.v=$(h).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,c)}),g.groups[g.counters[k].pos].summary=g.counters[k].summary));b.push(a)}),b},groupingToggle:function(a){return this.each(function(){var b=this,c=b.p.groupingView,d=a.split("_"),e=parseInt(d[d.length-2],10);d.splice(d.length-2,2);var f,g=d.join("_"),h=c.minusicon,i=c.plusicon,j=$("#"+$.jgrid.jqID(a)),k=j.length?j[0].nextSibling:null,l=$("#"+$.jgrid.jqID(a)+" span.tree-wrap-"+b.p.direction),m=!1;if(l.hasClass(h)){if(c.showSummaryOnHide){if(k)for(;k;){if($(k).hasClass("jqfoot")){var n=parseInt($(k).attr("jqfootlevel"),10);if(e>=n)break}$(k).hide(),k=k.nextSibling}}else if(k)for(;k&&!$(k).hasClass(g+"_"+String(e))&&!$(k).hasClass(g+"_"+String(e-1));)$(k).hide(),k=k.nextSibling;l.removeClass(h).addClass(i),m=!0}else{if(k)for(;k&&!$(k).hasClass(g+"_"+String(e))&&!$(k).hasClass(g+"_"+String(e-1));)$(k).show(),f=$(k).find("span.tree-wrap-"+b.p.direction),f&&$(f).hasClass(i)&&$(f).removeClass(i).addClass(h),k=k.nextSibling;l.removeClass(i).addClass(h)}$(b).triggerHandler("jqGridGroupingClickGroup",[a,m]),$.isFunction(b.p.onClickGroup)&&b.p.onClickGroup.call(b,a,m)}),!1},groupingRender:function(a,b){return this.each(function(){function c(a,b,c){if(0===b)return c[a];var d=c[a].idx;if(0===d)return c[a];for(var e=a;e>=0;e--)if(c[e].idx===d-b)return c[e]}var d,e,f,g,h=this,i=h.p.groupingView,j="",k="",l=i.groupCollapse?i.plusicon:i.minusicon,m=[],n=i.groupField.length;l+=" tree-wrap-"+h.p.direction,g=0,$.each(h.p.colModel,function(a,b){for(var c=0;n>c;c++)if(i.groupField[c]===b.name){m[c]=a;break}});var o=0,p=$.makeArray(i.groupSummary);p.reverse(),$.each(i.groups,function(g,q){o++,e=h.p.id+"ghead_"+q.idx,d=e+"_"+g,k="<span style='cursor:pointer;' class='ui-icon "+l+"' onclick=\"jQuery('#"+$.jgrid.jqID(h.p.id)+"').jqGrid('groupingToggle','"+d+"');return false;\"></span>";try{f=h.formatter(d,q.value,m[q.idx],q.value)}catch(r){f=q.value}j+='<tr id="'+d+'" role="row" class= "ui-widget-content jqgroup ui-row-'+h.p.direction+" "+e+'"><td style="padding-left:'+12*q.idx+'px;" colspan="'+b+'">'+k+$.jgrid.template(i.groupText[q.idx],f,q.cnt,q.summary)+"</td></tr>";var s=n-1===q.idx;if(s){for(var t=i.groups[g+1],u=void 0!==t?i.groups[g+1].startRow:a.length,v=q.startRow;u>v;v++)j+=a[v].join("");var w;if(void 0!==t){for(w=0;w<i.groupField.length&&t.dataIndex!==i.groupField[w];w++);o=i.groupField.length-w}for(var x=0;o>x;x++)if(p[x]){var y="";i.groupCollapse&&!i.showSummaryOnHide&&(y=' style="display:none;"'),j+="<tr"+y+' jqfootlevel="'+(q.idx-x)+'" role="row" class="ui-widget-content jqfoot ui-row-'+h.p.direction+'">';for(var z,A=c(g,x,i.groups),B=h.p.colModel,C=A.cnt,D=0;b>D;D++){var E="<td "+h.formatCol(D,1,"")+">&#160;</td>",F="{0}";$.each(A.summary,function(){if(this.nm===B[D].name){B[D].summaryTpl&&(F=B[D].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&this.v&&C>0&&(this.v=this.v/C);
try{z=h.formatter("",this.v,D,this)}catch(a){z=this.v}return E="<td "+h.formatCol(D,1,"")+">"+$.jgrid.format(F,z)+"</td>",!1}}),j+=E}j+="</tr>"}o=w}}),$("#"+$.jgrid.jqID(h.p.id)+" tbody:first").append(j),j=null})},groupingGroupBy:function(a,b){return this.each(function(){var c=this;"string"==typeof a&&(a=[a]);var d=c.p.groupingView;c.p.grouping=!0,"undefined"==typeof d.visibiltyOnNextGrouping&&(d.visibiltyOnNextGrouping=[]);var e;for(e=0;e<d.groupField.length;e++)!d.groupColumnShow[e]&&d.visibiltyOnNextGrouping[e]&&$(c).jqGrid("showCol",d.groupField[e]);for(e=0;e<a.length;e++)d.visibiltyOnNextGrouping[e]=$("#"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(a[e])).is(":visible");c.p.groupingView=$.extend(c.p.groupingView,b||{}),d.groupField=a,$(c).trigger("reloadGrid")})},groupingRemove:function(a){return this.each(function(){var b=this;if("undefined"==typeof a&&(a=!0),b.p.grouping=!1,a===!0){for(var c=b.p.groupingView,d=0;d<c.groupField.length;d++)!c.groupColumnShow[d]&&c.visibiltyOnNextGrouping[d]&&$(b).jqGrid("showCol",c.groupField);$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID(b.p.id)+" tbody:first").remove(),$("tr.jqgrow:hidden","#"+$.jgrid.jqID(b.p.id)+" tbody:first").show()}else $(b).trigger("reloadGrid")})},groupingCalculations:{handler:function(a,b,c,d,e,f){var g={sum:function(){return parseFloat(b||0)+parseFloat(f[c]||0)},min:function(){return""===b?parseFloat(f[c]||0):Math.min(parseFloat(b),parseFloat(f[c]||0))},max:function(){return""===b?parseFloat(f[c]||0):Math.max(parseFloat(b),parseFloat(f[c]||0))},count:function(){return""===b&&(b=0),f.hasOwnProperty(c)?b+1:0},avg:function(){return g.sum()}};if(!g[a])throw"jqGrid Grouping No such method: "+a;var h=g[a]();if(null!=d)if("fixed"==e)h=h.toFixed(d);else{var i=Math.pow(10,d);h=Math.round(h*i)/i}return h}}})}(jQuery),function($){"use strict";$.jgrid.extend({jqGridImport:function(a){return a=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},a||{}),this.each(function(){var b=this,c=function(a,c){var d,e,f=$(c.xmlGrid.config,a)[0],g=$(c.xmlGrid.data,a)[0];if(xmlJsonClass.xml2json&&$.jgrid.parse){d=xmlJsonClass.xml2json(f," "),d=$.jgrid.parse(d);for(var h in d)d.hasOwnProperty(h)&&(e=d[h]);if(g){var i=d.grid.datatype;d.grid.datatype="xmlstring",d.grid.datastr=a,$(b).jqGrid(e).jqGrid("setGridParam",{datatype:i})}else $(b).jqGrid(e);d=null,e=null}else alert("xml2json or parse are not present")},d=function(a,c){if(a&&"string"==typeof a){var d=!1;$.jgrid.useJSON&&($.jgrid.useJSON=!1,d=!0);var e=$.jgrid.parse(a);d&&($.jgrid.useJSON=!0);var f=e[c.jsonGrid.config],g=e[c.jsonGrid.data];if(g){var h=f.datatype;f.datatype="jsonstring",f.datastr=g,$(b).jqGrid(f).jqGrid("setGridParam",{datatype:h})}else $(b).jqGrid(f)}};switch(a.imptype){case"xml":$.ajax($.extend({url:a.impurl,type:a.mtype,data:a.impData,dataType:"xml",complete:function(d,e){"success"==e&&(c(d.responseXML,a),$(b).triggerHandler("jqGridImportComplete",[d,a]),$.isFunction(a.importComplete)&&a.importComplete(d)),d=null}},a.ajaxOptions));break;case"xmlstring":if(a.impstring&&"string"==typeof a.impstring){var e=$.jgrid.stringToDoc(a.impstring);e&&(c(e,a),$(b).triggerHandler("jqGridImportComplete",[e,a]),$.isFunction(a.importComplete)&&a.importComplete(e),a.impstring=null),e=null}break;case"json":$.ajax($.extend({url:a.impurl,type:a.mtype,data:a.impData,dataType:"json",complete:function(c){try{d(c.responseText,a),$(b).triggerHandler("jqGridImportComplete",[c,a]),$.isFunction(a.importComplete)&&a.importComplete(c)}catch(e){}c=null}},a.ajaxOptions));break;case"jsonstring":a.impstring&&"string"==typeof a.impstring&&(d(a.impstring,a),$(b).triggerHandler("jqGridImportComplete",[a.impstring,a]),$.isFunction(a.importComplete)&&a.importComplete(a.impstring),a.impstring=null)}})},jqGridExport:function(a){a=$.extend({exptype:"xmlstring",root:"grid",ident:"	"},a||{});var b=null;return this.each(function(){if(this.grid){var c=$.extend(!0,{},$(this).jqGrid("getGridParam"));if(c.rownumbers&&(c.colNames.splice(0,1),c.colModel.splice(0,1)),c.multiselect&&(c.colNames.splice(0,1),c.colModel.splice(0,1)),c.subGrid&&(c.colNames.splice(0,1),c.colModel.splice(0,1)),c.knv=null,c.treeGrid)for(var d in c.treeReader)c.treeReader.hasOwnProperty(d)&&(c.colNames.splice(c.colNames.length-1),c.colModel.splice(c.colModel.length-1));switch(a.exptype){case"xmlstring":b="<"+a.root+">"+xmlJsonClass.json2xml(c,a.ident)+"</"+a.root+">";break;case"jsonstring":b="{"+xmlJsonClass.toJson(c,a.root,a.ident,!1)+"}",void 0!==c.postData.filters&&(b=b.replace(/filters":"/,'filters":'),b=b.replace(/}]}"/,"}]}"))}}}),b},excelExport:function(a){return a=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},a||{}),this.each(function(){if(this.grid){var b;if("remote"==a.exptype){var c=$.extend({},this.p.postData);c[a.oper]=a.tag;var d=jQuery.param(c);b=-1!=a.url.indexOf("?")?a.url+"&"+d:a.url+"?"+d,window.location=b}}})}})}(jQuery),function($){if($.browser.msie&&8==$.browser.version&&($.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"==a.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(a,b){var c=setSelected.call(this,a,b);if(b&&this.selectedList){var d=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(d)})}return c}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(a){return this.each(function(){function b(){c.p.disableClick=!0}var c=this,d=$.jgrid.jqID(c.p.id),e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+d+"_cb,#jqgh_"+d+"_rn,#jqgh_"+d+"_subgrid),:hidden)",placeholder:{element:function(a){var b=$(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return b},update:function(a,b){b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}},update:function(a,b){var d=$(b.item).parent(),e=$(">th",d),f=c.p.colModel,g={},h=c.p.id+"_";$.each(f,function(a){g[this.name]=a});var i=[];e.each(function(){var a=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(h,"");a in g&&i.push(g[a])}),$(c).jqGrid("remapColumns",i,!0,!0),$.isFunction(c.p.sortable.update)&&c.p.sortable.update(i),setTimeout(function(){c.p.disableClick=!1},50)}};if(c.p.sortable.options?$.extend(e,c.p.sortable.options):$.isFunction(c.p.sortable)&&(c.p.sortable={update:c.p.sortable}),e.start){var f=e.start;e.start=function(a,c){b(),f.call(this,a,c)}}else e.start=b;c.p.sortable.exclude&&(e.items+=":not("+c.p.sortable.exclude+")"),a.sortable(e).data("sortable").floating=!0})},columnChooser:function(a){function b(a,b,c){if(b>=0){var d=a.slice(),e=d.splice(b,Math.max(a.length-b,b));return b>a.length&&(b=a.length),d[b]=c,d.concat(e)}}function c(a,b){a&&("string"==typeof a?$.fn[a]&&$.fn[a].apply(b,$.makeArray(arguments).slice(2)):$.isFunction(a)&&a.apply(b,$.makeArray(arguments).slice(2)))}var d=this;if(!$("#colchooser_"+$.jgrid.jqID(d[0].p.id)).length){var e=$('<div id="colchooser_'+d[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),f=$("select",e);if(a=$.extend({width:420,height:240,classname:null,done:function(a){a&&d.jqGrid("remapColumns",a,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(a){var b={};return b[a.bSubmit]=function(){a.apply_perm(),a.cleanup(!1)},b[a.bCancel]=function(){a.cleanup(!0)},$.extend(!0,{buttons:b,close:function(){a.cleanup(!0)},modal:a.modal?a.modal:!1,resizable:a.resizable?a.resizable:!0,width:a.width+20},a.dialog_opts||{})},apply_perm:function(){$("option",f).each(function(){this.selected?d.jqGrid("showCol",g[this.value].name):d.jqGrid("hideCol",g[this.value].name)});var c=[];$("option:selected",f).each(function(){c.push(parseInt(this.value,10))}),$.each(c,function(){delete i[g[parseInt(this,10)].name]}),$.each(i,function(){var a=parseInt(this,10);c=b(c,a,a)}),a.done&&a.done.call(d,c)},cleanup:function(b){c(a.dlog,e,"destroy"),c(a.msel,f,"destroy"),e.remove(),b&&a.done&&a.done.call(d)},msel_opts:{}},$.jgrid.col,a||{}),$.ui&&$.ui.multiselect&&"multiselect"==a.msel){if(!$.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");a.msel_opts=$.extend($.ui.multiselect.defaults,a.msel_opts)}a.caption&&e.attr("title",a.caption),a.classname&&(e.addClass(a.classname),f.addClass(a.classname)),a.width&&($(">div",e).css({width:a.width,margin:"0 auto"}),f.css("width",a.width)),a.height&&($(">div",e).css("height",a.height),f.css("height",a.height-10));var g=d.jqGrid("getGridParam","colModel"),h=d.jqGrid("getGridParam","colNames"),i={},j=[];f.empty(),$.each(g,function(a){return i[this.name]=a,this.hidedlg?void(this.hidden||j.push(a)):void f.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+jQuery.jgrid.stripHtml(h[a])+"</option>")});var k=$.isFunction(a.dlog_opts)?a.dlog_opts.call(d,a):a.dlog_opts;c(a.dlog,e,k);var l=$.isFunction(a.msel_opts)?a.msel_opts.call(d,a):a.msel_opts;c(a.msel,f,l)}},sortableRows:function(a){return this.each(function(){var b=this;b.grid&&(b.p.treeGrid||$.fn.sortable&&(a=$.extend({cursor:"move",axis:"y",items:".jqgrow"},a||{}),a.start&&$.isFunction(a.start)?(a._start_=a.start,delete a.start):a._start_=!1,a.update&&$.isFunction(a.update)?(a._update_=a.update,delete a.update):a._update_=!1,a.start=function(c,d){if($(d.item).css("border-width","0px"),$("td",d.item).each(function(a){this.style.width=b.grid.cols[a].style.width}),b.p.subGrid){var e=$(d.item).attr("id");try{$(b).jqGrid("collapseSubGridRow",e)}catch(f){}}a._start_&&a._start_.apply(this,[c,d])},a.update=function(c,d){$(d.item).css("border-width",""),b.p.rownumbers===!0&&$("td.jqgrid-rownum",b.rows).each(function(a){$(this).html(a+1+(parseInt(b.p.page,10)-1)*parseInt(b.p.rowNum,10))}),a._update_&&a._update_.apply(this,[c,d])},$("tbody:first",b).sortable(a),$("tbody:first",b).disableSelection()))})},gridDnD:function(a){return this.each(function(){function b(){var a=$.data(c,"dnd");$("tr.jqgrow:not(.ui-draggable)",c).draggable($.isFunction(a.drag)?a.drag.call($(c),a):a.drag)}var c=this;if(c.grid&&!c.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var d="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(void 0===$("#jqgrid_dnd")[0]&&$("body").append(d),"string"==typeof a&&"updateDnD"==a&&c.p.jqgdnd===!0)return void b();if(a=$.extend({drag:function(a){return $.extend({start:function(b,d){if(c.p.subGrid){var e=$(d.helper).attr("id");try{$(c).jqGrid("collapseSubGridRow",e)}catch(f){}}for(var g=0;g<$.data(c,"dnd").connectWith.length;g++)"0"==$($.data(c,"dnd").connectWith[g]).jqGrid("getGridParam","reccount")&&$($.data(c,"dnd").connectWith[g]).jqGrid("addRowData","jqg_empty_row",{});d.helper.addClass("ui-state-highlight"),$("td",d.helper).each(function(a){this.style.width=c.grid.headers[a].width+"px"}),a.onstart&&$.isFunction(a.onstart)&&a.onstart.call($(c),b,d)},stop:function(b,d){if(d.helper.dropped&&!a.dragcopy){var e=$(d.helper).attr("id");void 0===e&&(e=$(this).attr("id")),$(c).jqGrid("delRowData",e)}for(var f=0;f<$.data(c,"dnd").connectWith.length;f++)$($.data(c,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row");a.onstop&&$.isFunction(a.onstop)&&a.onstop.call($(c),b,d)}},a.drag_opts||{})},drop:function(a){return $.extend({accept:function(a){if(!$(a).hasClass("jqgrow"))return a;var b=$(a).closest("table.ui-jqgrid-btable");if(b.length>0&&void 0!==$.data(b[0],"dnd")){var c=$.data(b[0],"dnd").connectWith;return-1!=$.inArray("#"+$.jgrid.jqID(this.id),c)?!0:!1}return!1},drop:function(b,d){if($(d.draggable).hasClass("jqgrow")){var e=$(d.draggable).attr("id"),f=d.draggable.parent().parent().jqGrid("getRowData",e);if(!a.dropbyname){var g,h=0,i={},j=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(var k in f)g=j[h].name,"cb"!=g&&"rn"!=g&&"subgrid"!=g&&f.hasOwnProperty(k)&&j[h]&&(i[g]=f[k]),h++;f=i}catch(l){}}if(d.helper.dropped=!0,a.beforedrop&&$.isFunction(a.beforedrop)){var m=a.beforedrop.call(this,b,d,f,$("#"+$.jgrid.jqID(c.p.id)),$(this));"undefined"!=typeof m&&null!==m&&"object"==typeof m&&(f=m)}if(d.helper.dropped){var n;a.autoid&&($.isFunction(a.autoid)?n=a.autoid.call(this,f):(n=Math.ceil(1e3*Math.random()),n=a.autoidprefix+n)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",n,f,a.droppos)}a.ondrop&&$.isFunction(a.ondrop)&&a.ondrop.call(this,b,d,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},a||{}),a.connectWith){a.connectWith=a.connectWith.split(","),a.connectWith=$.map(a.connectWith,function(a){return $.trim(a)}),$.data(c,"dnd",a),"0"==c.p.reccount||c.p.jqgdnd||b(),c.p.jqgdnd=!0;for(var e=0;e<a.connectWith.length;e++){var f=a.connectWith[e];$(f).droppable($.isFunction(a.drop)?a.drop.call($(c),a):a.drop)}}}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id);if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(a,b){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",b.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,a,b)},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}})}(jQuery),$.jgrid.extend({setShrinkToFit:function(a){this.each(function(){if(this.grid){var b=this;b.p.shrinkToFit=a}})},getInternals:function(){var a,b;return this.each(function(){a=this,b=a.p}),[a,b]}}),$.jgrid.extend({updateSortClass:function(a){var b,c,d=$(this);this.each(function(){b=this}),b&&b.p&&(a||(a=this.jqGrid("getColIndex",b,b.p.sortname),c=!0),b.grid.headers[a]&&(b.p.lastsort>=0&&b.p.lastsort!==a&&b.p.colModel[b.p.lastsort].sortable!==!1?(d.parents(".data-grid").find(".sorted-column").removeClass("sorted-column"),b.p.colModel[b.p.lastsort].classes||(b.p.colModel[b.p.lastsort].classes=""),b.p.colModel[b.p.lastsort].classes=b.p.colModel[b.p.lastsort].classes.replace(" sorted-column",""),$(b.grid.headers[a].el).addClass("sorted-column"),b.p.colModel[a].classes+=" sorted-column"):c&&($(b.grid.headers[a].el).addClass("sorted-column"),b.p.colModel[a].classes||(b.p.colModel[a].classes=""),b.p.colModel[a].classes+=" sorted-column")))},highlightRow:function(a){var b,c;this.each(function(){b=this}),b&&b.rows&&(c=b.rows.namedItem(a),$(c).addClass("row-highlight"))},clearHighlightRow:function(a){var b,c;this.each(function(){b=this}),b&&b.rows&&(c=b.rows.namedItem(a),$(c).removeClass("row-highlight"))},getCellElm:function(a,b,c){var d=this.jqGrid("getColIndex",a,c),e=a.rows.namedItem(b),f=$(e).find("td:eq({0})".format(d));return $(f)},getColIndex:function(a,b){var c=!1;return _.find(a.p.colModel,function(a,d){return a.index==b?(c=d,!0):void 0}),c},highlightCell:function(a,b,c){var d;if(this.each(function(){d=this}),d&&d.p){c&&this.jqGrid("highlightRow",a);var e=this.jqGrid("getCellElm",d,a,b);e.addClass("cell-highlight")}},clearHighlightCell:function(a,b,c){var d;if(this.each(function(){d=this}),d&&d.rows){c&&this.jqGrid("clearHighlightRow",a);var e=this.jqGrid("getCellElm",d,a,b);e.removeClass("cell-highlight")}},highlightMetric:function(a){var b,c,d;this.each(function(){b=this}),b&&b.rows&&(c=this.jqGrid("getColIndex",b,a),b.grid.headers[c]&&$(b.grid.headers[c].el).addClass("metric-highlight"),d='[aria-describedby="{0}_{1}"]'.format($(b).attr("id"),a),$(d).addClass("metric-highlight"))},clearHighlightMetric:function(a){var b,c,d;this.each(function(){b=this}),b&&b.rows&&(c=this.jqGrid("getColIndex",b,a),b.grid.headers[c]&&$(b.grid.headers[c].el).removeClass("metric-highlight"),d='[aria-describedby="{0}_{1}"]'.format($(b).attr("id"),a),$(d).removeClass("metric-highlight"))},clearAllHighlightMetric:function(){$(".metric-highlight").removeClass("metric-highlight")}}),function($){$.jgrid=$.jgrid||{},$.extend($.jgrid,{defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:" match",rulesText:" rules"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(a){return 11>a||a>13?["st","nd","rd","th"][Math.min((a-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}})}(jQuery);